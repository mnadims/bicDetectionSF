<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/oozie/cd91b960.java"><expr_stmt><expr><name>From</name> <name>cd91b960477235e891566feb9a07174d61756f6b</name> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>mona</name> <operator>&lt;</operator><name>chitnis</name>@<name>yahoo</name><operator>-</operator><name><name>inc</name><operator>.</operator><name>com</name></name><operator>&gt;</operator>
<name>Date</name><operator>:</operator> <name>Mon</name></expr><operator>,</operator> <expr><literal type="number">28</literal> <name>Jul</name> <literal type="number">2014</literal> <literal type="number">18</literal><operator>:</operator><literal type="number">54</literal><operator>:</operator><literal type="number">47</literal> <operator>-</operator><literal type="number">0700</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>OOZIE</name><operator>-</operator><literal type="number">1944</literal> <name>Recursive</name> <name>variable</name> <name>resolution</name> <name>broken</name> <name>when</name> <name>same</name>
 <name>parameter</name> <name>name</name> <name>in</name> <name>config</name><operator>-</operator>default <name>and</name> <name>action</name> <call><name>conf</name> <argument_list>(<argument><expr><name>mona</name></expr></argument>)</argument_list></call>

<operator>--</operator>
 <operator>...</operator><operator>/</operator><name>workflow</name><operator>/</operator><name>lite</name><operator>/</operator><name><name>LiteWorkflowAppParser</name><operator>.</operator><name>java</name></name>  <operator>|</operator> <literal type="number">21</literal> <operator>++</operator><operator>+</operator><operator>--</operator>
 <name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>                               <operator>|</operator>  <literal type="number">1</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>hadoop</name><operator>/</operator><name><name>TestMapReduceActionExecutor</name><operator>.</operator><name>java</name></name>   <operator>|</operator> <literal type="number">81</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>+</operator><operator>--</operator><operator>--</operator>
 <literal type="number">3</literal> <name>files</name> <name>changed</name></expr><operator>,</operator> <expr><literal type="number">75</literal> <call><name>insertions</name><argument_list>(<argument><expr><operator>+</operator></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><literal type="number">28</literal> <call><name>deletions</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>workflow</name><operator>/</operator><name>lite</name><operator>/</operator><name><name>LiteWorkflowAppParser</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>workflow</name><operator>/</operator><name>lite</name><operator>/</operator><name><name>LiteWorkflowAppParser</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>e47e619b9</name><operator>..</operator><literal type="number">6cc2b833c</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>workflow</name><operator>/</operator><name>lite</name><operator>/</operator><name><name>LiteWorkflowAppParser</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>workflow</name><operator>/</operator><name>lite</name><operator>/</operator><name><name>LiteWorkflowAppParser</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">627</literal></expr><operator>,</operator><expr><literal type="number">21</literal> <operator>+</operator><literal type="number">627</literal></expr><operator>,</operator><expr><literal type="number">20</literal> @@ <specifier>public</specifier> <name>class</name> <name>LiteWorkflowAppParser</name> <block>{
                 }</block></expr></expr_stmt>
             }
             try <block>{<block_content>
                <decl_stmt><decl><type><name>XConfiguration</name></type> <name>actionConf</name></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Element</name></type> <name>actionConfiguration</name> <init>= <expr><call><name><name>eActionConf</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"configuration"</literal></expr></argument>, <argument><expr><name>actionNs</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <if_stmt><if>if <condition>(<expr><name>actionConfiguration</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><name>actionConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></if>
                <else>else <block>{<block_content>
                    <expr_stmt><expr><name>actionConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>actionConfiguration</name></expr></argument>)</argument_list></call>
                            <operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></else></if_stmt>
                <decl_stmt><decl><type><name>XConfiguration</name></type> <name>actionConf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
                <if_stmt><if>if <condition>(<expr><name>configDefault</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
                    <expr_stmt><expr><call><name><name>XConfiguration</name><operator>.</operator><name>copy</name></name><argument_list>(<argument><expr><name>configDefault</name></expr></argument>, <argument><expr><name>actionConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
                 <if_stmt><if>if <condition>(<expr><name>globalConfiguration</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                     <decl_stmt><decl><type><name>Configuration</name></type> <name>globalConf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(
                             <argument><expr><name>globalConfiguration</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                    <expr_stmt><expr><call><name><name>XConfiguration</name><operator>.</operator><name>injectDefaults</name></name><argument_list>(<argument><expr><name>globalConf</name></expr></argument>, <argument><expr><name>actionConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                    <expr_stmt><expr><call><name><name>XConfiguration</name><operator>.</operator><name>copy</name></name><argument_list>(<argument><expr><name>globalConf</name></expr></argument>, <argument><expr><name>actionConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></if></if_stmt>
                <decl_stmt><decl><type><name>Element</name></type> <name>actionConfiguration</name> <init>= <expr><call><name><name>eActionConf</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"configuration"</literal></expr></argument>, <argument><expr><name>actionNs</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <if_stmt><if>if <condition>(<expr><name>actionConfiguration</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <comment type="line">//copy and override</comment>
                    <expr_stmt><expr><call><name><name>XConfiguration</name><operator>.</operator><name>copy</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(
                            <argument><expr><name>actionConfiguration</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>actionConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 </block_content>}</block></if></if_stmt>
                <expr_stmt><expr><call><name><name>XConfiguration</name><operator>.</operator><name>injectDefaults</name></name><argument_list>(<argument><expr><name>configDefault</name></expr></argument>, <argument><expr><name>actionConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 <decl_stmt><decl><type><name>int</name></type> <name>position</name> <init>= <expr><call><name><name>eActionConf</name><operator>.</operator><name>indexOf</name></name><argument_list>(<argument><expr><name>actionConfiguration</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                 <expr_stmt><expr><call><name><name>eActionConf</name><operator>.</operator><name>removeContent</name></name><argument_list>(<argument><expr><name>actionConfiguration</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="line">//replace with enhanced one</comment>
                 <decl_stmt><decl><type><name>Element</name></type> <name>eConfXml</name> <init>= <expr><call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>actionConf</name><operator>.</operator><name>toXmlString</name></name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name> <name>b</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
<name>index</name> <literal type="number">6ec2bcb01</literal><operator>..</operator><literal type="number">869931427</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
@@ <operator>-</operator><literal type="number">5</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">5</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>OOZIE</name><operator>-</operator><literal type="number">1943</literal> <name>Bump</name> <name>up</name> <name>trunk</name> <name>to</name> <literal type="number">4.2.0</literal><operator>-</operator><call><name>SNAPSHOT</name> <argument_list>(<argument><expr><name>bzhang</name></expr></argument>)</argument_list></call>
 
 <operator>--</operator> <name>Oozie</name> <literal type="number">4.1.0</literal> <call><name>release</name> <argument_list>(<argument><expr><literal type="number">4.1</literal> <operator>-</operator> <name>unreleased</name></expr></argument>)</argument_list></call>
 
<name>OOZIE</name><operator>-</operator><literal type="number">1944</literal> <name>Recursive</name> <name>variable</name> <name>resolution</name> <name>broken</name> <name>when</name> <name>same</name> <name>parameter</name> <name>name</name> <name>in</name> <name>config</name><operator>-</operator>default <name>and</name> <name>action</name> <call><name>conf</name> <argument_list>(<argument><expr><name>mona</name></expr></argument>)</argument_list></call>
 <name>OOZIE</name><operator>-</operator><literal type="number">1906</literal> <name>Service</name> <name>to</name> <name>periodically</name> <name>remove</name> <name>ZK</name> <call><name>lock</name> <argument_list>(<argument><expr><name>puru</name> <name>via</name> <name>rohini</name></expr></argument>)</argument_list></call>
 <name>OOZIE</name><operator>-</operator><literal type="number">1812</literal> <name>Bulk</name> <name>API</name> <name>with</name> <name>bundle</name> <name>Id</name> <name>should</name> <name>relax</name> <name>regex</name> <name>check</name></expr></expr_stmt> <for>for Id <control>(<init><expr><name>puru</name> <name>via</name> <name>rohini</name></expr></init>)</control><block type="pseudo"><block_content>
 <expr_stmt><expr><name>OOZIE</name><operator>-</operator><literal type="number">1915</literal> <name>Move</name> <name>system</name> <name>properties</name> <name>to</name> <name>conf</name> <call><name>properties</name> <argument_list>(<argument><expr><name>puru</name> <name>via</name> <name>rohini</name></expr></argument>)</argument_list></call>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>sharelib</name><operator>/</operator><name>streaming</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>action</name><operator>/</operator><name>hadoop</name><operator>/</operator><name><name>TestMapReduceActionExecutor</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>sharelib</name><operator>/</operator><name>streaming</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>action</name><operator>/</operator><name>hadoop</name><operator>/</operator><name><name>TestMapReduceActionExecutor</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">7e60289de</literal><operator>..</operator><name>e78c98a3b</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>sharelib</name><operator>/</operator><name>streaming</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>action</name><operator>/</operator><name>hadoop</name><operator>/</operator><name><name>TestMapReduceActionExecutor</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>sharelib</name><operator>/</operator><name>streaming</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>action</name><operator>/</operator><name>hadoop</name><operator>/</operator><name><name>TestMapReduceActionExecutor</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">80</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">80</literal></expr><operator>,</operator><expr><literal type="number">15</literal> @@ <specifier>public</specifier> <name>class</name> <name>TestMapReduceActionExecutor</name> extends <name>ActionExecutorTestCase</name> <block>{
     }</block>
 
     <specifier>public</specifier> <name>void</name> <call><name>testConfigDefaultPropsToAction</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
        <expr><name>String</name> <name>actionXml</name> <operator>=</operator> <literal type="string">"&lt;map-reduce&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;prepare&gt;"</literal>
                <operator>+</operator> <literal type="string">"          &lt;delete path=\"${nameNode}/user/${wf:user()}/mr/${outputDir}\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;/prepare&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;configuration&gt;"</literal>
                <operator>+</operator> <literal type="string">"          &lt;property&gt;&lt;name&gt;bb&lt;/name&gt;&lt;value&gt;BB&lt;/value&gt;&lt;/property&gt;"</literal>
                <operator>+</operator> <literal type="string">"          &lt;property&gt;&lt;name&gt;cc&lt;/name&gt;&lt;value&gt;from_action&lt;/value&gt;&lt;/property&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;/configuration&gt;"</literal>
                <operator>+</operator> <literal type="string">"      &lt;/map-reduce&gt;"</literal></expr></block></expr></argument></throws></expr>;</expr_stmt></block_content></block></for>
         <decl_stmt><decl><type><name>String</name></type> <name>wfXml</name> <init>= <expr><literal type="string">"&lt;workflow-app xmlns=\"uri:oozie:workflow:0.5\" name=\"map-reduce-wf\"&gt;"</literal>
         <operator>+</operator> <literal type="string">"&lt;global&gt;"</literal>
         <operator>+</operator> <literal type="string">"&lt;job-tracker&gt;${jobTracker}&lt;/job-tracker&gt;"</literal>
@@ <operator>-</operator><literal type="number">88</literal></expr></init></decl>,15 +97,7 @@ public <decl><type ref="prev"/><name>class</name> <name>TestMapReduceActionExecutor</name> extends <name>ActionExecutorTestCase</name> <block>{<block_content>
         <expr_stmt><expr><operator>+</operator> <literal type="string">"&lt;/global&gt;"</literal>
         <operator>+</operator> <literal type="string">"    &lt;start to=\"mr-node\"/&gt;"</literal>
         <operator>+</operator> <literal type="string">"    &lt;action name=\"mr-node\"&gt;"</literal>
        <operator>+</operator> <literal type="string">"      &lt;map-reduce&gt;"</literal>
        <operator>+</operator> <literal type="string">"        &lt;prepare&gt;"</literal>
        <operator>+</operator> <literal type="string">"          &lt;delete path=\"${nameNode}/user/${wf:user()}/mr/${outputDir}\"/&gt;"</literal>
        <operator>+</operator> <literal type="string">"        &lt;/prepare&gt;"</literal>
        <operator>+</operator> <literal type="string">"        &lt;configuration&gt;"</literal>
        <operator>+</operator> <literal type="string">"          &lt;property&gt;&lt;name&gt;bb&lt;/name&gt;&lt;value&gt;BB&lt;/value&gt;&lt;/property&gt;"</literal>
        <operator>+</operator> <literal type="string">"          &lt;property&gt;&lt;name&gt;cc&lt;/name&gt;&lt;value&gt;from_action&lt;/value&gt;&lt;/property&gt;"</literal>
        <operator>+</operator> <literal type="string">"        &lt;/configuration&gt;"</literal>
        <operator>+</operator> <literal type="string">"      &lt;/map-reduce&gt;"</literal>
        <operator>+</operator> <name>actionXml</name>
         <operator>+</operator> <literal type="string">"    &lt;ok to=\"end\"/&gt;"</literal>
         <operator>+</operator> <literal type="string">"    &lt;error to=\"fail\"/&gt;"</literal>
         <operator>+</operator> <literal type="string">"&lt;/action&gt;"</literal>
@@ <operator>-</operator><literal type="number">118</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">119</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TestMapReduceActionExecutor</name> extends <name>ActionExecutorTestCase</name> <block>{
 
         <expr><name>OutputStream</name> <name>os</name> <operator>=</operator> <operator>new</operator> <call><name>FileOutputStream</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">"/config-default.xml"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><name>XConfiguration</name> <name>defaultConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr>;
        <expr><call><name><name>defaultConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"outputDir"</literal></expr></argument>, <argument><expr><literal type="string">"output-data-dir"</literal></expr></argument>)</argument_list></call></expr>;
        <expr><call><name><name>defaultConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"outputDir"</literal></expr></argument>, <argument><expr><literal type="string">"default-output-dir"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>defaultConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"mapred.mapper.class"</literal></expr></argument>, <argument><expr><literal type="string">"MM"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>defaultConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"mapred.reducer.class"</literal></expr></argument>, <argument><expr><literal type="string">"RR"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>defaultConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"cc"</literal></expr></argument>, <argument><expr><literal type="string">"from_default"</literal></expr></argument>)</argument_list></call></expr>;
@@ <expr><operator>-</operator><literal type="number">133</literal></expr>,<expr><literal type="number">18</literal> <operator>+</operator><literal type="number">134</literal></expr>,<expr><literal type="number">16</literal> @@ <specifier>public</specifier> <name>class</name> <name>TestMapReduceActionExecutor</name> extends <name>ActionExecutorTestCase</name> <block>{
                 <expr><name>wfId</name> <operator>+</operator> <literal type="string">"@mr-node"</literal></expr>)</block></expr>;
 
         <comment type="line">// check NN and JT settings</comment>
        <expr><name>Element</name> <name>eConf</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>mrAction</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>eConf</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"name-node"</literal></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>Element</name> <name>eAction</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>mrAction</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>Element</name> <name>eConf</name> <operator>=</operator> <call><name><name>eAction</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"name-node"</literal></expr></argument>, <argument><expr><call><name><name>eAction</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name>getNameNodeUri</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getText</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>mrAction</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>eConf</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"job-tracker"</literal></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>eAction</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"job-tracker"</literal></expr></argument>, <argument><expr><call><name><name>eAction</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name>getJobTrackerUri</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getText</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
 
         <comment type="line">// check other m-r settings</comment>
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>mrAction</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>eConf</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"configuration"</literal></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>eConf</name> <operator>=</operator> <call><name><name>eAction</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"configuration"</literal></expr></argument>, <argument><expr><call><name><name>eAction</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><name>Configuration</name> <name>actionConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>eConf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"output-data-dir"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"outputDir"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"default-output-dir"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"outputDir"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"MM"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"mapred.mapper.class"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"RR"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"mapred.reducer.class"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <comment type="line">// check that default did not overwrite same property explicit in action conf</comment>
@@ <expr><operator>-</operator><literal type="number">153</literal></expr>,<expr><literal type="number">6</literal> <operator>+</operator><literal type="number">152</literal></expr>,<expr><literal type="number">54</literal> @@ <specifier>public</specifier> <name>class</name> <name>TestMapReduceActionExecutor</name> extends <name>ActionExecutorTestCase</name> <block>{
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"AA"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"aa"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"BB"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"bb"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
 
        <comment type="line">//test no infinite recursion by param referring to itself e.g. path = ${path}/sub-path</comment>
        <expr><name>actionXml</name> <operator>=</operator> <literal type="string">"&lt;map-reduce&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;prepare&gt;"</literal>
                <operator>+</operator> <literal type="string">"          &lt;delete path=\"${nameNode}/user/${wf:user()}/mr/${outputDir}\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;/prepare&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;configuration&gt;"</literal>
                <operator>+</operator> <literal type="string">"          &lt;property&gt;&lt;name&gt;cc&lt;/name&gt;&lt;value&gt;${cc}/action_cc&lt;/value&gt;&lt;/property&gt;"</literal>
                <operator>+</operator> <literal type="string">"        &lt;/configuration&gt;"</literal>
                <operator>+</operator> <literal type="string">"      &lt;/map-reduce&gt;"</literal></expr>;

        <expr><name>wfXml</name> <operator>=</operator> <literal type="string">"&lt;workflow-app xmlns=\"uri:oozie:workflow:0.5\" name=\"map-reduce-wf\"&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;global&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;job-tracker&gt;${jobTracker}&lt;/job-tracker&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;name-node&gt;${nameNode}&lt;/name-node&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;configuration&gt;&lt;property&gt;&lt;name&gt;outputDir&lt;/name&gt;&lt;value&gt;global-output-dir&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;/global&gt;"</literal>
                <operator>+</operator> <literal type="string">"    &lt;start to=\"mr-node\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"    &lt;action name=\"mr-node\"&gt;"</literal>
                <operator>+</operator> <name>actionXml</name>
                <operator>+</operator> <literal type="string">"    &lt;ok to=\"end\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"    &lt;error to=\"fail\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;/action&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;kill name=\"fail\"&gt;"</literal>
                <operator>+</operator> <literal type="string">"    &lt;message&gt;Map/Reduce failed, error message[${wf:errorMessage(wf:lastErrorNode())}]&lt;/message&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;/kill&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;end name=\"end\"/&gt;"</literal>
                <operator>+</operator> <literal type="string">"&lt;/workflow-app&gt;"</literal></expr>;

         <expr><name>writer</name> <operator>=</operator> <operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">"/workflow.xml"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>IOUtils</name><operator>.</operator><name>copyCharStream</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><name>wfXml</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>writer</name></expr></argument>)</argument_list></call></expr>;

         <expr><name>wfId</name> <operator>=</operator> <operator>new</operator> <call><name>SubmitXCommand</name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;
         <expr><operator>new</operator> <call><name>StartXCommand</name><argument_list>(<argument><expr><name>wfId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;
         <expr><call><name>sleep</name><argument_list>(<argument><expr><literal type="number">3000</literal></expr></argument>)</argument_list></call></expr>;

         <expr><name>mrAction</name> <operator>=</operator> <call><name><name>WorkflowActionQueryExecutor</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>WorkflowActionQuery</name><operator>.</operator><name>GET_ACTION</name></name></expr></argument>,
                 <argument><expr><name>wfId</name> <operator>+</operator> <literal type="string">"@mr-node"</literal></expr></argument>)</argument_list></call></expr>;

         <comment type="line">// check param</comment>
         <expr><name>eAction</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>mrAction</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><name>eConf</name> <operator>=</operator> <call><name><name>eAction</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"configuration"</literal></expr></argument>, <argument><expr><call><name><name>eAction</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><name>actionConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>eConf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <comment type="line">// action param referring to same param name given in defaults cc = ${cc}/action_cc</comment>
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"from_default/action_cc"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"cc"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <comment type="line">// check global is retained and has precedence over config-default</comment>
         <expr><name>eConf</name> <operator>=</operator> <call><name><name>eAction</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"name-node"</literal></expr></argument>, <argument><expr><call><name><name>eAction</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name>getNameNodeUri</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>eConf</name><operator>.</operator><name>getText</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"global-output-dir"</literal></expr></argument>, <argument><expr><call><name><name>actionConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"outputDir"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
     }</block>
 
     @<call><name>SuppressWarnings</name><argument_list>(<argument><expr><literal type="string">"unchecked"</literal></expr></argument>)</argument_list></call>
<operator>-</operator> 
<literal type="number">2.19.1.windows</literal><literal type="number">.1</literal></expr></block></expr></expr_stmt></block_content></block></decl></decl_stmt></block_content></block>

</unit>
