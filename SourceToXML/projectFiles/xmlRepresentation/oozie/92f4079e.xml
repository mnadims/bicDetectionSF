<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/oozie/92f4079e.java"><expr_stmt><expr><name>From</name> <literal type="number">92f4079e54a1fad847ca6721f5ef6b72a625a6b2</literal> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>Robert</name> <name><name>Kanter</name> <argument_list type="generic">&lt;<argument><name>rkanter</name><annotation>@<name><name>cloudera</name><operator>.</operator><name>com</name></name></annotation></argument>&gt;</argument_list></name>
<name>Date</name><operator>:</operator> <name>Mon</name></expr><operator>,</operator> <expr><literal type="number">30</literal> <name>Jun</name> <literal type="number">2014</literal> <literal type="number">09</literal><operator>:</operator><literal type="number">06</literal><operator>:</operator><literal type="number">38</literal> <operator>-</operator><literal type="number">0700</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>OOZIE</name><operator>-</operator><literal type="number">1907</literal> <name>DB</name> <name>upgrade</name> <name>from</name> <literal type="number">3.3.0</literal> <name>to</name> <name>trunk</name> <name>fails</name> <name>on</name> <call><name>derby</name>
 <argument_list>(<argument><expr><name>rkanter</name></expr></argument>)</argument_list></call>

<operator>--</operator>
 <name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>                               <operator>|</operator>  <literal type="number">1</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>tools</name><operator>/</operator><name><name>OozieDBCLI</name><operator>.</operator><name>java</name></name>    <operator>|</operator> <literal type="number">20</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>+</operator><operator>--</operator><operator>--</operator><operator>--</operator>
 <literal type="number">2</literal> <name>files</name> <name>changed</name></expr><operator>,</operator> <expr><literal type="number">15</literal> <call><name>insertions</name><argument_list>(<argument><expr><operator>+</operator></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><literal type="number">6</literal> <call><name>deletions</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name> <name>b</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
<name>index</name> <literal type="number">45b241479</literal><operator>..</operator><name>dbfad8ee0</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>
@@ <operator>-</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">5</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
 <operator>--</operator> <name>Oozie</name> <literal type="number">4.1.0</literal> <call><name>release</name> <argument_list>(<argument><expr><name>trunk</name> <operator>-</operator> <name>unreleased</name></expr></argument>)</argument_list></call>
 
<name>OOZIE</name><operator>-</operator><literal type="number">1907</literal> <name>DB</name> <name>upgrade</name> <name>from</name> <literal type="number">3.3.0</literal> <name>to</name> <name>trunk</name> <name>fails</name> <name>on</name> <call><name>derby</name> <argument_list>(<argument><expr><name>rkanter</name></expr></argument>)</argument_list></call>
 <name>OOZIE</name><operator>-</operator><literal type="number">1877</literal> <name>Setting</name> <name>to</name> <name>fail</name> <name>oozie</name> <name>server</name> <name>startup</name> <name>in</name></expr></expr_stmt> <case>case <expr><name>of</name> <name>sharelib</name> <call><name>misconfiguration</name> <argument_list>(<argument><expr><name>puru</name> <name>via</name> <name>rohini</name></expr></argument>)</argument_list></call>
 <name>OOZIE</name><operator>-</operator><literal type="number">1388</literal> <name>Add</name> <name>a</name> <name>admin</name> <name>servlet</name> <name>to</name> <name>show</name> <name>thread</name> <name>stack</name> <name>trace</name> <name>and</name> <name>CPU</name> <name>usage</name> <name>per</name> <call><name>thread</name> <argument_list>(<argument><expr><name>rohini</name></expr></argument>)</argument_list></call>
 <name>OOZIE</name><operator>-</operator><literal type="number">1893</literal> <name>Recovery</name> <name>service</name> <name>will</name> <name>never</name> <name>recover</name> <name>bundle</name> <name>action</name></expr> <if_stmt><if>if CoordSubmitXCommand command is lost <condition>(<expr><name>puru</name> <name>via</name> <name>rohini</name></expr>)</condition><block type="pseudo"><block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>tools</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>tools</name><operator>/</operator><name><name>OozieDBCLI</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>tools</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>tools</name><operator>/</operator><name><name>OozieDBCLI</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">0733e6f3b</literal><operator>..</operator><literal type="number">556cbe5d5</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>tools</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>tools</name><operator>/</operator><name><name>OozieDBCLI</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>tools</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>tools</name><operator>/</operator><name><name>OozieDBCLI</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">570</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">570</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieDBCLI</name> <block>{
                         <expr><operator>&amp;&amp;</operator> <call><name><name>tableName</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"COORD_ACTIONS"</literal></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>column</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"push_missing_dependencies"</literal></expr></argument>)</argument_list></call></expr>) <block>{
                     <comment type="line">// The push_missing_depdencies column was added in DB_VERSION_FOR_4_0 as TEXT and we're going to convert it to</comment>
                     <comment type="line">// BYTEA in DB_VERSION_FOR_5_0.  However, if Oozie 5 did the upgrade from DB_VERSION_PRE_4_0 to</comment>
                    <comment type="line">// DB_VERSION_FOR_4_0 (and is now doing it for DB_VERSION_FOR_5_0 push_missing_depdencies will already be a</comment>
                    <comment type="line">// DB_VERSION_FOR_4_0 (and is now doing it for DB_VERSION_FOR_5_0) push_missing_depdencies will already be a</comment>
                     <comment type="line">// BYTEA because Oozie 5 created the column instead of Oozie 4; and the update query below will fail.</comment>
                     <continue>continue;</continue>
                 }</block>
@@ <operator>-</operator><literal type="number">598</literal><operator>,</operator><literal type="number">7</literal> <operator>+</operator><literal type="number">598</literal><operator>,</operator><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieDBCLI</name> <block>{
         <expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><literal type="string">"DONE"</literal></expr></argument>)</argument_list></call></expr>;
     }</block>
 
    <specifier>private</specifier> <name>void</name> <call><name>convertClobToBlobinDerby</name><argument_list>(<argument><expr><name>Connection</name> <name>conn</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><specifier>private</specifier> <name>void</name> <call><name>convertClobToBlobinDerby</name><argument_list>(<argument><expr><name>Connection</name> <name>conn</name></expr></argument>, <argument><expr><name>String</name> <name>startingVersion</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws> <throws>throws <argument><expr><name>Exception</name> <block>{</block></expr></argument></throws></block></expr></expr_stmt></block_content></block></if></if_stmt>
         <if_stmt><if>if <condition>(<expr><name>conn</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
             <return>return;</return>
         </block_content>}</block></if></if_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">612</literal></expr><operator>,</operator><expr><literal type="number">13</literal> <operator>+</operator><literal type="number">612</literal></expr><operator>,</operator><expr><literal type="number">21</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieDBCLI</name> <block>{
             }</block>
             <name>ResultSet</name> <name>rs</name> <operator>=</operator> <call><name><name>statement</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><call><name>getSelectQuery</name><argument_list>(<argument><expr><name>tableName</name></expr></argument>, <argument><expr><name>columnNames</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <while>while <condition>(<expr><call><name><name>rs</name><operator>.</operator><name>next</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
                <for>for <control>(<init><decl><type><name>int</name></type> <name>i</name> <init>= <expr><literal type="number">0</literal></expr></init></decl>;</init> <condition><expr><name>i</name> <operator>&lt;</operator> <call><name><name>columnNames</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call></expr>;</condition> <incr><expr><name>i</name><operator>++</operator></expr></incr>)</control> <block>{<block_content>
                    <decl_stmt><decl><type><name>Clob</name></type> <name>confClob</name> <init>= <expr><call><name><name>rs</name><operator>.</operator><name>getClob</name></name><argument_list>(<argument><expr><call><name><name>columnNames</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>i</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <for>for <control>(<init><decl><type><name>String</name></type> <name>column</name> <range>: <expr><name>columnNames</name></expr></range></decl></init>)</control> <block>{<block_content>
                    <if_stmt><if>if <condition>(<expr><call><name><name>startingVersion</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name>DB_VERSION_PRE_4_0</name></expr></argument>)</argument_list></call>
                            <operator>&amp;&amp;</operator> <call><name><name>tableName</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"COORD_ACTIONS"</literal></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>column</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"push_missing_dependencies"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                        <comment type="line">// The push_missing_depdencies column was added in DB_VERSION_FOR_4_0 as a CLOB and we're going to convert</comment>
                        <comment type="line">// it to BLOB in DB_VERSION_FOR_5_0.  However, if Oozie 5 did the upgrade from DB_VERSION_PRE_4_0 to</comment>
                        <comment type="line">// DB_VERSION_FOR_4_0 (and is now doing it for DB_VERSION_FOR_5_0) push_missing_depdencies will already be a</comment>
                        <comment type="line">// BLOB because Oozie 5 created the column instead of Oozie 4; and the update query below will fail.</comment>
                        <continue>continue;</continue>
                    </block_content>}</block></if></if_stmt>
                    <decl_stmt><decl><type><name>Clob</name></type> <name>confClob</name> <init>= <expr><call><name><name>rs</name><operator>.</operator><name>getClob</name></name><argument_list>(<argument><expr><name>column</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                     <if_stmt><if>if <condition>(<expr><name>confClob</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                         <continue>continue;</continue>
                     </block_content>}</block></if></if_stmt>
                     <decl_stmt><decl><type><name>PreparedStatement</name></type> <name>ps</name> <init>= <expr><call><name><name>conn</name><operator>.</operator><name>prepareStatement</name></name><argument_list>(<argument><expr><literal type="string">"update "</literal> <operator>+</operator> <name>tableName</name> <operator>+</operator> <literal type="string">" set "</literal> <operator>+</operator> <name>TEMP_COLUMN_PREFIX</name>
                            <operator>+</operator> <call><name><name>columnNames</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>i</name></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">"=? where id = ?"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                            <expr_stmt><expr><operator>+</operator> <name>column</name> <operator>+</operator> <literal type="string">"=? where id = ?"</literal></expr></expr_stmt>)</block_content></block><empty_stmt>;</empty_stmt></for>
                     <decl_stmt><decl><type><name><name>byte</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>IOUtils</name><operator>.</operator><name>toByteArray</name></name><argument_list>(<argument><expr><call><name><name>confClob</name><operator>.</operator><name>getCharacterStream</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"UTF-8"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                     <expr_stmt><expr><call><name><name>ps</name><operator>.</operator><name>setBinaryStream</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><operator>new</operator> <call><name>ByteArrayInputStream</name><argument_list>(<argument><expr><name>data</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>data</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                     <expr_stmt><expr><call><name><name>ps</name><operator>.</operator><name>setString</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><call><name><name>rs</name><operator>.</operator><name>getString</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">676</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">684</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieDBCLI</name> <block>{
             <expr><call><name>convertClobToBlobInPostgres</name><argument_list>(<argument><expr><name>sqlFile</name></expr></argument>, <argument><expr><name>conn</name></expr></argument>, <argument><expr><name>startingVersion</name></expr></argument>)</argument_list></call></expr>;
         }</block></expr></expr_stmt>
         <if_stmt><if type="elseif">else if <condition>(<expr><call><name><name>dbVendor</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"derby"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name>convertClobToBlobinDerby</name><argument_list>(<argument><expr><name>conn</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>convertClobToBlobinDerby</name><argument_list>(<argument><expr><name>conn</name></expr></argument>, <argument><expr><name>startingVersion</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         </block_content>}</block></if></if_stmt>
         <expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><literal type="string">"Dropping discriminator column"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <decl_stmt><decl><type><name>PrintWriter</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>PrintWriter</name><argument_list>(<argument><expr><operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><name>sqlFile</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
<expr_stmt><expr><operator>-</operator> 
<literal type="number">2.19.1.windows</literal><literal type="number">.1</literal></expr></expr_stmt></block_content></block></for></block_content></block></while></case>

</unit>
