<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/oozie/cc4b4398.java"><expr_stmt><expr><name>From</name> <name>cc4b4398f279777662ed59f7cde7abb50c12ccb2</name> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>Rohini</name> <name>Palaniswamy</name> <operator>&lt;</operator><name>rohinip</name>@<name>yahoo</name><operator>-</operator><name><name>inc</name><operator>.</operator><name>com</name></name><operator>&gt;</operator>
<name>Date</name><operator>:</operator> <name>Wed</name></expr><operator>,</operator> <expr><literal type="number">16</literal> <name>Apr</name> <literal type="number">2014</literal> <literal type="number">10</literal><operator>:</operator><literal type="number">15</literal><operator>:</operator><literal type="number">18</literal> <operator>-</operator><literal type="number">0700</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>OOZIE</name><operator>-</operator><literal type="number">1769</literal> <name>An</name> <name>option</name> <name>to</name> <name>update</name> <name>coord</name> <name>properties</name><operator>/</operator><call><name>definition</name>
 <argument_list>(<argument><expr><name>puru</name> <name>via</name> <name>rohini</name></expr></argument>)</argument_list></call>

<operator>--</operator>
 <operator>...</operator><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>cli</name><operator>/</operator><name><name>OozieCLI</name><operator>.</operator><name>java</name></name>   <operator>|</operator>  <literal type="number">37</literal> <operator>++</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name><name>OozieClient</name><operator>.</operator><name>java</name></name>  <operator>|</operator>  <literal type="number">67</literal> <operator>++</operator><operator>++</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name>rest</name><operator>/</operator><name><name>JsonTags</name><operator>.</operator><name>java</name></name>    <operator>|</operator>   <literal type="number">2</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name>rest</name><operator>/</operator><name><name>RestConstants</name><operator>.</operator><name>java</name></name>      <operator>|</operator>   <literal type="number">4</literal> <operator>+</operator>
 <name>core</name><operator>/</operator><name><name>pom</name><operator>.</operator><name>xml</name></name>                                  <operator>|</operator>  <literal type="number">10</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorEngine</name><operator>.</operator><name>java</name></name>   <operator>|</operator>  <literal type="number">22</literal> <operator>++</operator>
 <operator>...</operator><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorJobBean</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">2</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>ErrorCode</name><operator>.</operator><name>java</name></name> <operator>|</operator>   <literal type="number">2</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordSubmitXCommand</name><operator>.</operator><name>java</name></name>    <operator>|</operator> <literal type="number">103</literal> <operator>++</operator><operator>+</operator><operator>--</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordUpdateXCommand</name><operator>.</operator><name>java</name></name>    <operator>|</operator> <literal type="number">269</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator>
 <operator>...</operator><operator>/</operator><name>executor</name><operator>/</operator><name>jpa</name><operator>/</operator><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>java</name></name>   <operator>|</operator>   <literal type="number">1</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>BaseJobServlet</name><operator>.</operator><name>java</name></name>  <operator>|</operator>  <literal type="number">20</literal> <operator>++</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V0JobServlet</name><operator>.</operator><name>java</name></name>    <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V1JobServlet</name><operator>.</operator><name>java</name></name>    <operator>|</operator>   <literal type="number">9</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V2JobServlet</name><operator>.</operator><name>java</name></name>    <operator>|</operator>  <literal type="number">44</literal> <operator>++</operator><operator>+</operator>
 <operator>...</operator><operator>/</operator><name>coord</name><operator>/</operator><name><name>TestCoordUpdateXCommand</name><operator>.</operator><name>java</name></name>        <operator>|</operator> <literal type="number">297</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator><operator>++</operator>
 <name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>coord</name><operator>-</operator><name>update</name><operator>-</operator><name><name>test</name><operator>.</operator><name>xml</name></name> <operator>|</operator>  <literal type="number">59</literal> <operator>++</operator><operator>++</operator>
 <name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>DG_CommandLineTool</name><operator>.</operator><name>twiki</name></name>  <operator>|</operator>  <literal type="number">54</literal> <operator>++</operator><operator>++</operator>
 <name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>WebServicesAPI</name><operator>.</operator><name>twiki</name></name>      <operator>|</operator>  <literal type="number">32</literal> <operator>+</operator><operator>-</operator>
 <name><name>pom</name><operator>.</operator><name>xml</name></name>                                       <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator>
 <name>release</name><operator>-</operator><name><name>log</name><operator>.</operator><name>txt</name></name>                               <operator>|</operator>   <literal type="number">1</literal> <operator>+</operator>
 <literal type="number">21</literal> <name>files</name> <name>changed</name></expr><operator>,</operator> <expr><literal type="number">1002</literal> <call><name>insertions</name><argument_list>(<argument><expr><operator>+</operator></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><literal type="number">45</literal> <call><name>deletions</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>TestCoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>coord</name><operator>-</operator><name>update</name><operator>-</operator><name><name>test</name><operator>.</operator><name>xml</name></name>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>cli</name><operator>/</operator><name><name>OozieCLI</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>cli</name><operator>/</operator><name><name>OozieCLI</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>e3eb3b06d</name><operator>..</operator><name>c31c8eef3</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>cli</name><operator>/</operator><name><name>OozieCLI</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>cli</name><operator>/</operator><name><name>OozieCLI</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">115</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">115</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
     <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>DEFINITION_OPTION</name> <operator>=</operator> <literal type="string">"definition"</literal></expr>;
     <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>CONFIG_CONTENT_OPTION</name> <operator>=</operator> <literal type="string">"configcontent"</literal></expr>;
     <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>SQOOP_COMMAND_OPTION</name> <operator>=</operator> <literal type="string">"command"</literal></expr>;
    <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>SHOWDIFF_OPTION</name> <operator>=</operator> <literal type="string">"diff"</literal></expr>;
    <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>UPDATE_OPTION</name> <operator>=</operator> <literal type="string">"update"</literal></expr>;
 
     <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>DO_AS_OPTION</name> <operator>=</operator> <literal type="string">"doas"</literal></expr>;
 
@@ <expr><operator>-</operator><literal type="number">275</literal></expr>,<expr><literal type="number">6</literal> <operator>+</operator><literal type="number">277</literal></expr>,<expr><literal type="number">9</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
                 <expr><literal type="string">"rerun a job  (coordinator requires -action or -date, bundle requires -coordinator or -date)"</literal></expr>)</block></expr>;
         <expr><name>Option</name> <name>dryrun</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>DRYRUN_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="string">"Dryrun a workflow (since 3.3.2) or coordinator (since 2.0) job without"</literal>
                 <operator>+</operator> <literal type="string">" actually executing it"</literal></expr></argument>)</argument_list></call></expr>;
        <expr><name>Option</name> <name>update</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>UPDATE_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"Update coord definition and properties"</literal></expr></argument>)</argument_list></call></expr>;
        <expr><name>Option</name> <name>showdiff</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>SHOWDIFF_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>,
                <argument><expr><literal type="string">"Show diff of the new coord definition and properties with the existing one (default true)"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><name>Option</name> <name>start</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>START_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"start a job"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><name>Option</name> <name>suspend</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>SUSPEND_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"suspend a job"</literal></expr></argument>)</argument_list></call></expr>;
         <expr><name>Option</name> <name>resume</name> <operator>=</operator> <operator>new</operator> <call><name>Option</name><argument_list>(<argument><expr><name>RESUME_OPTION</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"resume a job"</literal></expr></argument>)</argument_list></call></expr>;
@@ <expr><operator>-</operator><literal type="number">325</literal></expr>,<expr><literal type="number">6</literal> <operator>+</operator><literal type="number">330</literal></expr>,<expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>resume</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>kill</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>change</name></expr></argument>)</argument_list></call></expr>;
        <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>update</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>info</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>rerun</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>actions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>log</name></expr></argument>)</argument_list></call></expr>;
@@ <expr><operator>-</operator><literal type="number">353</literal></expr>,<expr><literal type="number">6</literal> <operator>+</operator><literal type="number">359</literal></expr>,<expr><literal type="number">12</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
         <expr><call><name><name>jobOptions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>getAllWorkflows</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name><name>jobOptions</name><operator>.</operator><name>addOptionGroup</name></name><argument_list>(<argument><expr><name>actions</name></expr></argument>)</argument_list></call></expr>;
         <expr><call><name>addAuthOptions</name><argument_list>(<argument><expr><name>jobOptions</name></expr></argument>)</argument_list></call></expr>;
        <expr><call><name><name>jobOptions</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>showdiff</name></expr></argument>)</argument_list></call></expr>;

        <comment type="line">//Needed to make dryrun and update mutually exclusive options</comment>
        <expr><name>OptionGroup</name> <name>updateOption</name> <operator>=</operator> <operator>new</operator> <call><name>OptionGroup</name><argument_list>()</argument_list></call></expr>;
        <expr><call><name><name>updateOption</name><operator>.</operator><name>addOption</name></name><argument_list>(<argument><expr><name>dryrun</name></expr></argument>)</argument_list></call></expr>;
        <expr><call><name><name>jobOptions</name><operator>.</operator><name>addOptionGroup</name></name><argument_list>(<argument><expr><name>updateOption</name></expr></argument>)</argument_list></call></expr>;
         <return>return <expr><name>jobOptions</name></expr>;</return></block></expr>
     }</block>
 
@@ <operator>-</operator><literal type="number">829</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">841</literal></expr>,<expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
             <if_stmt><if type="elseif">else if <condition>(<expr><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>START_OPTION</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                 <expr_stmt><expr><call><name><name>wc</name><operator>.</operator><name>start</name></name><argument_list>(<argument><expr><call><name><name>commandLine</name><operator>.</operator><name>getOptionValue</name></name><argument_list>(<argument><expr><name>START_OPTION</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt/></block_content></block></if></if_stmt>}</block></expr>
            <if_stmt><if type="elseif">else if <condition>(<expr><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>DRYRUN_OPTION</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <if_stmt><if type="elseif">else if <condition>(<expr><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>DRYRUN_OPTION</name></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <operator>!</operator><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>UPDATE_OPTION</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                 <decl_stmt><decl><type><name>String</name></type> <name>dryrunStr</name> <init>= <expr><call><name><name>wc</name><operator>.</operator><name>dryrun</name></name><argument_list>(<argument><expr><call><name>getConfiguration</name><argument_list>(<argument><expr><name>wc</name></expr></argument>, <argument><expr><name>commandLine</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                 <if_stmt><if>if <condition>(<expr><call><name><name>dryrunStr</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><literal type="string">"OK"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>  <comment type="line">// workflow</comment>
                     <expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><literal type="string">"OK"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1064</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">1076</literal></expr><operator>,</operator><expr><literal type="number">29</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieCLI</name> <block>{
                             <expr><operator>+</operator> <literal type="string">"] doesn't end with either C or W or B"</literal></expr>)</block></expr>;</expr_stmt>
                 <expr_stmt/></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt>}</block></expr></expr_stmt>
             }
            else <if_stmt><if>if <condition>(<expr><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>UPDATE_OPTION</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                <decl_stmt><decl><type><name>String</name></type> <name>coordJobId</name> <init>= <expr><call><name><name>commandLine</name><operator>.</operator><name>getOptionValue</name></name><argument_list>(<argument><expr><name>UPDATE_OPTION</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Properties</name></type> <name>conf</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>

                <decl_stmt><decl><type><name>String</name></type> <name>dryrun</name> <init>= <expr><literal type="string">""</literal></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>String</name></type> <name>showdiff</name> <init>= <expr><literal type="string">""</literal></expr></init></decl>;</decl_stmt>

                <if_stmt><if>if <condition>(<expr><call><name><name>commandLine</name><operator>.</operator><name>getOptionValue</name></name><argument_list>(<argument><expr><name>CONFIG_OPTION</name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><name>conf</name> <operator>=</operator> <call><name>getConfiguration</name><argument_list>(<argument><expr><name>wc</name></expr></argument>, <argument><expr><name>commandLine</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></if></if_stmt>
                <if_stmt><if>if <condition>(<expr><call><name><name>options</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><name>DRYRUN_OPTION</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><name>dryrun</name> <operator>=</operator> <literal type="string">"true"</literal></expr>;</expr_stmt>
                </block_content>}</block></if></if_stmt>
                <if_stmt><if>if <condition>(<expr><call><name><name>commandLine</name><operator>.</operator><name>getOptionValue</name></name><argument_list>(<argument><expr><name>SHOWDIFF_OPTION</name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><name>showdiff</name> <operator>=</operator> <call><name><name>commandLine</name><operator>.</operator><name>getOptionValue</name></name><argument_list>(<argument><expr><name>SHOWDIFF_OPTION</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></if></if_stmt>
                <if_stmt><if>if <condition>(<expr><name>conf</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>wc</name><operator>.</operator><name>updateCoord</name></name><argument_list>(<argument><expr><name>coordJobId</name></expr></argument>, <argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>showdiff</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></if>
                <else>else <block>{<block_content>
                    <expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>wc</name><operator>.</operator><name>updateCoord</name></name><argument_list>(<argument><expr><name>coordJobId</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>showdiff</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></else></if_stmt>
            </block_content>}</block></if></if_stmt>
         }
         catch <expr_stmt><expr><operator>(</operator><name>OozieClientException</name> <name>ex</name><operator>)</operator> <block>{
             <throw>throw <argument_list>new <argument><expr><call><name>OozieCLIException</name><argument_list>(<argument><expr><call><name><name>ex</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr></argument></argument_list></throw>;
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name><name>OozieClient</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name><name>OozieClient</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">40c956272</literal><operator>..</operator><literal type="number">129579a3b</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name><name>OozieClient</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>client</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>client</name><operator>/</operator><name><name>OozieClient</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">627</literal></expr>,<expr><literal type="number">6</literal> <operator>+</operator><literal type="number">627</literal></expr>,<expr><literal type="number">73</literal> @@ <specifier>public</specifier> <name>class</name> <name>OozieClient</name> <block>{
         }</block></expr>
     }</block>
 
    <comment type="block" format="javadoc">/**
     * Update coord definition.
     *
     * @param jobId the job id
     * @param conf the conf
     * @param dryrun the dryrun
     * @param showDiff the show diff
     * @return the string
     * @throws OozieClientException the oozie client exception
     */</comment>
    <specifier>public</specifier> <name>String</name> <call><name>updateCoord</name><argument_list>(<argument><expr><name>String</name> <name>jobId</name></expr></argument>, <argument><expr><name>Properties</name> <name>conf</name></expr></argument>, <argument><expr><name>String</name> <name>dryrun</name></expr></argument>, <argument><expr><name>String</name> <name>showDiff</name></expr></argument>)</argument_list></call>
            <throws>throws <argument><expr><name>OozieClientException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
        <return>return <expr><operator>(</operator><operator>new</operator> <call><name>UpdateCoord</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</return>
    }

    <comment type="block" format="javadoc">/**
     * Update coord definition without properties.
     *
     * @param jobId the job id
     * @param dryrun the dryrun
     * @param showDiff the show diff
     * @return the string
     * @throws OozieClientException the oozie client exception
     */</comment>
    public <function><type><name>String</name></type> <name>updateCoord</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>dryrun</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>showDiff</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>OozieClientException</name></expr></argument></throws> <block>{<block_content>
        <return>return <expr><operator>(</operator><operator>new</operator> <call><name>UpdateCoord</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</return>
    </block_content>}</block></function>

    <comment type="block" format="javadoc">/**
     * The Class UpdateCoord.
     */</comment>
    <class><specifier>private</specifier> class <name>UpdateCoord</name> <super_list><extends>extends <super><name><name>ClientCallable</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></super></extends></super_list> <block>{
        <decl_stmt><decl><type><specifier>private</specifier> <specifier>final</specifier> <name>Properties</name></type> <name>conf</name></decl>;</decl_stmt>

        <constructor><specifier>public</specifier> <name>UpdateCoord</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>, <parameter><decl><type><name>Properties</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>jobActionDryrun</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>showDiff</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><literal type="string">"PUT"</literal></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB</name></name></expr></argument>, <argument><expr><call><name>notEmpty</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><literal type="string">"jobId"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>prepareParams</name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>ACTION_PARAM</name></name></expr></argument>,
                    <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_COORD_UPDATE</name></name></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_DRYRUN</name></name></expr></argument>, <argument><expr><name>jobActionDryrun</name></expr></argument>,
                    <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_SHOWDIFF</name></name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><name><name>this</name><operator>.</operator><name>conf</name></name> <operator>=</operator> <name>conf</name></expr>;</expr_stmt>
        </block_content>}</block></constructor>

        <constructor><specifier>public</specifier> <name>UpdateCoord</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>jobActionDryrun</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>showDiff</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>this</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>Properties</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>jobActionDryrun</name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></constructor>

        <function><annotation>@<name>Override</name></annotation>
        <type><specifier>protected</specifier> <name>String</name></type> <name>call</name><parameter_list>(<parameter><decl><type><name>HttpURLConnection</name></type> <name>conn</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>OozieClientException</name></expr></argument></throws> <block>{<block_content>
            <expr_stmt><expr><call><name><name>conn</name><operator>.</operator><name>setRequestProperty</name></name><argument_list>(<argument><expr><literal type="string">"content-type"</literal></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>XML_CONTENT_TYPE</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>writeToXml</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><call><name><name>conn</name><operator>.</operator><name>getOutputStream</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt><if>if <condition>(<expr><call><name><name>conn</name><operator>.</operator><name>getResponseCode</name></name><argument_list>()</argument_list></call> <operator>==</operator> <name><name>HttpURLConnection</name><operator>.</operator><name>HTTP_OK</name></name></expr>)</condition> <block>{<block_content>
                <decl_stmt><decl><type><name>JSONObject</name></type> <name>json</name> <init>= <expr><operator>(</operator><name>JSONObject</name><operator>)</operator> <call><name><name>JSONValue</name><operator>.</operator><name>parse</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>InputStreamReader</name><argument_list>(<argument><expr><call><name><name>conn</name><operator>.</operator><name>getInputStream</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>JSONObject</name></type> <name>update</name> <init>= <expr><operator>(</operator><name>JSONObject</name><operator>)</operator> <call><name><name>json</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JsonTags</name><operator>.</operator><name>COORD_UPDATE</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <if_stmt><if>if <condition>(<expr><name>update</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
                    <return>return <expr><operator>(</operator><name>String</name><operator>)</operator> <call><name><name>update</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JsonTags</name><operator>.</operator><name>COORD_UPDATE_DIFF</name></name></expr></argument>)</argument_list></call></expr>;</return>
                </block_content>}</block></if>
                <else>else <block>{<block_content>
                    <return>return <expr><literal type="string">""</literal></expr>;</return>
                </block_content>}</block></else></if_stmt>
            </block_content>}</block></if></if_stmt>
            <if_stmt><if>if <condition>(<expr><call><name><name>conn</name><operator>.</operator><name>getResponseCode</name></name><argument_list>()</argument_list></call> <operator>!=</operator> <name><name>HttpURLConnection</name><operator>.</operator><name>HTTP_OK</name></name></expr>)</condition> <block>{<block_content>
                <expr_stmt><expr><call><name>handleError</name><argument_list>(<argument><expr><name>conn</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block></if></if_stmt>
            <return>return <expr><literal type="null">null</literal></expr>;</return>
        </block_content>}</block></function>
    }</block></class>

     <comment type="block" format="javadoc">/**
      * dryrun for a given job
      *
diff --git a/client/src/main/java/org/apache/oozie/client/rest/JsonTags.java b/client/src/main/java/org/apache/oozie/client/rest/JsonTags.java
index ae391c717..c79147496 100644
-- a/client/src/main/java/org/apache/oozie/client/rest/JsonTags.java
++ b/client/src/main/java/org/apache/oozie/client/rest/JsonTags.java
@@ -228,5 +228,7 @@ public interface JsonTags {
     public static final String JMS_TOPIC_PREFIX = "jmsTopicPrefix";
 
     public static final String JMS_TOPIC_NAME = "jmsTopicName";
    public static final String COORD_UPDATE = RestConstants.JOB_COORD_UPDATE;
    public static final String COORD_UPDATE_DIFF = "diff";
 
 }
diff --git a/client/src/main/java/org/apache/oozie/client/rest/RestConstants.java b/client/src/main/java/org/apache/oozie/client/rest/RestConstants.java
index a7fe06e3f..b0dd6cb52 100644
-- a/client/src/main/java/org/apache/oozie/client/rest/RestConstants.java
++ b/client/src/main/java/org/apache/oozie/client/rest/RestConstants.java
@@ -56,6 +56,8 @@ public interface RestConstants {
 
     public static final String JOB_ACTION_DRYRUN = "dryrun";
 
    public static final String JOB_ACTION_SHOWDIFF = "diff";

     public static final String JOB_ACTION_SUSPEND = "suspend";
 
     public static final String JOB_ACTION_RESUME = "resume";
@@ -70,6 +72,8 @@ public interface RestConstants {
 
     public static final String JOB_COORD_ACTION_RERUN = "coord-rerun";
 
    public static final String JOB_COORD_UPDATE = "update";

     public static final String JOB_BUNDLE_ACTION_RERUN = "bundle-rerun";
 
     public static final String JOB_SHOW_PARAM = "show";
diff --git a/core/pom.xml b/core/pom.xml
index f0547a386..c935dd744 100644
-- a/core/pom.xml
++ b/core/pom.xml
@@ -327,6 +327,16 @@
             &lt;artifactId&gt;collections-generic&lt;/artifactId&gt;
             &lt;scope&gt;compile&lt;/scope&gt;
         &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;
            &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
                    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
     &lt;/dependencies&gt;
 
     &lt;build&gt;
diff --git a/core/src/main/java/org/apache/oozie/CoordinatorEngine.java b/core/src/main/java/org/apache/oozie/CoordinatorEngine.java
index 6a17ce4a0..81d98bf80 100644
-- a/core/src/main/java/org/apache/oozie/CoordinatorEngine.java
++ b/core/src/main/java/org/apache/oozie/CoordinatorEngine.java
@@ -50,6 +50,7 @@ import org.apache.oozie.command.coord.CoordRerunXCommand;
 import org.apache.oozie.command.coord.CoordResumeXCommand;
 import org.apache.oozie.command.coord.CoordSubmitXCommand;
 import org.apache.oozie.command.coord.CoordSuspendXCommand;
import org.apache.oozie.command.coord.CoordUpdateXCommand;
 import org.apache.oozie.executor.jpa.JPAExecutorException;
 import org.apache.oozie.executor.jpa.WorkflowJobQueryExecutor;
 import org.apache.oozie.executor.jpa.WorkflowJobQueryExecutor.WorkflowJobQuery;
@@ -718,4 +719,25 @@ public class CoordinatorEngine extends BaseEngine {
         }
         return wfBeans;
     }

    /**
     * Update coord job definition.
     *
     * @param conf the conf
     * @param jobId the job id
     * @param dryrun the dryrun
     * @param showDiff the show diff
     * @return the string
     * @throws CoordinatorEngineException the coordinator engine exception
     */</comment>
    <function><type><specifier>public</specifier> <name>String</name></type> <name>updateJob</name><parameter_list>(<parameter><decl><type><name>Configuration</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>dryrun</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>showDiff</name></decl></parameter>)</parameter_list>
            <throws>throws <argument><expr><name>CoordinatorEngineException</name></expr></argument></throws> <block>{<block_content>
        <try>try <block>{<block_content>
            <decl_stmt><decl><type><name>CoordUpdateXCommand</name></type> <name>update</name> <init>= <expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <return>return <expr><call><name><name>update</name><operator>.</operator><name>call</name></name><argument_list>()</argument_list></call></expr>;</return>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>CommandException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CoordinatorEngineException</name><argument_list>(<argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></catch></try>
    </block_content>}</block></function>
 }
diff <expr_stmt><expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorJobBean</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorJobBean</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">5eb134b30</literal><operator>..</operator><literal type="number">4a2ea3943</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorJobBean</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>CoordinatorJobBean</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">51</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">51</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>json</name><operator>.</operator><name>simple</name><operator>.</operator><name>JSONObject</name></name>;</import>
 
 <annotation>@<name>Entity</name></annotation>
 <annotation>@<name>NamedQueries</name><argument_list>( <argument><expr><block>{
        <annotation>@<name>NamedQuery</name><argument_list>(<argument><expr><name>name</name> <operator>=</operator> <literal type="string">"UPDATE_COORD_JOB"</literal></expr></argument>, <argument><expr><name>query</name> <operator>=</operator> <literal type="string">"update CoordinatorJobBean w set w.appName = :appName, w.appPath = :appPath,w.concurrency = :concurrency, w.conf = :conf, w.externalId = :externalId, w.frequency = :frequency, w.lastActionNumber = :lastActionNumber, w.timeOut = :timeOut, w.timeZone = :timeZone, w.createdTimestamp = :createdTime, w.endTimestamp = :endTime, w.execution = :execution, w.jobXml = :jobXml, w.lastActionTimestamp = :lastAction, w.lastModifiedTimestamp = :lastModifiedTime, w.nextMaterializedTimestamp = :nextMaterializedTime, w.origJobXml = :origJobXml, w.slaXml=:slaXml, w.startTimestamp = :startTime, w.statusStr = :status, w.timeUnitStr = :timeUnit, w.appNamespace = :appNamespace, w.bundleId = :bundleId where w.id = :id"</literal></expr></argument>)</argument_list></annotation>,
        <argument><annotation>@<name>NamedQuery</name><argument_list>(<argument><expr><name>name</name> <operator>=</operator> <literal type="string">"UPDATE_COORD_JOB"</literal></expr></argument>, <argument><expr><name>query</name> <operator>=</operator> <literal type="string">"update CoordinatorJobBean w set w.appName = :appName, w.appPath = :appPath,w.concurrency = :concurrency, w.conf = :conf, w.externalId = :externalId, w.frequency = :frequency, w.lastActionNumber = :lastActionNumber, w.timeOut = :timeOut, w.timeZone = :timeZone, w.createdTimestamp = :createdTime, w.endTimestamp = :endTime, w.execution = :execution, w.jobXml = :jobXml, w.lastActionTimestamp = :lastAction, w.lastModifiedTimestamp = :lastModifiedTime, w.nextMaterializedTimestamp = :nextMaterializedTime, w.origJobXml = :origJobXml, w.slaXml=:slaXml, w.startTimestamp = :startTime, w.statusStr = :status, w.timeUnitStr = :timeUnit, w.appNamespace = :appNamespace, w.bundleId = :bundleId, w.matThrottling = :matThrottling  where w.id = :id"</literal></expr></argument>)</argument_list></annotation></argument>,
 
         <argument><annotation>@<name>NamedQuery</name><argument_list>(<argument><expr><name>name</name> <operator>=</operator> <literal type="string">"UPDATE_COORD_JOB_STATUS"</literal></expr></argument>, <argument><expr><name>query</name> <operator>=</operator> <literal type="string">"update CoordinatorJobBean w set w.statusStr =:status, w.lastModifiedTimestamp = :lastModifiedTime where w.id = :id"</literal></expr></argument>)</argument_list></annotation></argument>,
 
<argument><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>ErrorCode</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>ErrorCode</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>f69d7a24e</name><operator>..</operator><name>ee7292bd9</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>ErrorCode</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name><name>ErrorCode</name><operator>.</operator><name>java</name></name>
<annotation>@</annotation></expr></argument></block></expr></argument></argument_list></annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">203</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">203</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> enum <name>ErrorCode</name> <block>{
     <expr><call><name>E1020</name><argument_list>(<argument><expr><name><name>XLog</name><operator>.</operator><name>STD</name></name></expr></argument>, <argument><expr><literal type="string">"Could not kill coord job, this job either finished successfully or does not exist , [{0}]"</literal></expr></argument>)</argument_list></call></expr>,
     <expr><call><name>E1021</name><argument_list>(<argument><expr><name><name>XLog</name><operator>.</operator><name>STD</name></name></expr></argument>, <argument><expr><literal type="string">"Coord Action Input Check Error: {0}"</literal></expr></argument>)</argument_list></call></expr>,
     <expr><call><name>E1022</name><argument_list>(<argument><expr><name><name>XLog</name><operator>.</operator><name>STD</name></name></expr></argument>, <argument><expr><literal type="string">"Cannot delete running/completed coordinator action: [{0}]"</literal></expr></argument>)</argument_list></call></expr>,
    <expr><call><name>E1023</name><argument_list>(<argument><expr><name><name>XLog</name><operator>.</operator><name>STD</name></name></expr></argument>, <argument><expr><literal type="string">"Coord Job update Error: [{0}]"</literal></expr></argument>)</argument_list></call></expr>,

 
     <expr><call><name>E1100</name><argument_list>(<argument><expr><name><name>XLog</name><operator>.</operator><name>STD</name></name></expr></argument>, <argument><expr><literal type="string">"Command precondition does not hold before execution, [{0}]"</literal></expr></argument>)</argument_list></call></expr>,
 
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordSubmitXCommand</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordSubmitXCommand</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>d215180aa</name><operator>..</operator><literal type="number">654e9b808</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordSubmitXCommand</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordSubmitXCommand</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">96</literal></expr>,<expr><literal type="number">11</literal> <operator>+</operator><literal type="number">96</literal></expr>,<expr><literal type="number">11</literal> @@</expr> <import>import <name><name>org</name><operator>.</operator><name>xml</name><operator>.</operator><name>sax</name><operator>.</operator><name>SAXException</name></name>;</import>
  <operator>*</operator><operator>/</operator>
 <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
 
    <expr><specifier>private</specifier> <name>Configuration</name> <name>conf</name></expr>;
    <expr><specifier>protected</specifier> <name>Configuration</name> <name>conf</name></expr>;
     <expr><specifier>private</specifier> <name>final</name> <name>String</name> <name>bundleId</name></expr>;
     <expr><specifier>private</specifier> <name>final</name> <name>String</name> <name>coordName</name></expr>;
    <expr><specifier>private</specifier> <name>boolean</name> <name>dryrun</name></expr>;
    <expr><specifier>private</specifier> <name>JPAService</name> <name>jpaService</name> <operator>=</operator> <literal type="null">null</literal></expr>;
    <expr><specifier>protected</specifier> <name>boolean</name> <name>dryrun</name></expr>;
    <expr><specifier>protected</specifier> <name>JPAService</name> <name>jpaService</name> <operator>=</operator> <literal type="null">null</literal></expr>;
     <expr><specifier>private</specifier> <name><name>CoordinatorJob</name><operator>.</operator><name>Status</name></name> <name>prevStatus</name> <operator>=</operator> <name><name>CoordinatorJob</name><operator>.</operator><name>Status</name><operator>.</operator><name>PREP</name></name></expr>;
 
     <expr><specifier>public</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>CONFIG_DEFAULT</name> <operator>=</operator> <literal type="string">"coord-config-default.xml"</literal></expr>;
@@ <expr><operator>-</operator><literal type="number">113</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">113</literal></expr>,<expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
     <expr><specifier>private</specifier> <specifier>static</specifier> <name>final</name> <name><name>Set</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>DISALLOWED_USER_PROPERTIES</name> <operator>=</operator> <operator>new</operator> <call><name><name>HashSet</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr>;
     <expr><specifier>private</specifier> <specifier>static</specifier> <name>final</name> <name><name>Set</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>DISALLOWED_DEFAULT_PROPERTIES</name> <operator>=</operator> <operator>new</operator> <call><name><name>HashSet</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr>;
 
    <expr><specifier>private</specifier> <name>CoordinatorJobBean</name> <name>coordJob</name> <operator>=</operator> <literal type="null">null</literal></expr>;
    <expr><specifier>protected</specifier> <name>CoordinatorJobBean</name> <name>coordJob</name> <operator>=</operator> <literal type="null">null</literal></expr>;
     <comment type="block" format="javadoc">/**
      * Default timeout for normal jobs, in minutes, after which coordinator input check will timeout
      */</comment>
@@ <expr><operator>-</operator><literal type="number">198</literal></expr>,<expr><literal type="number">8</literal> <operator>+</operator><literal type="number">198</literal></expr>,<expr><literal type="number">14</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
      <expr><operator>*</operator><operator>/</operator>
     @<name>Override</name>
     <specifier>protected</specifier> <name>String</name> <call><name>submit</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>CommandException</name> <block>{
        <expr><name>String</name> <name>jobId</name> <operator>=</operator> <literal type="null">null</literal></expr></block></expr></argument></throws></expr>;
         <expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"STARTED Coordinator Submit"</literal></expr></argument>)</argument_list></call></expr>;
        <expr><name>String</name> <name>jobId</name> <operator>=</operator> <call><name>submitJob</name><argument_list>()</argument_list></call></expr>;
        <expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"ENDED Coordinator Submit jobId="</literal> <operator>+</operator> <name>jobId</name></expr></argument>)</argument_list></call></expr>;
        <return>return <expr><name>jobId</name></expr>;</return></block></expr>
    }</block>

    <specifier>protected</specifier> <name>String</name> <call><name>submitJob</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>CommandException</name> <block>{
        <expr><name>String</name> <name>jobId</name> <operator>=</operator> <literal type="null">null</literal></expr></block></expr></argument></throws></expr>;
         <expr><call><name><name>InstrumentUtils</name><operator>.</operator><name>incrJobCounter</name></name><argument_list>(<argument><expr><call><name>getName</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><call><name>getInstrumentation</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
 
         <expr><name>boolean</name> <name>exceptionOccured</name> <operator>=</operator> <literal type="boolean">false</literal></expr>;
@@ <expr><operator>-</operator><literal type="number">230</literal></expr>,<expr><literal type="number">42</literal> <operator>+</operator><literal type="number">236</literal></expr>,<expr><literal type="number">16</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
 
             <expr><call><name><name>LOG</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"jobXml after all validation "</literal> <operator>+</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>eJob</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
 
            <expr><name>jobId</name> <operator>=</operator> <call><name>storeToDB</name><argument_list>(<argument><expr><name>eJob</name></expr></argument>, <argument><expr><name>coordJob</name></expr></argument>)</argument_list></call></expr>;
            <expr><name>jobId</name> <operator>=</operator> <call><name>storeToDB</name><argument_list>(<argument><expr><name>appXml</name></expr></argument>, <argument><expr><name>eJob</name></expr></argument>, <argument><expr><name>coordJob</name></expr></argument>)</argument_list></call></expr>;
             <comment type="line">// log job info for coordinator job</comment>
             <expr><call><name><name>LogUtils</name><operator>.</operator><name>setLogInfo</name></name><argument_list>(<argument><expr><name>coordJob</name></expr></argument>, <argument><expr><name>logInfo</name></expr></argument>)</argument_list></call></expr>;
             <expr><name>LOG</name> <operator>=</operator> <call><name><name>XLog</name><operator>.</operator><name>resetPrefix</name></name><argument_list>(<argument><expr><name>LOG</name></expr></argument>)</argument_list></call></expr>;
 
             <if_stmt><if>if <condition>(<expr><operator>!</operator><name>dryrun</name></expr>)</condition> <block>{<block_content>
                <comment type="line">// submit a command to materialize jobs for the next 1 hour (3600 secs)</comment>
                <comment type="line">// so we don't wait 10 mins for the Service to run.</comment>
                <expr_stmt><expr><call><name>queue</name><argument_list>(<argument><expr><operator>new</operator> <call><name>CoordMaterializeTransitionXCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><literal type="number">3600</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="number">100</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>queueMaterializeTransitionXCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt/></block_content></block></if></if_stmt>}</block></expr>
             <if_stmt><else>else <block>{<block_content>
                <decl_stmt><decl><type><name>Date</name></type> <name>startTime</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>long</name></type> <name>startTimeMilli</name> <init>= <expr><call><name><name>startTime</name><operator>.</operator><name>getTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>long</name></type> <name>endTimeMilli</name> <init>= <expr><name>startTimeMilli</name> <operator>+</operator> <operator>(</operator><literal type="number">3600</literal> <operator>*</operator> <literal type="number">1000</literal><operator>)</operator></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Date</name></type> <name>jobEndTime</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Date</name></type> <name>endTime</name> <init>= <expr><operator>new</operator> <call><name>Date</name><argument_list>(<argument><expr><name>endTimeMilli</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <if_stmt><if>if <condition>(<expr><call><name><name>endTime</name><operator>.</operator><name>compareTo</name></name><argument_list>(<argument><expr><name>jobEndTime</name></expr></argument>)</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
                    <expr_stmt><expr><name>endTime</name> <operator>=</operator> <name>jobEndTime</name></expr>;</expr_stmt>
                <expr_stmt/></block_content></block></if></if_stmt></block_content></block></else></if_stmt>}</block></block>
                <name>jobId</name> <operator>=</operator> <call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"["</literal> <operator>+</operator> <name>jobId</name> <operator>+</operator> <literal type="string">"]: Update status to RUNNING"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setStatus</name></name><argument_list>(<argument><expr><name><name>Job</name><operator>.</operator><name>Status</name><operator>.</operator><name>RUNNING</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setPending</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
                <decl_stmt><decl><type><name>CoordActionMaterializeCommand</name></type> <name>coordActionMatCom</name> <init>= <expr><operator>new</operator> <call><name>CoordActionMaterializeCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>startTime</name></expr></argument>,
                        <argument><expr><name>endTime</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Configuration</name></type> <name>jobConf</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>
                <try>try <block>{<block_content>
                    <expr_stmt><expr><name>jobConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block>
                <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e1</name></decl></parameter>)</parameter_list> <block>{<block_content>
                    <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Configuration parse error. read from DB :"</literal> <operator>+</operator> <call><name><name>coordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e1</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                </block_content>}</block></catch></try>
                <decl_stmt><decl><type><name>String</name></type> <name>action</name> <init>= <expr><call><name><name>coordActionMatCom</name><operator>.</operator><name>materializeJobs</name></name><argument_list>(<argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><name>coordJob</name></expr></argument>, <argument><expr><name>jobConf</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>String</name></type> <name>output</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call> <operator>+</operator> <call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call>
                <operator>+</operator> <literal type="string">"***actions for instance***"</literal> <operator>+</operator> <name>action</name></expr></init></decl>;</decl_stmt>
                <return>return <expr><name>output</name></expr>;</return>
                <return>return <expr><call><name>getDryRun</name><argument_list>(<argument><expr><name>coordJob</name></expr></argument>)</argument_list></call></expr>;</return>
             }
         }
         <catch>catch <parameter_list>(<parameter><decl><type><name>JDOMException</name></type> <name>jex</name></decl></parameter>)</parameter_list> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">295</literal></expr><operator>,</operator><expr><literal type="number">17</literal> <operator>+</operator><literal type="number">275</literal></expr><operator>,</operator><expr><literal type="number">59</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
         }</block></expr></expr_stmt>
         <finally>finally <block>{<block_content>
             <if_stmt><if>if <condition>(<expr><name>exceptionOccured</name></expr>)</condition> <block>{<block_content>
                <if_stmt><if>if<condition>(<expr><call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal> <operator>||</operator> <call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equalsIgnoreCase</name><argument_list>(<argument><expr><literal type="string">""</literal></expr></argument>)</argument_list></call></expr>)</condition><block>{<block_content>
                <if_stmt><if>if <condition>(<expr><call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal> <operator>||</operator> <call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equalsIgnoreCase</name><argument_list>(<argument><expr><literal type="string">""</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
                     <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setStatus</name></name><argument_list>(<argument><expr><name><name>CoordinatorJob</name><operator>.</operator><name>Status</name><operator>.</operator><name>FAILED</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                     <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>resetPending</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
                 </block_content>}</block></if></if_stmt>
             </block_content>}</block></if></if_stmt>
         </block_content>}</block></if></if_stmt>

        <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"ENDED Coordinator Submit jobId="</literal> <operator>+</operator> <name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <return>return <expr><name>jobId</name></expr>;</return>
     </block_content>}</block></finally>
 
    <comment type="block" format="javadoc">/**
     * Gets the dryrun output.
     *
     * @param jobId the job id
     * @return the dry run
     * @throws Exception the exception
     */</comment>
    <function><type><specifier>protected</specifier> <name>String</name></type> <name>getDryRun</name><parameter_list>(<parameter><decl><type><name>CoordinatorJobBean</name></type> <name>coordJob</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws><block>{<block_content>
        <decl_stmt><decl><type><name>Date</name></type> <name>startTime</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>long</name></type> <name>startTimeMilli</name> <init>= <expr><call><name><name>startTime</name><operator>.</operator><name>getTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>long</name></type> <name>endTimeMilli</name> <init>= <expr><name>startTimeMilli</name> <operator>+</operator> <operator>(</operator><literal type="number">3600</literal> <operator>*</operator> <literal type="number">1000</literal><operator>)</operator></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Date</name></type> <name>jobEndTime</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Date</name></type> <name>endTime</name> <init>= <expr><operator>new</operator> <call><name>Date</name><argument_list>(<argument><expr><name>endTimeMilli</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <if_stmt><if>if <condition>(<expr><call><name><name>endTime</name><operator>.</operator><name>compareTo</name></name><argument_list>(<argument><expr><name>jobEndTime</name></expr></argument>)</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><name>endTime</name> <operator>=</operator> <name>jobEndTime</name></expr>;</expr_stmt>
        </block_content>}</block></if></if_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"["</literal> <operator>+</operator> <name>jobId</name> <operator>+</operator> <literal type="string">"]: Update status to RUNNING"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setStatus</name></name><argument_list>(<argument><expr><name><name>Job</name><operator>.</operator><name>Status</name><operator>.</operator><name>RUNNING</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setPending</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordActionMaterializeCommand</name></type> <name>coordActionMatCom</name> <init>= <expr><operator>new</operator> <call><name>CoordActionMaterializeCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>startTime</name></expr></argument>,
                <argument><expr><name>endTime</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Configuration</name></type> <name>jobConf</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><name>jobConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e1</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Configuration parse error. read from DB :"</literal> <operator>+</operator> <call><name><name>coordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e1</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
        <decl_stmt><decl><type><name>String</name></type> <name>action</name> <init>= <expr><call><name><name>coordActionMatCom</name><operator>.</operator><name>materializeJobs</name></name><argument_list>(<argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><name>coordJob</name></expr></argument>, <argument><expr><name>jobConf</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>output</name> <init>= <expr><call><name><name>coordJob</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call> <operator>+</operator> <call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call>
        <operator>+</operator> <literal type="string">"***actions for instance***"</literal> <operator>+</operator> <name>action</name></expr></init></decl>;</decl_stmt>
        <return>return <expr><name>output</name></expr>;</return>
    </block_content>}</block></function>

    <comment type="block" format="javadoc">/**
     * Queue MaterializeTransitionXCommand
     */</comment>
    <function><type><specifier>protected</specifier> <name>void</name></type> <name>queueMaterializeTransitionXCommand</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <comment type="line">// submit a command to materialize jobs for the next 1 hour (3600 secs)</comment>
        <comment type="line">// so we don't wait 10 mins for the Service to run.</comment>
        <expr_stmt><expr><call><name>queue</name><argument_list>(<argument><expr><operator>new</operator> <call><name>CoordMaterializeTransitionXCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><literal type="number">3600</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="number">100</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

     <comment type="block" format="javadoc">/**
      * Method that validates values in the definition for correctness. Placeholder to add more.
      */</comment>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">457</literal></expr><operator>,</operator><expr><literal type="number">18</literal> <operator>+</operator><literal type="number">479</literal></expr><operator>,</operator><expr><literal type="number">16</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
         <throw>throw <argument_list>new <argument><expr><call><name>CoordinatorJobException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1021</name></name></expr></argument>, <argument><expr><name>eventType</name> <operator>+</operator> <literal type="string">" end-instance '"</literal> <operator>+</operator> <name>instanceValue</name>
                 <operator>+</operator> <literal type="string">"' contains more than one date end-instance. Coordinator job NOT SUBMITTED. "</literal> <operator>+</operator> <name>correctAction</name></expr></argument>)</argument_list></call></expr></argument></argument_list></throw>;
     }</block>

     <comment type="block" format="javadoc">/**
      * Read the application XML and validate against coordinator Schema
      *
      * @return validated coordinator XML
      * @throws CoordinatorJobException thrown if unable to read or validate coordinator xml
      */</comment>
    <specifier>private</specifier> <name>String</name> <call><name>readAndValidateXml</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>CoordinatorJobException</name> <block>{
    <expr><specifier>protected</specifier> <name>String</name> <call><name>readAndValidateXml</name><argument_list>()</argument_list></call></expr></block></expr></argument></throws> <throws>throws <argument><expr><name>CoordinatorJobException</name> <block>{
         <expr><name>String</name> <name>appPath</name> <operator>=</operator> <call><name><name>ParamChecker</name><operator>.</operator><name>notEmpty</name></name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>)</argument_list></call></expr></argument>,
                 <argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
         <decl_stmt><decl><type><name>String</name></type> <name>coordXml</name> <init>= <expr><call><name>readDefinition</name><argument_list>(<argument><expr><name>appPath</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

         <expr_stmt><expr><call><name>validateXml</name><argument_list>(<argument><expr><name>coordXml</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <return>return <expr><name>coordXml</name></expr>;</return>
     </block_content>}</block></catch>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1153</literal></expr><operator>,</operator><expr><literal type="number">12</literal> <operator>+</operator><literal type="number">1173</literal></expr><operator>,</operator><expr><literal type="number">13</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordSubmitXCommand</name> extends <name>SubmitTransitionXCommand</name> <block>{
     <comment type="block" format="javadoc">/**
      * Write a coordinator job into database
      *
     *@param appXML : Coordinator definition xml
      * @param eJob : XML element of job
      * @param coordJob : Coordinator job bean
      * @return Job id
      * @throws CommandException thrown if unable to save coordinator job to db
      */</comment>
    <expr><specifier>private</specifier> <name>String</name> <call><name>storeToDB</name><argument_list>(<argument><expr><name>Element</name> <name>eJob</name></expr></argument>, <argument><expr><name>CoordinatorJobBean</name> <name>coordJob</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>CommandException</name> <block>{
    <expr><specifier>protected</specifier> <name>String</name> <call><name>storeToDB</name><argument_list>(<argument><expr><name>String</name> <name>appXML</name></expr></argument>, <argument><expr><name>Element</name> <name>eJob</name></expr></argument>, <argument><expr><name>CoordinatorJobBean</name> <name>coordJob</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws> <throws>throws <argument><expr><name>CommandException</name> <block>{
         <expr><name>String</name> <name>jobId</name> <operator>=</operator> <call><name><name>Services</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>UUIDService</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>generateId</name><argument_list>(<argument><expr><name><name>ApplicationType</name><operator>.</operator><name>COORDINATOR</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
         <expr><call><name><name>coordJob</name><operator>.</operator><name>setId</name></name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;
 
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordUpdateXCommand</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">000000000..d6e47dacf</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>CoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr>,<expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr>,<expr><literal type="number">269</literal> @@</expr>
<comment type="block" format="javadoc">/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</comment>

<package>package <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>command</name><operator>.</operator><name>coord</name></name>;</package></block></expr></expr_stmt>

<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>ByteArrayOutputStream</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>StringReader</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Date</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>CoordinatorJobBean</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>ErrorCode</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>CoordinatorJob</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>OozieClient</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>command</name><operator>.</operator><name>CommandException</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>executor</name><operator>.</operator><name>jpa</name><operator>.</operator><name>CoordJobQueryExecutor</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>executor</name><operator>.</operator><name>jpa</name><operator>.</operator><name>JPAExecutorException</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>executor</name><operator>.</operator><name>jpa</name><operator>.</operator><name>CoordJobQueryExecutor</name><operator>.</operator><name>CoordJobQuery</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>JPAService</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>Services</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>LogUtils</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>XConfiguration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>XmlUtils</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>eclipse</name><operator>.</operator><name>jgit</name><operator>.</operator><name>diff</name><operator>.</operator><name>DiffFormatter</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>eclipse</name><operator>.</operator><name>jgit</name><operator>.</operator><name>diff</name><operator>.</operator><name>EditList</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>eclipse</name><operator>.</operator><name>jgit</name><operator>.</operator><name>diff</name><operator>.</operator><name>HistogramDiff</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>eclipse</name><operator>.</operator><name>jgit</name><operator>.</operator><name>diff</name><operator>.</operator><name>RawText</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>eclipse</name><operator>.</operator><name>jgit</name><operator>.</operator><name>diff</name><operator>.</operator><name>RawTextComparator</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>jdom</name><operator>.</operator><name>Element</name></name>;</import>

<comment type="block" format="javadoc">/**
 * This class provides the functionalities to update coordinator job XML and properties. It uses CoordSubmitXCommand
 * functionality to validate XML and resolve all the variables or properties using job configurations.
 */</comment>
<class><specifier>public</specifier> class <name>CoordUpdateXCommand</name> <super_list><extends>extends <super><name>CoordSubmitXCommand</name></super></extends></super_list> <block>{

    <decl_stmt><decl><type><specifier>private</specifier> <specifier>final</specifier> <name>String</name></type> <name>jobId</name></decl>;</decl_stmt>
    <decl_stmt><decl><type><specifier>private</specifier> <name>boolean</name></type> <name>showDiff</name> <init>= <expr><literal type="boolean">true</literal></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><specifier>private</specifier> <name>boolean</name></type> <name>isConfChange</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>StringBuffer</name></type> <name>diff</name> <init>= <expr><operator>new</operator> <call><name>StringBuffer</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>oldCoordJob</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>

    <constructor><specifier>public</specifier> <name>CoordUpdateXCommand</name><parameter_list>(<parameter><decl><type><name>boolean</name></type> <name>dryrun</name></decl></parameter>, <parameter><decl><type><name>Configuration</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name><name>this</name><operator>.</operator><name>jobId</name></name> <operator>=</operator> <name>jobId</name></expr>;</expr_stmt>
        <expr_stmt><expr><name>isConfChange</name> <operator>=</operator> <ternary><condition><expr><call><name><name>conf</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><literal type="boolean">false</literal></expr> </then><else>: <expr><literal type="boolean">true</literal></expr></else></ternary></expr>;</expr_stmt>
    </block_content>}</block></constructor>

    <constructor><specifier>public</specifier> <name>CoordUpdateXCommand</name><parameter_list>(<parameter><decl><type><name>boolean</name></type> <name>dryrun</name></decl></parameter>, <parameter><decl><type><name>Configuration</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>showDiff</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name><name>this</name><operator>.</operator><name>jobId</name></name> <operator>=</operator> <name>jobId</name></expr>;</expr_stmt>
        <expr_stmt><expr><name><name>this</name><operator>.</operator><name>showDiff</name></name> <operator>=</operator> <name>showDiff</name></expr>;</expr_stmt>
        <expr_stmt><expr><name>isConfChange</name> <operator>=</operator> <ternary><condition><expr><call><name><name>conf</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><literal type="boolean">false</literal></expr> </then><else>: <expr><literal type="boolean">true</literal></expr></else></ternary></expr>;</expr_stmt>
    </block_content>}</block></constructor>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>String</name></type> <name>storeToDB</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>xmlElement</name></decl></parameter>, <parameter><decl><type><name>Element</name></type> <name>eJob</name></decl></parameter>, <parameter><decl><type><name>CoordinatorJobBean</name></type> <name>coordJob</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
        <expr_stmt><expr><call><name>check</name><argument_list>(<argument><expr><name>oldCoordJob</name></expr></argument>, <argument><expr><name>coordJob</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>computeDiff</name><argument_list>(<argument><expr><name>eJob</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setAppPath</name></name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><name>isConfChange</name></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setConf</name></name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></if></if_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setMatThrottling</name></name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getMatThrottling</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setOrigJobXml</name></name><argument_list>(<argument><expr><name>xmlElement</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setConcurrency</name></name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getConcurrency</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setExecution</name></name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getExecution</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setTimeout</name></name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getTimeout</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setJobXml</name></name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>eJob</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>


        <if_stmt><if>if <condition>(<expr><operator>!</operator><name>dryrun</name></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>setLastModifiedTime</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Date</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <comment type="line">// Should log the changes, this should be useful for debugging.</comment>
            <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"Coord update changes : "</literal> <operator>+</operator> <call><name><name>diff</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <try>try <block>{<block_content>
                <expr_stmt><expr><call><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>executeUpdate</name><argument_list>(<argument><expr><name><name>CoordJobQuery</name><operator>.</operator><name>UPDATE_COORD_JOB</name></name></expr></argument>, <argument><expr><name>oldCoordJob</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <catch>catch <parameter_list>(<parameter><decl><type><name>JPAExecutorException</name></type> <name>jpaee</name></decl></parameter>)</parameter_list> <block>{<block_content>
                <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name>jpaee</name></expr></argument>)</argument_list></call></expr>;</throw>
            </block_content>}</block></catch></try>
        </block_content>}</block></if></if_stmt>
        <return>return <expr><name>jobId</name></expr>;</return>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>void</name></type> <name>loadState</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
        <expr_stmt><expr><call><name><name>super</name><operator>.</operator><name>loadState</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>jpaService</name> <operator>=</operator> <call><name><name>Services</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>JPAService</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><name>jpaService</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E0610</name></name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>
        <expr_stmt><expr><name>coordJob</name> <operator>=</operator> <operator>new</operator> <call><name>CoordinatorJobBean</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><name>oldCoordJob</name> <operator>=</operator> <call><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>CoordJobQuery</name><operator>.</operator><name>GET_COORD_JOB</name></name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>JPAExecutorException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></catch></try>

        <expr_stmt><expr><call><name><name>LogUtils</name><operator>.</operator><name>setLogInfo</name></name><argument_list>(<argument><expr><name>oldCoordJob</name></expr></argument>, <argument><expr><name>logInfo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><operator>!</operator><name>isConfChange</name></expr>)</condition> <block>{<block_content>
            <try>try <block>{<block_content>
                <expr_stmt><expr><name>conf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>coordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
                <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
            </block_content>}</block></catch></try>
        </block_content>}</block></if></if_stmt>
        <expr_stmt><expr><call><name><name>coordJob</name><operator>.</operator><name>setConf</name></name><argument_list>(<argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>setJob</name><argument_list>(<argument><expr><name>coordJob</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>void</name></type> <name>verifyPrecondition</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
        <if_stmt><if>if <condition>(<expr><call><name><name>coordJob</name><operator>.</operator><name>getStatus</name></name><argument_list>()</argument_list></call> <operator>==</operator> <name><name>CoordinatorJob</name><operator>.</operator><name>Status</name><operator>.</operator><name>SUCCEEDED</name></name>
                <operator>||</operator> <call><name><name>coordJob</name><operator>.</operator><name>getStatus</name></name><argument_list>()</argument_list></call> <operator>==</operator> <name><name>CoordinatorJob</name><operator>.</operator><name>Status</name><operator>.</operator><name>DONEWITHERROR</name></name></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"Can't update coord job. Job has finished processing"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"Can't update coord job. Job has finished processing"</literal></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>
    </block_content>}</block></function>

    <comment type="block" format="javadoc">/**
     * Gets the difference of job definition and properties.
     *
     * @param eJob the e job
     * @return the diff
     */</comment>

    <function><type><specifier>private</specifier> <name>void</name></type> <name>computeDiff</name><parameter_list>(<parameter><decl><type><name>Element</name></type> <name>eJob</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <try>try <block>{<block_content>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"**********Job definition changes**********"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>append</name><argument_list>(<argument><expr><call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><call><name>getDiffinGitFormat</name><argument_list>(<argument><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>eJob</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"******************************************"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>append</name><argument_list>(<argument><expr><call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"**********Job conf changes****************"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>append</name><argument_list>(<argument><expr><call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <if_stmt><if>if <condition>(<expr><name>isConfChange</name></expr>)</condition> <block>{<block_content>
                <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><call><name>getDiffinGitFormat</name><argument_list>(<argument><expr><call><name><name>oldCoordJob</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>XmlUtils</name><operator>.</operator><name>prettyPrint</name></name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block></if>
            <else>else <block>{<block_content>
                <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"No conf update requested"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>append</name><argument_list>(<argument><expr><call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block></else></if_stmt>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"******************************************"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>append</name><argument_list>(<argument><expr><call><name><name>System</name><operator>.</operator><name>getProperty</name></name><argument_list>(<argument><expr><literal type="string">"line.separator"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name><name>diff</name><operator>.</operator><name>append</name></name><argument_list>(<argument><expr><literal type="string">"Error computing diff. Error "</literal> <operator>+</operator> <call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Error computing diff."</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
    </block_content>}</block></function>

    <comment type="block" format="javadoc">/**
     * Get the differences in git format.
     *
     * @param string1 the string1
     * @param string2 the string2
     * @return the diff
     * @throws IOException Signals that an I/O exception has occurred.
     */</comment>
    <function><type><specifier>private</specifier> <name>String</name></type> <name>getDiffinGitFormat</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>string1</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>string2</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>ByteArrayOutputStream</name></type> <name>out</name> <init>= <expr><operator>new</operator> <call><name>ByteArrayOutputStream</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>RawText</name></type> <name>rt1</name> <init>= <expr><operator>new</operator> <call><name>RawText</name><argument_list>(<argument><expr><call><name><name>string1</name><operator>.</operator><name>getBytes</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>RawText</name></type> <name>rt2</name> <init>= <expr><operator>new</operator> <call><name>RawText</name><argument_list>(<argument><expr><call><name><name>string2</name><operator>.</operator><name>getBytes</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>EditList</name></type> <name>diffList</name> <init>= <expr><operator>new</operator> <call><name>EditList</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>diffList</name><operator>.</operator><name>addAll</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>HistogramDiff</name><argument_list>()</argument_list></call><operator>.</operator><call><name>diff</name><argument_list>(<argument><expr><name><name>RawTextComparator</name><operator>.</operator><name>DEFAULT</name></name></expr></argument>, <argument><expr><name>rt1</name></expr></argument>, <argument><expr><name>rt2</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>DiffFormatter</name><argument_list>(<argument><expr><name>out</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>format</name><argument_list>(<argument><expr><name>diffList</name></expr></argument>, <argument><expr><name>rt1</name></expr></argument>, <argument><expr><name>rt2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <return>return <expr><call><name><name>out</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr>;</return>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>String</name></type> <name>submit</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
        <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"STARTED Coordinator update"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>submitJob</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"ENDED Coordinator update"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><name>showDiff</name></expr>)</condition> <block>{<block_content>
            <return>return <expr><call><name><name>diff</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr>;</return>
        </block_content>}</block></if>
        <else>else <block>{<block_content>
            <return>return <expr><literal type="string">""</literal></expr>;</return>
        </block_content>}</block></else></if_stmt>
    </block_content>}</block></function>

    <comment type="block" format="javadoc">/**
     * Check. Frequency can't be changed. EndTime can't be changed. StartTime can't be changed. AppName can't be changed
     * Timeunit can't be changed. Timezone can't be changed
     *
     * @param oldCoord the old coord
     * @param newCoord the new coord
     * @throws CommandException the command exception
     */</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>check</name><parameter_list>(<parameter><decl><type><name>CoordinatorJobBean</name></type> <name>oldCoord</name></decl></parameter>, <parameter><decl><type><name>CoordinatorJobBean</name></type> <name>newCoord</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getFrequency</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getFrequency</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"Frequency can't be changed. Old frequency = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getFrequency</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new frequency = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getFrequency</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"End time can't be changed. Old end time = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new end time = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getEndTime</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"Start time can't be changed. Old start time = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new start time = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getStartTime</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getAppName</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getAppName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"Coord name can't be changed. Old name = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getAppName</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new name = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getAppName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getTimeUnitStr</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getTimeUnitStr</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"Timeunit can't be changed. Old Timeunit = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getTimeUnitStr</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new Timeunit = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getTimeUnitStr</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>oldCoord</name><operator>.</operator><name>getTimeZone</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>newCoord</name><operator>.</operator><name>getTimeZone</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>CommandException</name><argument_list>(<argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E1023</name></name></expr></argument>, <argument><expr><literal type="string">"TimeZone can't be changed. Old timeZone = "</literal>
                    <operator>+</operator> <call><name><name>oldCoord</name><operator>.</operator><name>getTimeZone</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" new timeZone = "</literal> <operator>+</operator> <call><name><name>newCoord</name><operator>.</operator><name>getTimeZone</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>

    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>void</name></type> <name>queueMaterializeTransitionXCommand</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>)</parameter_list> <block>{<block_content>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>public</specifier> <name>void</name></type> <name>notifyParent</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument></throws> <block>{<block_content>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>boolean</name></type> <name>isLockRequired</name><parameter_list>()</parameter_list> <block>{<block_content>
        <return>return <expr><literal type="boolean">true</literal></expr>;</return>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>public</specifier> <name>String</name></type> <name>getEntityKey</name><parameter_list>()</parameter_list> <block>{<block_content>
        <return>return <expr><name>jobId</name></expr>;</return>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>public</specifier> <name>void</name></type> <name>transitToNext</name><parameter_list>()</parameter_list> <block>{<block_content>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>public</specifier> <name>String</name></type> <name>getKey</name><parameter_list>()</parameter_list> <block>{<block_content>
        <return>return <expr><call><name>getName</name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">"_"</literal> <operator>+</operator> <name>jobId</name></expr>;</return>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>public</specifier> <name>String</name></type> <name>getDryRun</name><parameter_list>(<parameter><decl><type><name>CoordinatorJobBean</name></type> <name>job</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws><block>{<block_content>
        <return>return <expr><call><name><name>super</name><operator>.</operator><name>getDryRun</name></name><argument_list>(<argument><expr><name>oldCoordJob</name></expr></argument>)</argument_list></call></expr>;</return>
    </block_content>}</block></function>
}</block></class>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>executor</name><operator>/</operator><name>jpa</name><operator>/</operator><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>executor</name><operator>/</operator><name>jpa</name><operator>/</operator><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">5f7744c5f</literal><operator>..</operator><literal type="number">67a919d5b</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>executor</name><operator>/</operator><name>jpa</name><operator>/</operator><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>executor</name><operator>/</operator><name>jpa</name><operator>/</operator><name><name>CoordJobQueryExecutor</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">112</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">112</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>CoordJobQueryExecutor</name> extends <name>QueryExecutor</name><operator>&lt;</operator><name>CoordinatorJobBean</name></expr><operator>,</operator> <expr><name>Coo</name>
                 <call><name><name>query</name><operator>.</operator><name>setParameter</name></name><argument_list>(<argument><expr><literal type="string">"timeUnit"</literal></expr></argument>, <argument><expr><call><name><name>cjBean</name><operator>.</operator><name>getTimeUnitStr</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 <expr_stmt><expr><call><name><name>query</name><operator>.</operator><name>setParameter</name></name><argument_list>(<argument><expr><literal type="string">"appNamespace"</literal></expr></argument>, <argument><expr><call><name><name>cjBean</name><operator>.</operator><name>getAppNamespace</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 <expr_stmt><expr><call><name><name>query</name><operator>.</operator><name>setParameter</name></name><argument_list>(<argument><expr><literal type="string">"bundleId"</literal></expr></argument>, <argument><expr><call><name><name>cjBean</name><operator>.</operator><name>getBundleId</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name><name>query</name><operator>.</operator><name>setParameter</name></name><argument_list>(<argument><expr><literal type="string">"matThrottling"</literal></expr></argument>, <argument><expr><call><name><name>cjBean</name><operator>.</operator><name>getMatThrottling</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 <expr_stmt><expr><call><name><name>query</name><operator>.</operator><name>setParameter</name></name><argument_list>(<argument><expr><literal type="string">"id"</literal></expr></argument>, <argument><expr><call><name><name>cjBean</name><operator>.</operator><name>getId</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                 <break>break;</break>
             <case>case <expr><name>UPDATE_COORD_JOB_STATUS</name></expr>:</case>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>BaseJobServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>BaseJobServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>aa43e6892</name><operator>..</operator><literal type="number">6b82d7b97</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>BaseJobServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>BaseJobServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">147</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">147</literal></expr><operator>,</operator><expr><literal type="number">13</literal> @@ <specifier>public</specifier> <specifier>abstract</specifier> <name>class</name> <name>BaseJobServlet</name> extends <name>JsonRestServlet</name> <block>{
                 <expr><call><name><name>response</name><operator>.</operator><name>setStatus</name></name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_OK</name></name></expr></argument>)</argument_list></call></expr>;
             }</block></expr></expr_stmt>
         }
        else <if_stmt><if>if <condition>(<expr><call><name><name>action</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_COORD_UPDATE</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name>validateContentType</name><argument_list>(<argument><expr><name>request</name></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>XML_CONTENT_TYPE</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>stopCron</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <decl_stmt><decl><type><name>JSONObject</name></type> <name>json</name> <init>= <expr><call><name>updateJob</name><argument_list>(<argument><expr><name>request</name></expr></argument>, <argument><expr><name>response</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <expr_stmt><expr><call><name>startCron</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>sendJsonResponse</name><argument_list>(<argument><expr><name>response</name></expr></argument>, <argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_OK</name></name></expr></argument>, <argument><expr><name>json</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></if>
         <else>else <block>{<block_content>
             <throw>throw <expr><operator>new</operator> <call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E0303</name></name></expr></argument>,
                     <argument><expr><name><name>RestConstants</name><operator>.</operator><name>ACTION_PARAM</name></name></expr></argument>, <argument><expr><name>action</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">416</literal></expr><operator>,</operator><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">423</literal></expr><operator>,</operator><expr><literal type="number">17</literal> @@ <specifier>public</specifier> <specifier>abstract</specifier> <name>class</name> <name>BaseJobServlet</name> extends <name>JsonRestServlet</name> <block>{
      <expr><operator>*</operator><operator>/</operator>
     <specifier>abstract</specifier> <name>JSONObject</name> <call><name>getJobsByParentId</name><argument_list>(<argument><expr><name>HttpServletRequest</name> <name>request</name></expr></argument>, <argument><expr><name>HttpServletResponse</name> <name>response</name></expr></argument>)</argument_list></call>
             <throws>throws <argument><expr><name>XServletException</name></expr></argument>, <argument><expr><name>IOException</name></expr></argument></throws></expr>;

    <comment type="block" format="javadoc">/**
     * Abstract method to Update coord job.
     *
     * @param request the request
     * @param response the response
     * @return the JSON object
     * @throws XServletException the x servlet exception
     * @throws IOException Signals that an I/O exception has occurred.
     */</comment>
    <specifier>abstract</specifier> <name>JSONObject</name> <call><name>updateJob</name><argument_list>(<argument><expr><name>HttpServletRequest</name> <name>request</name></expr></argument>, <argument><expr><name>HttpServletResponse</name> <name>response</name></expr></argument>)</argument_list></call>
            <throws>throws <argument><expr><name>XServletException</name></expr></argument>, <argument><expr><name>IOException</name></expr></argument></throws></block></expr>;</expr_stmt>
 </block_content>}</block></else></if_stmt>

<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V0JobServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V0JobServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">443ab6d4c</literal><operator>..</operator><literal type="number">487a37128</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V0JobServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V0JobServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">214</literal></expr><operator>,</operator><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">214</literal></expr><operator>,</operator><expr><literal type="number">10</literal> @@ <specifier>public</specifier> <name>class</name> <name>V0JobServlet</name> extends <name>BaseJobServlet</name> <block>{
             <expr><name>IOException</name> <block>{
         <throw>throw <argument_list>new <argument><expr><call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E0302</name></name></expr></argument>, <argument><expr><literal type="string">"Not supported in v0"</literal></expr></argument>)</argument_list></call></expr></argument></argument_list></throw>;
     }</block>

    @<name>Override</name>
    <specifier>protected</specifier> <name>JSONObject</name> <call><name>updateJob</name><argument_list>(<argument><expr><name>HttpServletRequest</name> <name>request</name></expr></argument>, <argument><expr><name>HttpServletResponse</name> <name>response</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>XServletException</name></expr></argument>,
            <argument><expr><name>IOException</name> <block>{</block></expr></argument></throws>
        <throw>throw <argument_list>new <argument><expr><call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E0302</name></name></expr></argument>, <argument><expr><literal type="string">"Not supported in v0"</literal></expr></argument>)</argument_list></call></expr></argument></argument_list></throw></expr>;
    }</block></expr></expr_stmt>
 }
\ <expr_stmt><expr><name>No</name> <name>newline</name> <name>at</name> <name>end</name> <name>of</name> <name>file</name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V1JobServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V1JobServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>ac399e923</name><operator>..</operator><literal type="number">5b65791a7</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V1JobServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V1JobServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">1071</literal></expr><operator>,</operator><expr><literal type="number">5</literal> <operator>+</operator><literal type="number">1071</literal></expr><operator>,</operator><expr><literal type="number">12</literal> @@ <specifier>public</specifier> <name>class</name> <name>V1JobServlet</name> extends <name>BaseJobServlet</name> <block>{
             <throw>throw <argument_list>new <argument><expr><call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr></argument></argument_list></throw>;
         }</block></expr></expr_stmt>
     }

    <comment type="block" format="javadoc">/**
     * not supported for v1
     */</comment>
    @<function><type><name>Override</name>
    <specifier>protected</specifier> <name>JSONObject</name></type> <name>updateJob</name><parameter_list>(<parameter><decl><type><name>HttpServletRequest</name></type> <name>request</name></decl></parameter>, <parameter><decl><type><name>HttpServletResponse</name></type> <name>response</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>XServletException</name></expr></argument>,
            <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
        <throw>throw <expr><operator>new</operator> <call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name><name>ErrorCode</name><operator>.</operator><name>E0302</name></name></expr></argument>, <argument><expr><literal type="string">"Not supported in v1"</literal></expr></argument>)</argument_list></call></expr>;</throw>
    </block_content>}</block></function>
 }
diff <expr_stmt><expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V2JobServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V2JobServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">2d26599a2</literal><operator>..</operator><name>e961f3054</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V2JobServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>servlet</name><operator>/</operator><name><name>V2JobServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">22</literal></expr><operator>,</operator><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">22</literal></expr><operator>,</operator><expr><literal type="number">19</literal> @@</expr></expr_stmt> <import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
 <import>import <name><name>javax</name><operator>.</operator><name>servlet</name><operator>.</operator><name>http</name><operator>.</operator><name>HttpServletRequest</name></name>;</import>
 <import>import <name><name>javax</name><operator>.</operator><name>servlet</name><operator>.</operator><name>http</name><operator>.</operator><name>HttpServletResponse</name></name>;</import>
 
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>lang</name><operator>.</operator><name>StringUtils</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>CoordinatorEngine</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>CoordinatorEngineException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>DagEngine</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>DagEngineException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>rest</name><operator>.</operator><name>JsonBean</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>rest</name><operator>.</operator><name>JsonTags</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>rest</name><operator>.</operator><name>RestConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>CoordinatorEngineService</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>DagEngineService</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>Services</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>XConfiguration</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>json</name><operator>.</operator><name>simple</name><operator>.</operator><name>JSONObject</name></name>;</import>
 
 <annotation>@<name>SuppressWarnings</name><argument_list>(<argument><expr><literal type="string">"serial"</literal></expr></argument>)</argument_list></annotation>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">75</literal></expr><operator>,</operator><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">83</literal></expr><operator>,</operator><expr><literal type="number">40</literal> @@ <specifier>public</specifier> <name>class</name> <name>V2JobServlet</name> extends <name>V1JobServlet</name> <block>{
             <throws>throws <argument><expr><name>XServletException</name></expr></argument>, <argument><expr><name>IOException</name> <block>{</block></expr></argument></throws>
         <return>return <expr><call><name><name>super</name><operator>.</operator><name>getJobsByParentId</name></name><argument_list>(<argument><expr><name>request</name></expr></argument>, <argument><expr><name>response</name></expr></argument>)</argument_list></call></expr>;</return>
     }</block></expr></expr_stmt>

    <comment type="block" format="javadoc">/**
     * Update coord job.
     *
     * @param request the request
     * @param response the response
     * @return the JSON object
     * @throws XServletException the x servlet exception
     * @throws IOException Signals that an I/O exception has occurred.
     */</comment>
    <function><annotation>@<name>SuppressWarnings</name><argument_list>(<argument><expr><literal type="string">"unchecked"</literal></expr></argument>)</argument_list></annotation>
    <annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>JSONObject</name></type> <name>updateJob</name><parameter_list>(<parameter><decl><type><name>HttpServletRequest</name></type> <name>request</name></decl></parameter>, <parameter><decl><type><name>HttpServletResponse</name></type> <name>response</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>XServletException</name></expr></argument>,
            <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>CoordinatorEngine</name></type> <name>coordEngine</name> <init>= <expr><call><name><name>Services</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>CoordinatorEngineService</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call>
                <operator>.</operator><call><name>getCoordinatorEngine</name><argument_list>(<argument><expr><call><name>getUser</name><argument_list>(<argument><expr><name>request</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>JSONObject</name></type> <name>json</name> <init>= <expr><operator>new</operator> <call><name>JSONObject</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <try>try <block>{<block_content>
            <decl_stmt><decl><type><name>Configuration</name></type> <name>conf</name><init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>request</name><operator>.</operator><name>getInputStream</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>getResourceName</name><argument_list>(<argument><expr><name>request</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name>boolean</name></type> <name>dryrun</name> <init>= <expr><ternary><condition><expr><call><name><name>StringUtils</name><operator>.</operator><name>isEmpty</name></name><argument_list>(<argument><expr><call><name><name>request</name><operator>.</operator><name>getParameter</name></name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_DRYRUN</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr> ?</condition><then> <expr><literal type="boolean">false</literal></expr>
                    </then><else>: <expr><call><name><name>Boolean</name><operator>.</operator><name>parseBoolean</name></name><argument_list>(<argument><expr><call><name><name>request</name><operator>.</operator><name>getParameter</name></name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_DRYRUN</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></else></ternary></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name>boolean</name></type> <name>showDiff</name> <init>= <expr><ternary><condition><expr><call><name><name>StringUtils</name><operator>.</operator><name>isEmpty</name></name><argument_list>(<argument><expr><call><name><name>request</name><operator>.</operator><name>getParameter</name></name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_SHOWDIFF</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr> ?</condition><then> <expr><literal type="boolean">true</literal></expr>
                    </then><else>: <expr><call><name><name>Boolean</name><operator>.</operator><name>parseBoolean</name></name><argument_list>(<argument><expr><call><name><name>request</name><operator>.</operator><name>getParameter</name></name><argument_list>(<argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_ACTION_SHOWDIFF</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></else></ternary></expr></init></decl>;</decl_stmt>

            <decl_stmt><decl><type><name>String</name></type> <name>diff</name> <init>= <expr><call><name><name>coordEngine</name><operator>.</operator><name>updateJob</name></name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>, <argument><expr><name>dryrun</name></expr></argument>, <argument><expr><name>showDiff</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name>JSONObject</name></type> <name>diffJson</name> <init>= <expr><operator>new</operator> <call><name>JSONObject</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
            <expr_stmt><expr><call><name><name>diffJson</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><name><name>JsonTags</name><operator>.</operator><name>COORD_UPDATE_DIFF</name></name></expr></argument>, <argument><expr><name>diff</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>json</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><name><name>JsonTags</name><operator>.</operator><name>COORD_UPDATE</name></name></expr></argument>, <argument><expr><name>diffJson</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>CoordinatorEngineException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <throw>throw <expr><operator>new</operator> <call><name>XServletException</name><argument_list>(<argument><expr><name><name>HttpServletResponse</name><operator>.</operator><name>SC_BAD_REQUEST</name></name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></catch></try>
        <return>return <expr><name>json</name></expr>;</return>
    </block_content>}</block></function>

 }
diff <expr_stmt><expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>TestCoordUpdateXCommand</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>TestCoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">000000000..99572dec0</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>oozie</name><operator>/</operator><name>command</name><operator>/</operator><name>coord</name><operator>/</operator><name><name>TestCoordUpdateXCommand</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">297</literal> @@</expr></expr_stmt>
<comment type="block" format="javadoc">/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</comment>
<package>package <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>command</name><operator>.</operator><name>coord</name></name>;</package>

<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>File</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>FileWriter</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>Reader</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>StringReader</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>Writer</name></name>;</import>

<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>CoordinatorJobBean</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>ErrorCode</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>XException</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>CoordinatorAction</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>OozieClient</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>client</name><operator>.</operator><name>rest</name><operator>.</operator><name>RestConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>command</name><operator>.</operator><name>CommandException</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>executor</name><operator>.</operator><name>jpa</name><operator>.</operator><name>CoordJobGetJPAExecutor</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>executor</name><operator>.</operator><name>jpa</name><operator>.</operator><name>JPAExecutorException</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>local</name><operator>.</operator><name>LocalOozie</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>JPAService</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>service</name><operator>.</operator><name>Services</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>test</name><operator>.</operator><name>XDataTestCase</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>IOUtils</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>XConfiguration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>oozie</name><operator>.</operator><name>util</name><operator>.</operator><name>XmlUtils</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>jdom</name><operator>.</operator><name>Element</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>jdom</name><operator>.</operator><name>Namespace</name></name>;</import>

<class><specifier>public</specifier> class <name>TestCoordUpdateXCommand</name> <super_list><extends>extends <super><name>XDataTestCase</name></super></extends></super_list> <block>{
    <decl_stmt><decl><type><specifier>private</specifier> <name>Services</name></type> <name>services</name></decl>;</decl_stmt>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>void</name></type> <name>setUp</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <expr_stmt><expr><call><name><name>super</name><operator>.</operator><name>setUp</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>services</name> <operator>=</operator> <operator>new</operator> <call><name>Services</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>services</name><operator>.</operator><name>init</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>LocalOozie</name><operator>.</operator><name>start</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <function><annotation>@<name>Override</name></annotation>
    <type><specifier>protected</specifier> <name>void</name></type> <name>tearDown</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <expr_stmt><expr><call><name><name>services</name><operator>.</operator><name>destroy</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>super</name><operator>.</operator><name>tearDown</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>LocalOozie</name><operator>.</operator><name>stop</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <function><type><specifier>private</specifier> <name>String</name></type> <name>setupCoord</name><parameter_list>(<parameter><decl><type><name>Configuration</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>coordFile</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>CommandException</name></expr></argument>, <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>File</name></type> <name>appPathFile</name> <init>= <expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"coordinator.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Reader</name></type> <name>reader</name> <init>= <expr><call><name><name>IOUtils</name><operator>.</operator><name>getResourceAsReader</name></name><argument_list>(<argument><expr><name>coordFile</name></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><name>appPathFile</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>, <argument><expr><call><name><name>appPathFile</name><operator>.</operator><name>toURI</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>USER_NAME</name></name></expr></argument>, <argument><expr><call><name>getTestUser</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordSubmitXCommand</name></type> <name>sc</name> <init>= <expr><operator>new</operator> <call><name>CoordSubmitXCommand</name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>IOUtils</name><operator>.</operator><name>copyCharStream</name></name><argument_list>(<argument><expr><name>reader</name></expr></argument>, <argument><expr><name>writer</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>sc</name> <operator>=</operator> <operator>new</operator> <call><name>CoordSubmitXCommand</name><argument_list>(<argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <return>return <expr><call><name><name>sc</name><operator>.</operator><name>call</name></name><argument_list>()</argument_list></call></expr>;</return>

    </block_content>}</block></function>

    <comment type="line">// test conf change</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testConfChange</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>Configuration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-multiple-input-instance3.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>addedProperty</name> <init>= <expr><literal type="string">"jobrerun"</literal></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>XConfiguration</name></type> <name>xConf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertNull</name><argument_list>(<argument><expr><call><name><name>xConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>addedProperty</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name>addedProperty</name></expr></argument>, <argument><expr><literal type="string">"true"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><name>xConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordUpdateXCommand</name></type> <name>update</name> <init>= <expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>diff</name> <init>= <expr><call><name><name>update</name><operator>.</operator><name>call</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>xConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><operator>new</operator> <call><name>StringReader</name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getConf</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name><name>xConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>addedProperty</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"true"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>diff</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><literal type="string">"+    &lt;name&gt;jobrerun&lt;/name&gt;"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>diff</name><operator>.</operator><name>contains</name></name><argument_list>(<argument><expr><literal type="string">"+    &lt;value&gt;true&lt;/value&gt;"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <comment type="line">// test definition change</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testDefinitionChange</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>Configuration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>File</name></type> <name>appPathFile1</name> <init>= <expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"coordinator.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-multiple-input-instance3.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Element</name></type> <name>processedJobXml</name> <init>= <expr><call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Namespace</name></type> <name>namespace</name> <init>= <expr><call><name><name>processedJobXml</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>text</name> <init>= <expr><operator>(</operator><operator>(</operator><name>Element</name><operator>)</operator> <call><name><name>processedJobXml</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"input-events"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getChild</name><argument_list>(<argument><expr><literal type="string">"data-in"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call>
                <operator>.</operator><call><name>getChildren</name><argument_list>(<argument><expr><literal type="string">"instance"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>getText</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><name>text</name></expr></argument>, <argument><expr><literal type="string">"${coord:latest(0)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>Reader</name></type> <name>reader</name> <init>= <expr><call><name><name>IOUtils</name><operator>.</operator><name>getResourceAsReader</name></name><argument_list>(<argument><expr><literal type="string">"coord-multiple-input-instance4.xml"</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><name>appPathFile1</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>IOUtils</name><operator>.</operator><name>copyCharStream</name></name><argument_list>(<argument><expr><name>reader</name></expr></argument>, <argument><expr><name>writer</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>, <argument><expr><call><name><name>appPathFile1</name><operator>.</operator><name>toURI</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordUpdateXCommand</name></type> <name>update</name> <init>= <expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>update</name><operator>.</operator><name>call</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>processedJobXml</name> <operator>=</operator> <call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>namespace</name> <operator>=</operator> <call><name><name>processedJobXml</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>text</name> <operator>=</operator> <operator>(</operator><operator>(</operator><name>Element</name><operator>)</operator> <call><name><name>processedJobXml</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"input-events"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getChild</name><argument_list>(<argument><expr><literal type="string">"data-in"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call>
                <operator>.</operator><call><name>getChildren</name><argument_list>(<argument><expr><literal type="string">"instance"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>getText</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><name>text</name></expr></argument>, <argument><expr><literal type="string">"${coord:future(0, 1)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <comment type="line">// test fail... error in coord definition</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testCoordDefinitionChangeError</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>Configuration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>File</name></type> <name>appPathFile1</name> <init>= <expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"coordinator.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-multiple-input-instance3.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Element</name></type> <name>processedJobXml</name> <init>= <expr><call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Namespace</name></type> <name>namespace</name> <init>= <expr><call><name><name>processedJobXml</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>text</name> <init>= <expr><operator>(</operator><operator>(</operator><name>Element</name><operator>)</operator> <call><name><name>processedJobXml</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"input-events"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getChild</name><argument_list>(<argument><expr><literal type="string">"data-in"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call>
                <operator>.</operator><call><name>getChildren</name><argument_list>(<argument><expr><literal type="string">"instance"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>getText</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><name>text</name></expr></argument>, <argument><expr><literal type="string">"${coord:latest(0)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>Reader</name></type> <name>reader</name> <init>= <expr><call><name><name>IOUtils</name><operator>.</operator><name>getResourceAsReader</name></name><argument_list>(<argument><expr><literal type="string">"coord-multiple-input-instance1.xml"</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><name>appPathFile1</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>IOUtils</name><operator>.</operator><name>copyCharStream</name></name><argument_list>(<argument><expr><name>reader</name></expr></argument>, <argument><expr><name>writer</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>, <argument><expr><call><name><name>appPathFile1</name><operator>.</operator><name>toURI</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordUpdateXCommand</name></type> <name>update</name> <init>= <expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><call><name><name>update</name><operator>.</operator><name>call</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">" should not come here"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>contains</name><argument_list>(<argument><expr><literal type="string">"E1021: Coord Action Input Check Error"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
    </block_content>}</block></function>

    <comment type="line">// test fail... trying to set unsupported field.</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testCoordDefUnsupportedChange</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><specifier>final</specifier> <name>XConfiguration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"start"</literal></expr></argument>, <argument><expr><literal type="string">"2009-02-01T01:00Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"end"</literal></expr></argument>, <argument><expr><literal type="string">"2012-02-03T23:59Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"unit"</literal></expr></argument>, <argument><expr><literal type="string">"UTC"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"name"</literal></expr></argument>, <argument><expr><literal type="string">"NAME"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"throttle"</literal></expr></argument>, <argument><expr><literal type="string">"12"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"concurrency"</literal></expr></argument>, <argument><expr><literal type="string">"12"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"execution"</literal></expr></argument>, <argument><expr><literal type="string">"FIFO"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"timeout"</literal></expr></argument>, <argument><expr><literal type="string">"10"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-update-test.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <decl_stmt><decl><type><name>Configuration</name></type> <name>newConf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"start"</literal></expr></argument>, <argument><expr><literal type="string">"2010-02-01T01:00Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <try>try <block>{<block_content>
            <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">" should not come here"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>XException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>contains</name><argument_list>(<argument><expr><literal type="string">"Start time can't be changed"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>

        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"end"</literal></expr></argument>, <argument><expr><literal type="string">"2015-02-03T23:59Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">" should not come here"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>XException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>contains</name><argument_list>(<argument><expr><literal type="string">"End time can't be changed"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"name"</literal></expr></argument>, <argument><expr><literal type="string">"test"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">" should not come here"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>XException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>contains</name><argument_list>(<argument><expr><literal type="string">"Coord name can't be changed"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>

        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"unit"</literal></expr></argument>, <argument><expr><literal type="string">"America/New_York"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <try>try <block>{<block_content>
            <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">" should not come here"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>XException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>contains</name><argument_list>(<argument><expr><literal type="string">"TimeZone can't be changed"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
    </block_content>}</block></function>

    <comment type="line">// Test update control param.</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testUpdateControl</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><specifier>final</specifier> <name>XConfiguration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"start"</literal></expr></argument>, <argument><expr><literal type="string">"2009-02-01T01:00Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"end"</literal></expr></argument>, <argument><expr><literal type="string">"2012-02-03T23:59Z"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"unit"</literal></expr></argument>, <argument><expr><literal type="string">"UTC"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"name"</literal></expr></argument>, <argument><expr><literal type="string">"NAME"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"throttle"</literal></expr></argument>, <argument><expr><literal type="string">"12"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"concurrency"</literal></expr></argument>, <argument><expr><literal type="string">"12"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"execution"</literal></expr></argument>, <argument><expr><literal type="string">"FIFO"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"timeout"</literal></expr></argument>, <argument><expr><literal type="string">"7"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-update-test.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">12</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getMatThrottling</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">12</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getConcurrency</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">7</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getTimeout</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"FIFO"</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getExecution</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>Configuration</name></type> <name>newConf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"throttle"</literal></expr></argument>, <argument><expr><literal type="string">"8"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">8</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getMatThrottling</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"concurrency"</literal></expr></argument>, <argument><expr><literal type="string">"5"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">5</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getConcurrency</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"timeout"</literal></expr></argument>, <argument><expr><literal type="string">"10"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="number">10</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getTimeout</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>newConf</name> <operator>=</operator> <operator>new</operator> <call><name>XConfiguration</name><argument_list>(<argument><expr><call><name><name>conf</name><operator>.</operator><name>toProperties</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>newConf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><literal type="string">"execution"</literal></expr></argument>, <argument><expr><literal type="string">"LIFO"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>newConf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"LIFO"</literal></expr></argument>, <argument><expr><call><name><name>job</name><operator>.</operator><name>getExecution</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></function>

    <comment type="line">// test coord re-run with refresh. will use the updated coord definition.</comment>
    <function><type><specifier>public</specifier> <name>void</name></type> <name>testReRunRefresh</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
        <decl_stmt><decl><type><name>Configuration</name></type> <name>conf</name> <init>= <expr><operator>new</operator> <call><name>XConfiguration</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>File</name></type> <name>appPathFile1</name> <init>= <expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><call><name>getTestCaseDir</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"coordinator.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>jobId</name> <init>= <expr><call><name>setupCoord</name><argument_list>(<argument><expr><name>conf</name></expr></argument>, <argument><expr><literal type="string">"coord-multiple-input-instance3.xml"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>sleep</name><argument_list>(<argument><expr><literal type="number">1000</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><specifier>final</specifier> <name>int</name></type> <name>actionNum</name> <init>= <expr><literal type="number">1</literal></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><specifier>final</specifier> <name>String</name></type> <name>actionId</name> <init>= <expr><name>jobId</name> <operator>+</operator> <literal type="string">"@"</literal> <operator>+</operator> <name>actionNum</name></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><specifier>final</specifier> <name>OozieClient</name></type> <name>coordClient</name> <init>= <expr><call><name><name>LocalOozie</name><operator>.</operator><name>getCoordClient</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>waitFor</name><argument_list>(<argument><expr><literal type="number">120</literal> <operator>*</operator> <literal type="number">1000</literal></expr></argument>, <argument><expr><operator>new</operator> <class><super><name>Predicate</name></super><argument_list>()</argument_list> <block>{
            <function><annotation>@<name>Override</name></annotation>
            <type><specifier>public</specifier> <name>boolean</name></type> <name>evaluate</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
                <decl_stmt><decl><type><name>CoordinatorAction</name></type> <name>bean</name> <init>= <expr><call><name><name>coordClient</name><operator>.</operator><name>getCoordActionInfo</name></name><argument_list>(<argument><expr><name>actionId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <return>return <expr><operator>(</operator><call><name><name>bean</name><operator>.</operator><name>getStatus</name></name><argument_list>()</argument_list></call> <operator>==</operator> <name><name>CoordinatorAction</name><operator>.</operator><name>Status</name><operator>.</operator><name>WAITING</name></name> <operator>||</operator> <call><name><name>bean</name><operator>.</operator><name>getStatus</name></name><argument_list>()</argument_list></call> <operator>==</operator> <name><name>CoordinatorAction</name><operator>.</operator><name>Status</name><operator>.</operator><name>SUBMITTED</name></name><operator>)</operator></expr>;</return>
            </block_content>}</block></function>
        }</block></class></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordinatorAction</name></type> <name>bean</name> <init>= <expr><call><name><name>coordClient</name><operator>.</operator><name>getCoordActionInfo</name></name><argument_list>(<argument><expr><name>actionId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name><name>bean</name><operator>.</operator><name>getMissingDependencies</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"!!${coord:latest(0)}#${coord:latest(-1)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Reader</name></type> <name>reader</name> <init>= <expr><call><name><name>IOUtils</name><operator>.</operator><name>getResourceAsReader</name></name><argument_list>(<argument><expr><literal type="string">"coord-multiple-input-instance4.xml"</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>FileWriter</name><argument_list>(<argument><expr><name>appPathFile1</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name><name>IOUtils</name><operator>.</operator><name>copyCharStream</name></name><argument_list>(<argument><expr><name>reader</name></expr></argument>, <argument><expr><name>writer</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>conf</name><operator>.</operator><name>set</name></name><argument_list>(<argument><expr><name><name>OozieClient</name><operator>.</operator><name>COORDINATOR_APP_PATH</name></name></expr></argument>, <argument><expr><call><name><name>appPathFile1</name><operator>.</operator><name>toURI</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordUpdateXCommand</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><name>conf</name></expr></argument>, <argument><expr><name>jobId</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>job</name> <operator>=</operator> <call><name>getCoordJobs</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>Element</name></type> <name>processedJobXml</name> <init>= <expr><call><name><name>XmlUtils</name><operator>.</operator><name>parseXml</name></name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getJobXml</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>Namespace</name></type> <name>namespace</name> <init>= <expr><call><name><name>processedJobXml</name><operator>.</operator><name>getNamespace</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>String</name></type> <name>text</name> <init>= <expr><operator>(</operator><operator>(</operator><name>Element</name><operator>)</operator> <call><name><name>processedJobXml</name><operator>.</operator><name>getChild</name></name><argument_list>(<argument><expr><literal type="string">"input-events"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getChild</name><argument_list>(<argument><expr><literal type="string">"data-in"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call>
                <operator>.</operator><call><name>getChildren</name><argument_list>(<argument><expr><literal type="string">"instance"</literal></expr></argument>, <argument><expr><name>namespace</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>getText</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><name>text</name></expr></argument>, <argument><expr><literal type="string">"${coord:future(0, 1)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><operator>new</operator> <call><name>CoordActionsKillXCommand</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_COORD_SCOPE_ACTION</name></name></expr></argument>, <argument><expr><call><name><name>Integer</name><operator>.</operator><name>toString</name></name><argument_list>(<argument><expr><name>actionNum</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>call</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>coordClient</name><operator>.</operator><name>reRunCoord</name></name><argument_list>(<argument><expr><name>jobId</name></expr></argument>, <argument><expr><name><name>RestConstants</name><operator>.</operator><name>JOB_COORD_SCOPE_ACTION</name></name></expr></argument>, <argument><expr><call><name><name>Integer</name><operator>.</operator><name>toString</name></name><argument_list>(<argument><expr><name>actionNum</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>bean</name> <operator>=</operator> <call><name><name>coordClient</name><operator>.</operator><name>getCoordActionInfo</name></name><argument_list>(<argument><expr><name>actionId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>sleep</name><argument_list>(<argument><expr><literal type="number">1000</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name><name>bean</name><operator>.</operator><name>getMissingDependencies</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"!!${coord:future(0, 1)}"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></function>

    <function><type><specifier>private</specifier> <name>CoordinatorJobBean</name></type> <name>getCoordJobs</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>jobId</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <try>try <block>{<block_content>
            <decl_stmt><decl><type><name>JPAService</name></type> <name>jpaService</name> <init>= <expr><call><name><name>Services</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>get</name><argument_list>(<argument><expr><name><name>JPAService</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name>CoordinatorJobBean</name></type> <name>job</name> <init>= <expr><call><name><name>jpaService</name><operator>.</operator><name>execute</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>CoordJobGetJPAExecutor</name><argument_list>(<argument><expr><name>jobId</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <return>return <expr><name>job</name></expr>;</return>
        </block_content>}</block>
        <catch>catch <parameter_list>(<parameter><decl><type><name>JPAExecutorException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
            <expr_stmt><expr><call><name>fail</name><argument_list>(<argument><expr><literal type="string">"Job ID "</literal> <operator>+</operator> <name>jobId</name> <operator>+</operator> <literal type="string">" was not stored properly in db"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block></catch></try>
        <return>return <expr><literal type="null">null</literal></expr>;</return>
    </block_content>}</block></function>
}</block></class>
<expr_stmt><expr><operator>\</operator> <name>No</name> <name>newline</name> <name>at</name> <name>end</name> <name>of</name> <name>file</name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>coord</name><operator>-</operator><name>update</name><operator>-</operator><name><name>test</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>coord</name><operator>-</operator><name>update</name><operator>-</operator><name><name>test</name><operator>.</operator><name>xml</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">000000000..28ec1f73f</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>coord</name><operator>-</operator><name>update</name><operator>-</operator><name><name>test</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">59</literal> @@
<operator>&lt;</operator><operator>!</operator><operator>--</operator>
  <name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <call><name>Foundation</name> <argument_list>(<argument><expr><name>ASF</name></expr></argument>)</argument_list></call> <name>under</name> <name>one</name>
  <name>or</name> <name>more</name> <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name>
  <name>distributed</name> <name>with</name> <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal> <operator>(</operator><name>the</name>
  <literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name>
  <name>with</name> <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

       <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

  <name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
  <name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
  <expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
  <name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
  limitations under the License.
--&gt;
&lt;coordinator-app xmlns="uri:oozie:coordinator:0.4" name="${name}" frequency="${coord:days(1)}" start="${start}" end="${end}" timezone="${unit}"&gt;
  &lt;controls&gt;
    &lt;timeout&gt;$<block>{<block_content><expr><name>timeout</name></expr></block_content>}</block></for><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>timeout</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>concurrency</name><operator>&gt;</operator><name>$</name><block>{<expr><name>concurrency</name></expr>}</block><operator>&lt;</operator><operator>/</operator><name>concurrency</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>execution</name><operator>&gt;</operator><name>$</name><block>{<expr><name>execution</name></expr>}</block><operator>&lt;</operator><operator>/</operator><name>execution</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>throttle</name><operator>&gt;</operator><name>$</name><block>{<expr><name>throttle</name></expr>}</block><operator>&lt;</operator><operator>/</operator><name>throttle</name><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>controls</name><operator>&gt;</operator>
  <operator>&lt;</operator><name>datasets</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>dataset</name> <name>name</name><operator>=</operator><literal type="string">"a"</literal> <name>frequency</name><operator>=</operator><literal type="string">"${coord:days(7)}"</literal> <name>initial</name><operator>-</operator><name>instance</name><operator>=</operator><literal type="string">"2009-02-01T01:00Z"</literal> <name>timezone</name><operator>=</operator><literal type="string">"UTC"</literal><operator>&gt;</operator>
        <operator>&lt;</operator><name>uri</name><operator>-</operator><name>template</name><operator>&gt;</operator><name>file</name><operator>:</operator><comment type="line" format="doxygen">///tmp/coord/workflows/${YEAR}/${DAY}&lt;/uri-template&gt;</comment>
    <operator>&lt;</operator><operator>/</operator><name>dataset</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>dataset</name> <name>name</name><operator>=</operator><literal type="string">"local_a"</literal> <name>frequency</name><operator>=</operator><literal type="string">"${coord:days(7)}"</literal> <name>initial</name><operator>-</operator><name>instance</name><operator>=</operator><literal type="string">"2009-02-01T01:00Z"</literal> <name>timezone</name><operator>=</operator><literal type="string">"UTC"</literal><operator>&gt;</operator>
        <operator>&lt;</operator><name>uri</name><operator>-</operator><name>template</name><operator>&gt;</operator><name>file</name><operator>:</operator><comment type="line" format="doxygen">///tmp/coord/workflows/${YEAR}/${DAY}&lt;/uri-template&gt;</comment>
    <operator>&lt;</operator><operator>/</operator><name>dataset</name><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>datasets</name><operator>&gt;</operator>
  <operator>&lt;</operator><name>input</name><operator>-</operator><name>events</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>data</name><operator>-</operator><name>in</name> <name>name</name><operator>=</operator><literal type="string">"A"</literal> <name>dataset</name><operator>=</operator><literal type="string">"a"</literal><operator>&gt;</operator>
    <operator>&lt;</operator><name>instance</name><operator>&gt;</operator><name>$</name><block>{<expr><name>coord</name><operator>:</operator><call><name>latest</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>}</block><operator>&lt;</operator><operator>/</operator><name>instance</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>instance</name><operator>&gt;</operator><name>$</name><block>{<expr><name>coord</name><operator>:</operator><call><name>latest</name><argument_list>(<argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>}</block><operator>&lt;</operator><operator>/</operator><name>instance</name><operator>&gt;</operator>
    <operator>&lt;</operator><operator>/</operator><name>data</name><operator>-</operator><name>in</name><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>input</name><operator>-</operator><name>events</name><operator>&gt;</operator>
  <operator>&lt;</operator><name>output</name><operator>-</operator><name>events</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>data</name><operator>-</operator><name>out</name> <name>name</name><operator>=</operator><literal type="string">"LOCAL_A"</literal> <name>dataset</name><operator>=</operator><literal type="string">"local_a"</literal><operator>&gt;</operator>
      <operator>&lt;</operator><name>instance</name><operator>&gt;</operator><name>$</name><block>{<expr><name>coord</name><operator>:</operator><call><name>current</name><argument_list>(<argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>}</block><operator>&lt;</operator><operator>/</operator><name>instance</name><operator>&gt;</operator>
    <operator>&lt;</operator><operator>/</operator><name>data</name><operator>-</operator><name>out</name><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>output</name><operator>-</operator><name>events</name><operator>&gt;</operator>
  <operator>&lt;</operator><name>action</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>workflow</name><operator>&gt;</operator>
      <operator>&lt;</operator><name>app</name><operator>-</operator><name>path</name><operator>&gt;</operator><name>hdfs</name><operator>:</operator><comment type="line" format="doxygen">///tmp/workflows/&lt;/app-path&gt;</comment>
      <operator>&lt;</operator><name>configuration</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>property</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>inputA</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>value</name><operator>&gt;</operator><name>$</name><block>{<expr><name>coord</name><operator>:</operator><call><name>dataIn</name><argument_list>(<argument><expr><literal type="char">'A'</literal></expr></argument>)</argument_list></call></expr>}</block><operator>&lt;</operator><operator>/</operator><name>value</name><operator>&gt;</operator>
        <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>property</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>inputB</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>value</name><operator>&gt;</operator><name>$</name><block>{<expr><name>coord</name><operator>:</operator><call><name>dataOut</name><argument_list>(<argument><expr><literal type="char">'LOCAL_A'</literal></expr></argument>)</argument_list></call></expr>}</block><operator>&lt;</operator><operator>/</operator><name>value</name><operator>&gt;</operator>
        <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>
      <operator>&lt;</operator><operator>/</operator><name>configuration</name><operator>&gt;</operator>
    <operator>&lt;</operator><operator>/</operator><name>workflow</name><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>action</name><operator>&gt;</operator>
<operator>&lt;</operator><operator>/</operator><name>coordinator</name><operator>-</operator><name>app</name><operator>&gt;</operator>
<operator>\</operator> <name>No</name> <name>newline</name> <name>at</name> <name>end</name> <name>of</name> <name>file</name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>DG_CommandLineTool</name><operator>.</operator><name>twiki</name></name> <name>b</name><operator>/</operator><name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>DG_CommandLineTool</name><operator>.</operator><name>twiki</name></name>
<name>index</name> <literal type="number">5819b7120</literal><operator>..</operator><literal type="number">222389e79</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>DG_CommandLineTool</name><operator>.</operator><name>twiki</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>docs</name><operator>/</operator><name>src</name><operator>/</operator><name>site</name><operator>/</operator><name>twiki</name><operator>/</operator><name><name>DG_CommandLineTool</name><operator>.</operator><name>twiki</name></name>
@@ <operator>-</operator><literal type="number">66</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">66</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>usage</name><operator>:</operator>
                 <operator>-</operator><name><name>value</name> <argument_list type="generic">&lt;<argument><name>arg</name></argument>&gt;</argument_list></name>          <operator>new</operator> <name>endtime</name><operator>/</operator><name>concurrency</name><operator>/</operator><name>pausetime</name> <name>value</name></expr></expr_stmt> <for>for changing a
                                       coordinator job<empty_stmt>;</empty_stmt></for> <expr_stmt><expr><operator>new</operator> <name>pausetime</name> <name>value</name></expr></expr_stmt> <for>for changing a bundle job
                 -verbose              verbose mode
                -update               Update coordinator definition and properties
 .
       oozie jobs &lt;OPTIONS&gt; : jobs status
                  -auth &lt;arg&gt;          select authentication type [SIMPLE<operator>|</operator>KERBEROS]
@@ -634<operator>,</operator><expr_stmt><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">635</literal></expr><operator>,</operator><expr><literal type="number">59</literal> @@ <name>specified</name> <name>path</name> <name>must</name> <name>be</name> <name>an</name> <name>HDFS</name> <name><name>path</name><operator>.</operator>
 <name>If</name></name> <name>the</name> <name>workflow</name> <name>is</name> <call><name>accepted</name> <argument_list>(<argument><expr><name><name>i</name><operator>.</operator><name>e</name><operator>.</operator> <name>Oozie</name></name> <name>is</name> <name>able</name> <name>to</name> <name>successfully</name> <name>read</name> <name>and</name> <name>parse</name> <name>it</name></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><name>it</name> <name>will</name></expr></expr_stmt></for> <return>return <expr><operator>=</operator><literal type="string">"OK"</literal><operator>=</operator></expr>;</return> <expr_stmt><expr><name>otherwise</name></expr><operator>,</operator> <expr><name>it</name> <name>will</name></expr></expr_stmt> <return>return
 <expr><name>an</name> <name>error</name> <name>message</name> <name>describing</name> <name>why</name> <name>it</name> <name>was</name> <name><name>rejected</name><operator>.</operator></name>
 
--<operator>-</operator><operator>++</operator><operator>+</operator> <name>Updating</name> <name>coordinator</name> <name>definition</name> <name>and</name> <name>properties</name>
<name>Existing</name> <name>coordinator</name> <name>definition</name> <name>will</name> <name>be</name> <name>replaced</name> <name>by</name> <operator>new</operator> <name><name>definition</name><operator>.</operator> <name>The</name></name> <name>refreshed</name> <name>coordinator</name> <name>would</name> <name>keep</name> <name>the</name> <name>same</name> <name>coordinator</name> <name>ID</name></expr><operator>,</operator> <expr><name>state</name></expr><operator>,</operator> <expr><name>and</name> <name>coordinator</name> <name><name>actions</name><operator>.</operator>
<name>All</name></name> <name>created</name> <name>coord</name> <call><name>action</name><argument_list>(<argument><expr><name>including</name> <name>in</name> <name>WAITING</name></expr></argument>)</argument_list></call> <name>will</name> <name>use</name> <name>old</name> <name><name>configuration</name><operator>.</operator>
<name>One</name></name> <name>can</name> <name>rerun</name> <name>actions</name> <name>with</name> <operator>-</operator><name>refresh</name> <name>option</name></expr><operator>,</operator> <expr><operator>-</operator><name>refresh</name> <name>option</name> <name>will</name> <name>use</name> <operator>new</operator> <name>configuration</name> <name>to</name> <name>rerun</name> <name>coord</name> <name>action</name>

<name>Update</name> <name>command</name> <name>also</name> <name>verifies</name> <name>coordinator</name> <name>definition</name> <name>like</name> <name>submit</name> <name>command</name></expr><operator>,</operator></return> <if_stmt><if>if there is any issue with definition<operator>,</operator> <expr_stmt><expr><name>update</name> <name>will</name> <name><name>fail</name><operator>.</operator>
<name>Update</name></name> <name>command</name> <name>with</name> <operator>-</operator><name>dryrun</name> <name>will</name> <name>show</name> <name>coordinator</name> <name>definition</name> <name>and</name> <name>properties</name> <name><name>differences</name><operator>.</operator>
<name>Config</name></name> <name>option</name> <name>is</name> <name>optional</name></expr><operator>,</operator></expr_stmt></if></if_stmt> <if_stmt><if>if not specified existing coordinator property is used to find coordinator path.

Update command doesn'</if></if_stmt>t allow update of coordinator name, frequency, start time, end time and timezone and will fail on an attempt to change any of them. To change end time of coordinator use the =-change= command

&lt;verbatim&gt;
$ oozie job -oozie http://localhost:11000/oozie -config job.properties -update 0000005-140402104721140-oozie-puru-C -dryrun

**********Job definition changes**********
@@ -3,8 +3,8 @@
     &lt;concurrency&gt;1&lt;/concurrency&gt;
   &lt;/controls&gt;
   &lt;input-events&gt;
-    &lt;data-in name="input" dataset="raw-logs"&gt;
-      &lt;dataset name="raw-logs" frequency="20" initial-instance="2010-01-01T00:00Z" timezone="UTC" freq_timeunit="MINUTE" end_of_duration="NONE"&gt;
+    &lt;data-in name="input" dataset="raw-logs-rename"&gt;
+      &lt;dataset name="raw-logs-rename" frequency="20" initial-instance="2010-01-01T00:00Z" timezone="UTC" freq_timeunit="MINUTE" end_of_duration="NONE"&gt;
         &lt;uri-template&gt;hdfs://localhost:9000/user/purushah/examples/input-data/rawLogs/&lt;/uri-template&gt;
         &lt;done-flag /&gt;
       &lt;/dataset&gt;
**********************************
**********Job conf changes**********
@@ -8,10 +8,6 @@
     &lt;value&gt;hdfs://localhost:9000/user/purushah/examples/apps/aggregator/coordinator.xml&lt;/value&gt;
   &lt;/property&gt;
   &lt;property&gt;
-    &lt;name&gt;old&lt;/name&gt;
-    &lt;value&gt;test&lt;/value&gt;
-  &lt;/property&gt;
-  &lt;property&gt;
     &lt;name&gt;user.name&lt;/name&gt;
     &lt;value&gt;purushah&lt;/value&gt;
   &lt;/property&gt;
@@ -28,6 +24,10 @@
     &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
   &lt;/property&gt;
   &lt;property&gt;
+    &lt;name&gt;adding&lt;/name&gt;
+    &lt;value&gt;new&lt;/value&gt;
+  &lt;/property&gt;
+  &lt;property&gt;
     &lt;name&gt;jobTracker&lt;/name&gt;
     &lt;value&gt;localhost:9001&lt;/value&gt;
   &lt;/property&gt;
**********************************
&lt;/verbatim&gt;

 ---++ Jobs Operations
 
 ---+++ Checking the Status of multiple Workflow Jobs
diff --git a/docs/src/site/twiki/WebServicesAPI.twiki b/docs/src/site/twiki/WebServicesAPI.twiki
index 351699de6..c93fc7fd5 100644
-- a/docs/src/site/twiki/WebServicesAPI.twiki
++ b/docs/src/site/twiki/WebServicesAPI.twiki
@@ -876,7 +876,7 @@ Content-Type: application/json;charset=UTF-8
 
 ---++++ Managing a Job
 
A HTTP PUT request starts, suspends, resumes, kills, or dryruns a job.
A HTTP PUT request starts, suspends, resumes, kills, update or dryruns a job.
 
 *Request:*
 
@@ -1050,6 +1050,36 @@ PUT /oozie/v1/job/job-3?action=change&amp;value=endtime=2011-12-01T05:00Z;concurrenc
 HTTP/1.1 200 OK
 &lt;/verbatim&gt;
 
---+++++ Updating coordinator definition and properties
Existing coordinator definition and properties will be replaced by new definition and properties. Refer [[DG_CommandLineTool#Updating_coordinator_definition_and_properties][Updating coordinator definition and properties]]

&lt;verbatim&gt;
PUT oozie/v2/job/0000000-140414102048137-oozie-puru-C?action=update
&lt;/verbatim&gt;

*Response:*

&lt;verbatim&gt;
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{"update":
     {"diff":"**********Job definition changes**********\n******************************************\n**********Job conf changes****************\n@@ -8,16 +8,12 @@\n
          &lt;value&gt;hdfs:\/\/localhost:9000\/user\/purushah\/examples\/apps\/aggregator\/coordinator.xml&lt;\/value&gt;\r\n   &lt;\/property&gt;\r\n   &lt;property&gt;\r\n
          -    &lt;name&gt;user.name&lt;\/name&gt;\r\n
          -    &lt;value&gt;purushah&lt;\/value&gt;\r\n
          -    &lt;\/property&gt;\r\n
          -  &lt;property&gt;\r\n     &lt;name&gt;start&lt;\/name&gt;\r\n
               &lt;value&gt;2010-01-01T01:00Z&lt;\/value&gt;\r\n   &lt;\/property&gt;\r\n   &lt;property&gt;\r\n
          -    &lt;name&gt;newproperty&lt;\/name&gt;\r\n
          -    &lt;value&gt;new&lt;\/value&gt;\r\n
          +    &lt;name&gt;user.name&lt;\/name&gt;\r\n
          +    &lt;value&gt;purushah&lt;\/value&gt;\r\n   &lt;\/property&gt;\r\n   &lt;property&gt;\r\n
               &lt;name&gt;queueName&lt;\/name&gt;\r\n******************************************\n"
      }
}
&lt;/verbatim&gt;


 ---++++ Job Information
 
 A HTTP GET request retrieves the job information.
diff --git a/pom.xml b/pom.xml
index cb10007b0..65d7b895d 100644
-- a/pom.xml
++ b/pom.xml
@@ -780,6 +780,12 @@
                 &lt;version&gt;4.01&lt;/version&gt;
             &lt;/dependency&gt;
 
            &lt;dependency&gt;
                &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;
                &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;
                &lt;version&gt;3.3.1.201403241930-r&lt;/version&gt;
            &lt;/dependency&gt;

             &lt;dependency&gt;
                 &lt;groupId&gt;org.apache.oozie&lt;/groupId&gt;
                 &lt;artifactId&gt;oozie-hadoop-utils&lt;/artifactId&gt;
diff --git a/release-log.txt b/release-log.txt
index 07a4c9959..1a115594a 100644
-- a/release-log.txt
++ b/release-log.txt
@@ -1,5 +1,6 @@
 -- Oozie 4.1.0 release (trunk - unreleased)
 
OOZIE-1769 An option to update coord properties/definition (puru via rohini)
 OOZIE-1796 Job status should not transition from KILLED (puru via rohini)
 OOZIE-1781 UI - Last Modified time is not displayed for coord action in coord job info grid (puru via mona)
 OOZIE-1792 Ability to kill bundle stuck in RUNNING due to inconsistent pending states (rohini)
- 
2.19.1.windows.1

</unit>
