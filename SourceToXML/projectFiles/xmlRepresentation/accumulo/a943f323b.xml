<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/accumulo/a943f323b.java"><expr_stmt><expr><name>From</name> <name>a943f323b6ef9a614edee55c075eb63567b5c80a</name> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>Christopher</name> <name><name>Tubbs</name> <argument_list type="generic">&lt;<argument><name>ctubbsii</name><annotation>@<name><name>apache</name><operator>.</operator><name>org</name></name></annotation></argument>&gt;</argument_list></name>
<name>Date</name><operator>:</operator> <name>Fri</name></expr><operator>,</operator> <expr><literal type="number">19</literal> <name>Jul</name> <literal type="number">2013</literal> <literal type="number">19</literal><operator>:</operator><literal type="number">05</literal><operator>:</operator><literal type="number">22</literal> <operator>-</operator><literal type="number">0400</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>ACCUMULO</name><operator>-</operator><literal type="number">1132</literal> <name>Provide</name> <name>AuthenticationToken</name> <name>type</name></expr></expr_stmt> <for>for system
 user

--
 .../client/admin/SecurityOperationsImpl.java  <operator>|</operator>   2 +-
 .../core/client/impl/ConnectorImpl.java       <operator>|</operator>   5 +-
 .../client/security/tokens/PasswordToken.java <operator>|</operator>   7 +-
 .../core/security/CredentialHelper.java       <operator>|</operator>   2 +-
 .../accumulo/core/security/Credentials.java   <operator>|</operator>  18 +-
 server/pom.xml                                <operator>|</operator>   6 +
 .../server/client/ClientServiceHandler.java   <operator>|</operator>  14 +-
 .../server/client/HdfsZooInstance.java        <operator>|</operator>   3 -
 .../client/security/token/SystemToken.java    <operator>|</operator>  30 ---
 .../gc/GarbageCollectWriteAheadLogs.java      <operator>|</operator>   8 +-
 .../server/gc/SimpleGarbageCollector.java     <operator>|</operator>   9 +-
 .../server/master/LiveTServerSet.java         <operator>|</operator>  24 +-
 .../apache/accumulo/server/master/Master.java <operator>|</operator>   8 +-
 .../server/master/TabletGroupWatcher.java     <operator>|</operator>  12 +-
 .../master/balancer/TableLoadBalancer.java    <operator>|</operator>   4 +-
 .../master/balancer/TabletBalancer.java       <operator>|</operator>   8 +-
 .../master/state/MetaDataStateStore.java      <operator>|</operator>   4 +-
 .../server/master/tableOps/BulkImport.java    <operator>|</operator>   4 +-
 .../server/master/tableOps/CloneTable.java    <operator>|</operator>  10 +-
 .../server/master/tableOps/CreateTable.java   <operator>|</operator>  12 +-
 .../server/master/tableOps/DeleteTable.java   <operator>|</operator>   6 +-
 .../server/master/tableOps/ImportTable.java   <operator>|</operator>   8 +-
 .../accumulo/server/monitor/Monitor.java      <operator>|</operator>   6 +-
 .../monitor/servlets/TServersServlet.java     <operator>|</operator>  18 +-
 .../monitor/servlets/TablesServlet.java       <operator>|</operator>   6 +-
 .../server/problems/ProblemReport.java        <operator>|</operator>   6 +-
 .../server/problems/ProblemReports.java       <operator>|</operator>   8 +-
 .../security/AuditedSecurityOperation.java    <operator>|</operator>   2 +-
 .../server/security/SecurityOperation.java    <operator>|</operator> 207 ++++++++----------
 ...yConstants.java =&gt; SystemCredentials.java</for>} | <expr_stmt><expr><literal type="number">113</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>--</operator><operator>--</operator>
 <operator>...</operator><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>Tablet</name><operator>.</operator><name>java</name></name>  <operator>|</operator>  <literal type="number">34</literal> <operator>+</operator><operator>--</operator>
 <operator>...</operator><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>TabletServer</name><operator>.</operator><name>java</name></name>     <operator>|</operator>  <literal type="number">78</literal> <operator>++</operator><operator>++</operator><operator>--</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Admin</name><operator>.</operator><name>java</name></name>    <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>FindOfflineTablets</name><operator>.</operator><name>java</name></name>       <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Initialize</name><operator>.</operator><name>java</name></name>      <operator>|</operator>   <literal type="number">4</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>MetadataTableUtil</name><operator>.</operator><name>java</name></name>        <operator>|</operator>  <literal type="number">16</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentialsTest</name><operator>.</operator><name>java</name></name>       <operator>|</operator>  <literal type="number">67</literal> <operator>++</operator><operator>++</operator><operator>++</operator>
 <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>accumulo</name><operator>-</operator><name><name>site</name><operator>.</operator><name>xml</name></name>   <operator>|</operator>  <literal type="number">32</literal> <operator>++</operator><operator>+</operator>
 <operator>...</operator><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name><name>GetMasterStats</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>continuous</name><operator>/</operator><name><name>ContinuousStatsCollector</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">7</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>test</name><operator>/</operator><name>functional</name><operator>/</operator><name><name>SplitRecoveryTest</name><operator>.</operator><name>java</name></name>    <operator>|</operator>  <literal type="number">26</literal> <operator>+</operator><operator>--</operator>
 <operator>...</operator><operator>/</operator><name>metadata</name><operator>/</operator><name><name>MetadataBatchScanTest</name><operator>.</operator><name>java</name></name>       <operator>|</operator>   <literal type="number">6</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>test</name><operator>/</operator><name>performance</name><operator>/</operator><name>thrift</name><operator>/</operator><name><name>NullTserver</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">4</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>test</name><operator>/</operator><name>randomwalk</name><operator>/</operator><name>concurrent</name><operator>/</operator><name><name>Shutdown</name><operator>.</operator><name>java</name></name>  <operator>|</operator>  <literal type="number">24</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>test</name><operator>/</operator><name>randomwalk</name><operator>/</operator><name>concurrent</name><operator>/</operator><name><name>StartAll</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">8</literal> <operator>+</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>randomwalk</name><operator>/</operator><name>security</name><operator>/</operator><name><name>WalkingSecurity</name><operator>.</operator><name>java</name></name>  <operator>|</operator>   <literal type="number">3</literal> <operator>+</operator><operator>-</operator>
 <literal type="number">46</literal> <name>files</name> <name>changed</name></expr><operator>,</operator> <expr><literal type="number">484</literal> <call><name>insertions</name><argument_list>(<argument><expr><operator>+</operator></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><literal type="number">413</literal> <call><name>deletions</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>
 <name>delete</name> <name>mode</name> <literal type="number">100644</literal> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>token</name><operator>/</operator><name><name>SystemToken</name><operator>.</operator><name>java</name></name>
 <name>rename</name> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><block>{<expr><name><name>SecurityConstants</name><operator>.</operator><name>java</name></name> <operator>=</operator><operator>&gt;</operator> <name><name>SystemCredentials</name><operator>.</operator><name>java</name></name></expr>}</block> <operator>(</operator><literal type="number">51</literal><operator>%</operator><operator>)</operator>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentialsTest</name><operator>.</operator><name>java</name></name>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>accumulo</name><operator>-</operator><name><name>site</name><operator>.</operator><name>xml</name></name>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>admin</name><operator>/</operator><name><name>SecurityOperationsImpl</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>admin</name><operator>/</operator><name><name>SecurityOperationsImpl</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">84a1ebd31</literal><operator>..</operator><name>d5e1d8b3d</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>admin</name><operator>/</operator><name><name>SecurityOperationsImpl</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>admin</name><operator>/</operator><name><name>SecurityOperationsImpl</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">157</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">157</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperationsImpl</name> implements <name>SecurityOperations</name> <block>{
         <expr><call><name><name>client</name><operator>.</operator><name>changeLocalUserPassword</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>principal</name></expr></argument>, <argument><expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><call><name><name>token</name><operator>.</operator><name>getPassword</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
       }</block></expr></expr_stmt>
     })<empty_stmt>;</empty_stmt>
    <if_stmt><if>if <condition>(<expr><call><name><name>this</name><operator>.</operator><name>credentials</name><operator>.</operator><name>principal</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>this</name><operator>.</operator><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>principal</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
       <expr_stmt><expr><name><name>this</name><operator>.</operator><name>credentials</name></name> <operator>=</operator> <name>toChange</name></expr>;</expr_stmt>
     </block_content>}</block></if></if_stmt>
   </block_content>}</block></if></if_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>ConnectorImpl</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>ConnectorImpl</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">170208209..3c6e44537</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>ConnectorImpl</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>ConnectorImpl</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">58</literal></expr><operator>,</operator><expr><literal type="number">9</literal> <operator>+</operator><literal type="number">58</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>ConnectorImpl</name> extends <name>Connector</name> <block>{
     
     <expr><name><name>this</name><operator>.</operator><name>credentials</name></name> <operator>=</operator> <name>cred</name></expr>;
     
    <comment type="line">// hardcoded string for SYSTEM user since the definition is</comment>
    <comment type="line">// in server code</comment>
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>cred</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><literal type="string">"!SYSTEM"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
    <comment type="line">// Skip fail fast for system services; string literal for class name, to avoid</comment>
    <if_stmt><if>if <condition>(<expr><operator>!</operator><literal type="string">"org.apache.accumulo.server.security.SystemCredentials$SystemToken"</literal><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>cred</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
       <expr_stmt><expr><call><name><name>ServerClient</name><operator>.</operator><name>execute</name></name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><operator>new</operator> <class><super><name><name>ClientExec</name><argument_list type="generic">&lt;<argument><name><name>ClientService</name><operator>.</operator><name>Client</name></name></argument>&gt;</argument_list></name></super><argument_list>()</argument_list> <block>{
         <function><annotation>@<name>Override</name></annotation>
         <type><specifier>public</specifier> <name>void</name></type> <name>execute</name><parameter_list>(<parameter><decl><type><name><name>ClientService</name><operator>.</operator><name>Client</name></name></type> <name>iface</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>tokens</name><operator>/</operator><name><name>PasswordToken</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>tokens</name><operator>/</operator><name><name>PasswordToken</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">50d6938c0</literal><operator>..</operator><name>c39fb8d9a</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>tokens</name><operator>/</operator><name><name>PasswordToken</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>tokens</name><operator>/</operator><name><name>PasswordToken</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">137</literal></expr><operator>,</operator><expr><literal type="number">15</literal> <operator>+</operator><literal type="number">137</literal></expr><operator>,</operator><expr><literal type="number">14</literal> @@ <specifier>public</specifier> class <name>PasswordToken</name> implements <name>AuthenticationToken</name> <block>{
       }</block></expr></expr_stmt>
     }</block_content>
   }

  
   @Override
   public void init(Properties properties</block></function>)</block> <block>{
    <if_stmt><if>if <condition>(<expr><call><name><name>properties</name><operator>.</operator><name>containsKey</name></name><argument_list>(<argument><expr><literal type="string">"password"</literal></expr></argument>)</argument_list></call></expr>)</condition><block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>properties</name><operator>.</operator><name>containsKey</name></name><argument_list>(<argument><expr><literal type="string">"password"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
       <expr_stmt><expr><call><name>setPassword</name><argument_list>(<argument><expr><call><name><name>CharBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><call><name><name>properties</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="string">"password"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt/>}</block_content>else
    } else
       <throw>throw <argument_list>new <argument><expr><call><name>IllegalArgumentException</name><argument_list>(<argument><expr><literal type="string">"Missing 'password' property"</literal></expr></argument>)</argument_list></call></expr></argument></argument_list></throw></block><empty_stmt>;</empty_stmt></if></if_stmt>
   <expr_stmt/>}</block_content>

   
   @Override
   public Set&lt;TokenProperty&gt; getProperties(</block></if></if_stmt>)</block> <block>{
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>CredentialHelper</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>CredentialHelper</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">69e3ba128</literal><operator>..</operator><literal type="number">15fc47ac5</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>CredentialHelper</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>CredentialHelper</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">77</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">77</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>CredentialHelper</name> <block>{
   }</block>
   
   <specifier>public</specifier> <specifier>static</specifier> <name>AuthenticationToken</name> <call><name>extractToken</name><argument_list>(<argument><expr><name>TCredentials</name> <name>toAuth</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>AccumuloSecurityException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
    <return>return <expr><call><name>extractToken</name><argument_list>(<argument><expr><name><name>toAuth</name><operator>.</operator><name>tokenClassName</name></name></expr></argument>, <argument><expr><call><name><name>toAuth</name><operator>.</operator><name>getToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>extractToken</name><argument_list>(<argument><expr><call><name><name>toAuth</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>toAuth</name><operator>.</operator><name>getToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   <expr_stmt/>}</block>
   
   <function><type><specifier>public</specifier> <specifier>static</specifier> <name>TCredentials</name></type> <name>createSquelchError</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>principal</name></decl></parameter>, <parameter><decl><type><name>AuthenticationToken</name></type> <name>token</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>instanceID</name></decl></parameter>)</parameter_list> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>Credentials</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>Credentials</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">31fe18d93</literal><operator>..</operator><literal type="number">2c1dd8b4e</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>Credentials</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>core</name><operator>/</operator><name>security</name><operator>/</operator><name><name>Credentials</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">24</literal></expr><operator>,</operator><expr><literal type="number">20</literal> <operator>+</operator><literal type="number">24</literal></expr><operator>,</operator><expr><literal type="number">30</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TCredentials</name></name>;</import>
 <comment type="block" format="javadoc">/**
  * A wrapper for internal use. This class carries the instance, principal, and authentication token for use in the public API, in a non-serialized form. This is
  * important, so that the authentication token carried in a {@link Connector} can be destroyed, invalidating future RPC operations from that {@link Connector}.
 * &lt;p&gt;
 * See ACCUMULO-1312
 * 
 * @since 1.6.0
  */</comment>
 <class><specifier>public</specifier> class <name>Credentials</name> <block>{
   
  <decl_stmt><decl><type><specifier>private</specifier> <name>Instance</name></type> <name>instance</name></decl>;</decl_stmt>
   <decl_stmt><decl><type><specifier>private</specifier> <name>String</name></type> <name>principal</name></decl>;</decl_stmt>
   <decl_stmt><decl><type><specifier>private</specifier> <name>AuthenticationToken</name></type> <name>token</name></decl>;</decl_stmt>
   
  <constructor><specifier>public</specifier> <name>Credentials</name><parameter_list>(<parameter><decl><type><name>Instance</name></type> <name>instance</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>principal</name></decl></parameter>, <parameter><decl><type><name>AuthenticationToken</name></type> <name>token</name></decl></parameter>)</parameter_list> <block>{<block_content>
    <expr_stmt><expr><name><name>this</name><operator>.</operator><name>instance</name></name> <operator>=</operator> <name>instance</name></expr>;</expr_stmt>
  <constructor><specifier>public</specifier> <name>Credentials</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>principal</name></decl></parameter>, <parameter><decl><type><name>AuthenticationToken</name></type> <name>token</name></decl></parameter>)</parameter_list> <block>{<block_content>
     <expr_stmt><expr><name><name>this</name><operator>.</operator><name>principal</name></name> <operator>=</operator> <name>principal</name></expr>;</expr_stmt>
     <expr_stmt><expr><name><name>this</name><operator>.</operator><name>token</name></name> <operator>=</operator> <name>token</name></expr>;</expr_stmt>
   <expr_stmt/>}</block_content>
   
  public TCredentials toThrift(</block></constructor>)</block_content> <block>{<block_content>
  <function><type><specifier>public</specifier> <name>String</name></type> <name>getPrincipal</name><parameter_list>()</parameter_list> <block>{<block_content>
    <return>return <expr><name>principal</name></expr>;</return>
  <expr_stmt/>}</block_content>
  
  public AuthenticationToken getToken(</block></function>)</block_content> <block>{<block_content>
    <return>return <expr><name>token</name></expr>;</return>
  <expr_stmt/>}</block_content>
  
  public TCredentials toThrift(Instance instance</block></block></block></constructor>)</block> <block>{<block_content>
     <return>return <expr><call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><call><name><name>instance</name><operator>.</operator><name>getInstanceID</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   <expr_stmt/>}</block_content>
   
diff --git a/server/pom.xml b/server/pom.xml
index 75447be0d..ff846b404 100644
-- a/server/pom.xml
++ b/server/pom.xml
@@ -124</block><operator>,</operator><expr_stmt><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">124</literal></expr><operator>,</operator><expr><literal type="number">12</literal> @@
     <operator>&lt;</operator><operator>/</operator><name>dependency</name><operator>&gt;</operator>
   <operator>&lt;</operator><operator>/</operator><name>dependencies</name><operator>&gt;</operator>
   <operator>&lt;</operator><name>build</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>testResources</name><operator>&gt;</operator>
      <operator>&lt;</operator><name>testResource</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>filtering</name><operator>&gt;</operator><literal type="boolean">true</literal><operator>&lt;</operator><operator>/</operator><name>filtering</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>directory</name><operator>&gt;</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name><name>resources</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>directory</name></argument>&gt;</argument_list></name>
      <operator>&lt;</operator><operator>/</operator><name>testResource</name><operator>&gt;</operator>
    <operator>&lt;</operator><operator>/</operator><name>testResources</name><operator>&gt;</operator>
     <operator>&lt;</operator><name>pluginManagement</name><operator>&gt;</operator>
       <operator>&lt;</operator><name>plugins</name><operator>&gt;</operator>
         <operator>&lt;</operator><name>plugin</name><operator>&gt;</operator>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>ClientServiceHandler</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>ClientServiceHandler</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">6c3f110e1</literal><operator>..</operator><literal type="number">6fd6a65ff</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>ClientServiceHandler</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>ClientServiceHandler</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">135</literal></expr><operator>,</operator><expr><literal type="number">14</literal> <operator>+</operator><literal type="number">135</literal></expr><operator>,</operator><expr><literal type="number">14</literal> @@ <specifier>public</specifier> class <name>ClientServiceHandler</name> implements <name><name>ClientService</name><operator>.</operator><name>Iface</name></name> <block>{
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>changeLocalUserPassword</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>principal</name></expr></argument>, <argument><expr><name>ByteBuffer</name> <name>password</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><name>PasswordToken</name> <name>token</name> <operator>=</operator> <operator>new</operator> <call><name>PasswordToken</name><argument_list>(<argument><expr><name>password</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <name>TCredentials</name> <name>toChange</name> <operator>=</operator> <call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><name><name>credentials</name><operator>.</operator><name>instanceId</name></name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt></class>
    <decl_stmt><decl><type><name>TCredentials</name></type> <name>toChange</name> <init>= <expr><call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><call><name><name>credentials</name><operator>.</operator><name>getInstanceId</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>changePassword</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>toChange</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   <expr_stmt/>}</block_content>
   
   @Override
   public void createLocalUser(TInfo tinfo</block><operator>,</operator> TCredentials credentials<operator>,</operator> String principal<operator>,</operator> ByteBuffer password</function></class></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><name>PasswordToken</name> <name>token</name> <operator>=</operator> <operator>new</operator> <call><name>PasswordToken</name><argument_list>(<argument><expr><name>password</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
    <decl_stmt><decl><type><name>TCredentials</name></type> <name>newUser</name> <init>= <expr><call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><name><name>credentials</name><operator>.</operator><name>instanceId</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>TCredentials</name></type> <name>newUser</name> <init>= <expr><call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><call><name><name>credentials</name><operator>.</operator><name>getInstanceId</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>createUser</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>newUser</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>Authorizations</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   <expr_stmt/></block_content></block></if></if_stmt></block_content></block></if></if_stmt>}</block>
   
@@ <operator>-</operator><literal type="number">230</literal></expr><operator>,</operator><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">230</literal></expr><operator>,</operator><expr><literal type="number">10</literal> @@ <specifier>public</specifier> <name>class</name> <name>ClientServiceHandler</name> implements <name><name>ClientService</name><operator>.</operator><name>Iface</name></name> <block>{
   }</block>
   
   @<name>Override</name>
  <specifier>public</specifier> <name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <call><name>bulkImportFiles</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>final</name> <name>TCredentials</name> <name>tikw</name></expr></argument>, <argument><expr><name>final</name> <name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>final</name> <name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>final</name> <name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>files</name></expr></argument>,
  <argument><expr><specifier>public</specifier> <name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <call><name>bulkImportFiles</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>final</name> <name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>final</name> <name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>final</name> <name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>final</name> <name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>files</name></expr></argument>,
       <argument><expr><name>final</name> <name>String</name> <name>errorDir</name></expr></argument>, <argument><expr><name>final</name> <name>boolean</name> <name>setTime</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument>, <argument><expr><name>ThriftTableOperationException</name></expr></argument>, <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></argument>
     <try>try <block>{<block_content>
      <decl_stmt><decl><type><specifier>final</specifier> <name>TCredentials</name></type> <name>credentials</name> <init>= <expr><operator>new</operator> <call><name>TCredentials</name><argument_list>(<argument><expr><name>tikw</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>security</name><operator>.</operator><name>hasSystemPermission</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>security</name><operator>.</operator><name>canPerformSystemActions</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
         <throw>throw <expr><operator>new</operator> <call><name>AccumuloSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
       <return>return <expr><call><name><name>transactionWatcher</name><operator>.</operator><name>run</name></name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>BULK_ARBITRATOR_TYPE</name></name></expr></argument>, <argument><expr><name>tid</name></expr></argument>, <argument><expr><operator>new</operator> <class><super><name><name>Callable</name><argument_list type="generic">&lt;<argument><name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name></super><argument_list>()</argument_list> <block>{
         <annotation>@<name>Override</name></annotation>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">281</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">280</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@ <specifier>public</specifier> class <name>ClientServiceHandler</name> implements <name><name>ClientService</name><operator>.</operator><name>Iface</name></name> <block>{
     }</block></expr></expr_stmt>
   }</block></class>
   
  @<call><name>SuppressWarnings</name><argument_list>(<argument><expr><block>{<expr><literal type="string">"rawtypes"</literal></expr>, <expr><literal type="string">"unchecked"</literal></expr>}</block></expr></argument>)</argument_list></call>
   @<name>Override</name>
   <specifier>public</specifier> <name>boolean</name> <call><name>checkTableClass</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>tableName</name></expr></argument>, <argument><expr><name>String</name> <name>className</name></expr></argument>, <argument><expr><name>String</name> <name>interfaceMatch</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name></expr></argument>,
       <argument><expr><name>ThriftTableOperationException</name></expr></argument>, <argument><expr><name>ThriftSecurityException</name> <block>{</block></expr></argument>
@<argument>@ <expr><operator>-</operator><literal type="number">291</literal></expr></argument>,<argument><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">289</literal></expr></argument>,<argument><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>ClientServiceHandler</name> implements <name><name>ClientService</name><operator>.</operator><name>Iface</name></name></expr></argument></throws> <block>{<block_content>
     <decl_stmt><decl><type><name>String</name></type> <name>tableId</name> <init>= <expr><call><name>checkTableId</name><argument_list>(<argument><expr><name>tableName</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     
     <decl_stmt><decl><type><name>ClassLoader</name></type> <name>loader</name> <init>= <expr><call><name>getClass</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getClassLoader</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Class</name></type> <name>shouldMatch</name></decl>;</decl_stmt>
    <decl_stmt><decl><type><name><name>Class</name><argument_list type="generic">&lt;<argument><name>?</name></argument>&gt;</argument_list></name></type> <name>shouldMatch</name></decl>;</decl_stmt>
     <try>try <block>{<block_content>
       <expr_stmt><expr><name>shouldMatch</name> <operator>=</operator> <call><name><name>loader</name><operator>.</operator><name>loadClass</name></name><argument_list>(<argument><expr><name>interfaceMatch</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">307</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">305</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>ClientServiceHandler</name> implements <name><name>ClientService</name><operator>.</operator><name>Iface</name></name> <block>{
         <expr><name>currentLoader</name> <operator>=</operator> <call><name><name>AccumuloVFSClassLoader</name><operator>.</operator><name>getClassLoader</name></name><argument_list>()</argument_list></call></expr>;
       }</block>
       
      <name>Class</name> <name>test</name> <operator>=</operator> <call><name><name>currentLoader</name><operator>.</operator><name>loadClass</name></name><argument_list>(<argument><expr><name>className</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>asSubclass</name><argument_list>(<argument><expr><name>shouldMatch</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <decl_stmt><decl><type><name><name>Class</name><argument_list type="generic">&lt;<argument><name>?</name></argument>&gt;</argument_list></name></type> <name>test</name> <init>= <expr><call><name><name>currentLoader</name><operator>.</operator><name>loadClass</name></name><argument_list>(<argument><expr><name>className</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>asSubclass</name><argument_list>(<argument><expr><name>shouldMatch</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       <expr_stmt><expr><call><name><name>test</name><operator>.</operator><name>newInstance</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
       <return>return <expr><literal type="boolean">true</literal></expr>;</return>
     </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>HdfsZooInstance</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>HdfsZooInstance</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>db5ece024</name><operator>..</operator><name>f306b8604</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>HdfsZooInstance</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name><name>HdfsZooInstance</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">145</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">145</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@ <specifier>public</specifier> class <name>HdfsZooInstance</name> implements <name>Instance</name> <block>{
   }</block>
   
   @<name>Override</name>
  <comment type="line">// Not really deprecated, just not for client use</comment>
   <specifier>public</specifier> <name>Connector</name> <call><name>getConnector</name><argument_list>(<argument><expr><name>String</name> <name>principal</name></expr></argument>, <argument><expr><name>AuthenticationToken</name> <name>token</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>AccumuloException</name></expr></argument>, <argument><expr><name>AccumuloSecurityException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
     <return>return <expr><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>CredentialHelper</name><operator>.</operator><name>create</name></name><argument_list>(<argument><expr><name>principal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>, <argument><expr><call><name>getInstanceID</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></catch></try>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">156</literal></expr><operator>,</operator><expr><literal type="number">13</literal> <operator>+</operator><literal type="number">155</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <specifier>public</specifier> class <name>HdfsZooInstance</name> implements <name>Instance</name> <block>{
   }</block>
   
   @<name>Override</name>
  <comment type="line">// Not really deprecated, just not for client use</comment>
   <specifier>public</specifier> <name>Connector</name> <call><name>getConnector</name><argument_list>(<argument><expr><name>String</name> <name>user</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>pass</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>AccumuloException</name></expr></argument>, <argument><expr><name>AccumuloSecurityException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
     <return>return <expr><call><name>getConnector</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>PasswordToken</name><argument_list>(<argument><expr><name>pass</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></expr></argument></argument_list></call></expr></return>
   
   <function><annotation>@<name>Override</name></annotation>
  <comment type="line">// Not really deprecated, just not for client use</comment>
   <type><specifier>public</specifier> <name>Connector</name></type> <name>getConnector</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>ByteBuffer</name></type> <name>pass</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>AccumuloException</name></expr></argument>, <argument><expr><name>AccumuloSecurityException</name></expr></argument></throws> <block>{<block_content>
     <return>return <expr><call><name>getConnector</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><call><name><name>ByteBufferUtil</name><operator>.</operator><name>toBytes</name></name><argument_list>(<argument><expr><name>pass</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>token</name><operator>/</operator><name><name>SystemToken</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>token</name><operator>/</operator><name><name>SystemToken</name><operator>.</operator><name>java</name></name>
<name>deleted</name> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">72b2217ee</literal><operator>..</operator><literal type="number">000000000</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>client</name><operator>/</operator><name>security</name><operator>/</operator><name>token</name><operator>/</operator><name><name>SystemToken</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
@@ <operator>-</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">30</literal> <operator>+</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> @@</expr></expr_stmt>
<comment type="block">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</comment>
<package>package <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>security</name><operator>.</operator><name>token</name></name>;</package>

<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>security</name><operator>.</operator><name>tokens</name><operator>.</operator><name>PasswordToken</name></name>;</import>

<comment type="block" format="javadoc">/**
 * @since 1.5.0
 */</comment>

<class><specifier>public</specifier> class <name>SystemToken</name> <super_list><extends>extends <super><name>PasswordToken</name></super></extends></super_list> <block>{
  
  <constructor><specifier>public</specifier> <name>SystemToken</name><parameter_list>(<parameter><decl><type><name><name>byte</name><index>[]</index></name></type> <name>systemPassword</name></decl></parameter>)</parameter_list> <block>{<block_content>
    <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><name>systemPassword</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></constructor>
}</block></class>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>GarbageCollectWriteAheadLogs</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>GarbageCollectWriteAheadLogs</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>d50cff216</name><operator>..</operator><literal type="number">9bf7bf618</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>GarbageCollectWriteAheadLogs</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>GarbageCollectWriteAheadLogs</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">40</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">40</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>ThriftUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>ServerConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>AddressUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name><operator>.</operator><name>LogEntry</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">165</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">165</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>GarbageCollectWriteAheadLogs</name> <block>{
           <expr><name>Client</name> <name>tserver</name> <operator>=</operator> <literal type="null">null</literal></expr>;
           <try>try <block>{<block_content>
             <expr_stmt><expr><name>tserver</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>tserver</name><operator>.</operator><name>removeLogs</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>paths2strings</name><argument_list>(<argument><expr><call><name><name>entry</name><operator>.</operator><name>getValue</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>tserver</name><operator>.</operator><name>removeLogs</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>paths2strings</name><argument_list>(<argument><expr><call><name><name>entry</name><operator>.</operator><name>getValue</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"deleted "</literal> <operator>+</operator> <call><name><name>entry</name><operator>.</operator><name>getValue</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" from "</literal> <operator>+</operator> <call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt><expr><name><name>status</name><operator>.</operator><name>currentLog</name><operator>.</operator><name>deleted</name></name> <operator>+=</operator> <call><name><name>entry</name><operator>.</operator><name>getValue</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>size</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
           <expr_stmt/>}</block_content> catch (TException e</block></try>) <block>{
@@ <expr><operator>-</operator><literal type="number">206</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">206</literal></expr>,<expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>GarbageCollectWriteAheadLogs</name> <block>{
       <expr><call><name><name>result</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><call><name><name>path</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
     <return>return <expr><name>result</name></expr>;</return>
   }</block>

  
   <specifier>private</specifier> <specifier>static</specifier> <name><name>Map</name><argument_list type="generic">&lt;<argument><name>String</name></argument>,<argument><name><name>ArrayList</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name> <call><name>mapServersToFiles</name><argument_list>(<argument><expr><name><name>Map</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>,<argument><name>String</name></argument>&gt;</argument_list></name> <name>fileToServerMap</name></expr></argument>)</argument_list></call> <block>{
     <expr><name><name>Map</name><argument_list type="generic">&lt;<argument><name>String</name></argument>,<argument><name><name>ArrayList</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name> <name>result</name> <operator>=</operator> <operator>new</operator> <call><name><name>HashMap</name><argument_list type="generic">&lt;<argument><name>String</name></argument>,<argument><name><name>ArrayList</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr>;
     <for>for <control>(<init><decl><type><name><name>Entry</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>,<argument><name>String</name></argument>&gt;</argument_list></name></type> <name>fileServer</name> <range>: <expr><call><name><name>fileToServerMap</name><operator>.</operator><name>entrySet</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">223</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">223</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>GarbageCollectWriteAheadLogs</name> <block>{
   <expr><specifier>private</specifier> <specifier>static</specifier> <name>int</name> <call><name>removeMetadataEntries</name><argument_list>(<argument><expr><name><name>Map</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>,<argument><name>String</name></argument>&gt;</argument_list></name> <name>fileToServerMap</name></expr></argument>, <argument><expr><name><name>Set</name><argument_list type="generic">&lt;<argument><name>Path</name></argument>&gt;</argument_list></name> <name>sortedWALogs</name></expr></argument>, <argument><expr><name>GCStatus</name> <name>status</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>KeeperException</name></expr></argument>,
       <argument><expr><name>InterruptedException</name> <block>{
     <expr><name>int</name> <name>count</name> <operator>=</operator> <literal type="number">0</literal></expr></block></expr></argument></throws></expr>;
    <expr><name><name>Iterator</name><argument_list type="generic">&lt;<argument><name>LogEntry</name></argument>&gt;</argument_list></name> <name>iterator</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
    <expr><name><name>Iterator</name><argument_list type="generic">&lt;<argument><name>LogEntry</name></argument>&gt;</argument_list></name> <name>iterator</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
     <while>while <condition>(<expr><call><name><name>iterator</name><operator>.</operator><name>hasNext</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
       <for>for <control>(<init><decl><type><name>String</name></type> <name>filename</name> <range>: <expr><call><name><name>iterator</name><operator>.</operator><name>next</name></name><argument_list>()</argument_list></call><operator>.</operator><name>logSet</name></expr></range></decl></init>)</control> <block>{<block_content>
         <decl_stmt><decl><type><name>Path</name></type> <name>path</name></decl>;</decl_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>SimpleGarbageCollector</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>SimpleGarbageCollector</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>f18e5bc1d</name><operator>..</operator><name>de7328253</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>SimpleGarbageCollector</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>gc</name><operator>/</operator><name><name>SimpleGarbageCollector</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">85</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">85</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>conf</name><operator>.</operator><name>ServerConfiguration</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManagerImpl</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>Halt</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>TServerUtils</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>TabletIterator</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">162</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">162</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>SimpleGarbageCollector</name> implements <name>Iface</name> <block>{
     <if_stmt><if>if <condition>(<expr><name><name>opts</name><operator>.</operator><name>address</name></name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
       <expr_stmt><expr><call><name><name>gc</name><operator>.</operator><name>useAddress</name></name><argument_list>(<argument><expr><name>address</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
     
    <call><name><name>gc</name><operator>.</operator><name>init</name></name><argument_list>(<argument><expr><name>fs</name></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>serverConf</name><operator>.</operator><name>getConfiguration</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBoolean</name><argument_list>(<argument><expr><name><name>Property</name><operator>.</operator><name>GC_TRASH_IGNORE</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>gc</name><operator>.</operator><name>init</name></name><argument_list>(<argument><expr><name>fs</name></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>serverConf</name><operator>.</operator><name>getConfiguration</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBoolean</name><argument_list>(<argument><expr><name><name>Property</name><operator>.</operator><name>GC_TRASH_IGNORE</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>Accumulo</name><operator>.</operator><name>enableTracing</name></name><argument_list>(<argument><expr><name>address</name></expr></argument>, <argument><expr><literal type="string">"gc"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>gc</name><operator>.</operator><name>run</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
   <expr_stmt/>}</block_content>
@@ -582</block><operator>,</operator><expr_stmt><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">582</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>SimpleGarbageCollector</name> implements <name>Iface</name> <block>{
       <expr><name><name>Map</name><argument_list type="generic">&lt;<argument><name>Key</name></argument>,<argument><name>Value</name></argument>&gt;</argument_list></name> <name>tabletKeyValues</name> <operator>=</operator> <call><name><name>tabletIterator</name><operator>.</operator><name>next</name></name><argument_list>()</argument_list></call></expr>;
       
       <for>for <control>(<init><decl><type><name><name>Entry</name><argument_list type="generic">&lt;<argument><name>Key</name></argument>,<argument><name>Value</name></argument>&gt;</argument_list></name></type> <name>entry</name> <range>: <expr><call><name><name>tabletKeyValues</name><operator>.</operator><name>entrySet</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
        <if_stmt><if>if <condition>(<expr><call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getColumnFamily</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>DataFileColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>)</argument_list></call>
            <operator>||</operator> <call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getColumnFamily</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>ScanFileColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
        <if_stmt><if>if <condition>(<expr><call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getColumnFamily</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>DataFileColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getColumnFamily</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>ScanFileColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
           
           <decl_stmt><decl><type><name>String</name></type> <name>cf</name> <init>= <expr><call><name><name>entry</name><operator>.</operator><name>getKey</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getColumnQualifier</name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
           <decl_stmt><decl><type><name>String</name></type> <name>delete</name> <init>= <expr><name>cf</name></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">638</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">637</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>SimpleGarbageCollector</name> implements <name>Iface</name> <block>{
     <if_stmt><if>if <condition>(<expr><operator>!</operator><name>offline</name></expr>)</condition> <block>{<block_content>
       <decl_stmt><decl><type><name>Connector</name></type> <name>c</name></decl>;</decl_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><name>c</name> <operator>=</operator> <call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>c</name> <operator>=</operator> <call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <expr_stmt><expr><name>writer</name> <operator>=</operator> <call><name><name>c</name><operator>.</operator><name>createBatchWriter</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><operator>new</operator> <call><name>BatchWriterConfig</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <expr_stmt><expr><name>rootWriter</name> <operator>=</operator> <call><name><name>c</name><operator>.</operator><name>createBatchWriter</name></name><argument_list>(<argument><expr><name><name>RootTable</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><operator>new</operator> <call><name>BatchWriterConfig</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> catch (AccumuloException e</block></try>)</block_content> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>LiveTServerSet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>LiveTServerSet</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>bebff7f45</name><operator>..</operator><literal type="number">68255b879</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>LiveTServerSet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>LiveTServerSet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">37</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">37</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>ServerServices</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>ThriftUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>AddressUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>Halt</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>time</name><operator>.</operator><name>SimpleTimer</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">83</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">83</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>assignTablet</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>loadTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>loadTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -92</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">92</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>unloadTablet</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>, <argument><expr><name>boolean</name> <name>save</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>unloadTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>save</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>unloadTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>save</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -107</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">107</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
       
       <try>try <block>{<block_content>
         <decl_stmt><decl><type><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name></type> <name>client</name> <init>= <expr><call><name><name>ThriftUtil</name><operator>.</operator><name>createClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>transport</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <return>return <expr><call><name><name>client</name><operator>.</operator><name>getTabletServerStatus</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
        <return>return <expr><call><name><name>client</name><operator>.</operator><name>getTabletServerStatus</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <if_stmt><if>if <condition>(<expr><name>transport</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
           <expr_stmt><expr><call><name><name>transport</name><operator>.</operator><name>close</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">117</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">117</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>halt</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name></expr></argument>, <argument><expr><name>ThriftSecurityException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>halt</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>halt</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -126</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">126</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>fastHalt</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>fastHalt</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>fastHalt</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -135</block></block><operator>,</operator><expr_stmt><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">135</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>flush</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>startRow</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>endRow</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>flush</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>,
            <argument><expr><ternary><condition><expr><name>startRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>startRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>, <argument><expr><ternary><condition><expr><name>endRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>endRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>flush</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><ternary><condition><expr><name>startRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>startRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>,
            <argument><expr><ternary><condition><expr><name>endRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>endRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -145</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">145</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>chop</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>chop</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>chop</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -154</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">154</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>splitTablet</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>, <argument><expr><name>Text</name> <name>splitPoint</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name></expr></argument>, <argument><expr><name>ThriftSecurityException</name></expr></argument>, <argument><expr><name>NotServingTabletException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>,
        <argument><expr><call><name><name>client</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>,
             <argument><expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><call><name><name>splitPoint</name><operator>.</operator><name>getBytes</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><call><name><name>splitPoint</name><operator>.</operator><name>getLength</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;</argument_list></call></expr></expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">164</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">164</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>flushTablet</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>flushTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>flushTablet</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>toThrift</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/>}</block_content>
@@ -173</block></block><operator>,</operator><expr_stmt><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">173</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>LiveTServerSet</name> implements <name>Watcher</name> <block>{
     <expr><specifier>public</specifier> <name>void</name> <call><name>compact</name><argument_list>(<argument><expr><name>ZooLock</name> <name>lock</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>startRow</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>endRow</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></try>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>client</name><operator>.</operator><name>compact</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>,
        <argument><expr><call><name><name>client</name><operator>.</operator><name>compact</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>lockString</name><argument_list>(<argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>,
             <argument><expr><ternary><condition><expr><name>startRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>startRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>, <argument><expr><ternary><condition><expr><name>endRow</name> <operator>==</operator> <literal type="null">null</literal></expr> ?</condition><then> <expr><literal type="null">null</literal></expr> </then><else>: <expr><call><name><name>ByteBuffer</name><operator>.</operator><name>wrap</name></name><argument_list>(<argument><expr><name>endRow</name></expr></argument>)</argument_list></call></expr></else></ternary></expr></argument>)</argument_list></call></expr></argument>;</argument_list></call></expr></expr_stmt>
       <expr_stmt/>}</block_content> finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>Master</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>Master</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>b5ffd0abe</name><operator>..</operator><literal type="number">0cb037811</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>Master</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>Master</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">129</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">129</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>tableOps</name><operator>.</operator><name>TraceRepo</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>tserverOps</name><operator>.</operator><name>ShutdownTServer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>Monitor</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>AddressUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>DefaultMap</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>Halt</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">291</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">291</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>Master</name> implements <name><name>LiveTServerSet</name><operator>.</operator><name>Listener</name></name></expr><operator>,</operator> <expr><name>TableObserver</name></expr><operator>,</operator> <expr><name>CurrentSt</name>
           @<name>Override</name>
           <specifier>public</specifier> <name>void</name> <call><name>run</name><argument_list>()</argument_list></call> <block>{
             <try>try <block>{<block_content>
              <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>moveMetaDeleteMarkers</name></name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
              <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>moveMetaDeleteMarkers</name></name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
               <expr_stmt><expr><call><name><name>Accumulo</name><operator>.</operator><name>updateAccumuloVersion</name></name><argument_list>(<argument><expr><name>fs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
               
               <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"Upgrade complete"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">409</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">409</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>Master</name> implements <name><name>LiveTServerSet</name><operator>.</operator><name>Listener</name></name></expr><operator>,</operator> <expr><name>TableObserver</name></expr><operator>,</operator> <expr><name>CurrentSt</name></expr></expr_stmt>
   }</block_content>
   
   public Connector getConnector(</block></try>)</block> <throws>throws <argument><expr><name>AccumuloException</name></expr></argument>, <argument><expr><name>AccumuloSecurityException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
    <return>return <expr><call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   <expr_stmt/>}</block_content>
   
   private void waitAround(EventCoordinator.Listener listener</block></block></try>)</block_content> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1503</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1503</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>Master</name> implements <name><name>LiveTServerSet</name><operator>.</operator><name>Listener</name></name></expr><operator>,</operator> <expr><name>TableObserver</name></expr><operator>,</operator> <expr><name>CurrentSt</name></expr></expr_stmt>
       }</block_content>
     }</block></block></block></try>)</block_content></block></block><empty_stmt>;</empty_stmt></try>
     
    <name>TCredentials</name> <name>systemAuths</name> <operator>=</operator> <call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></block></expr>;</expr_stmt></try>
    <decl_stmt><decl><type><name>TCredentials</name></type> <name>systemAuths</name> <init>= <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>watchers</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>TabletGroupWatcher</name><argument_list>(<argument><expr><name>this</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>MetaDataStateStore</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><name>systemAuths</name></expr></argument>, <argument><expr><name>this</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>watchers</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>TabletGroupWatcher</name><argument_list>(<argument><expr><name>this</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>RootTabletStateStore</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><name>systemAuths</name></expr></argument>, <argument><expr><name>this</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>watchers</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>watchers</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>TabletGroupWatcher</name><argument_list>(<argument><expr><name>this</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>ZooTabletStateStore</name><argument_list>(<argument><expr><operator>new</operator> <call><name>ZooStore</name><argument_list>(<argument><expr><name>zroot</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>watchers</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>TabletGroupWatcher</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>TabletGroupWatcher</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>c0479ddb8</name><operator>..</operator><name>fb905c929</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>TabletGroupWatcher</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name><name>TabletGroupWatcher</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">70</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">70</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletLocationState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletStateStore</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletTime</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">410</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">410</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ class <name>TabletGroupWatcher</name> extends <name>Daemon</name> <block>{
         <if_stmt><if>if <condition>(<expr><call><name><name>key</name><operator>.</operator><name>compareColumnFamily</name></name><argument_list>(<argument><expr><name><name>DataFileColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>)</argument_list></call> <operator>==</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
           <expr_stmt><expr><call><name><name>datafiles</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>FileRef</name><argument_list>(<argument><expr><name><name>this</name><operator>.</operator><name>master</name><operator>.</operator><name>fs</name></name></expr></argument>, <argument><expr><name>key</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
           <if_stmt><if>if <condition>(<expr><call><name><name>datafiles</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">1000</literal></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>datafiles</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>datafiles</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt><expr><call><name><name>datafiles</name><operator>.</operator><name>clear</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
           <expr_stmt/>}</block_content>
         } else if (TabletsSection.ServerColumnFamily.TIME_COLUMN.hasColumns(key</block></if></if_stmt>)</block_content></block></if></if_stmt>)</block> <block>{
@@ <expr><operator>-</operator><literal type="number">420</literal></expr>,<expr><literal type="number">12</literal> <operator>+</operator><literal type="number">420</literal></expr>,<expr><literal type="number">12</literal> @@ class <name>TabletGroupWatcher</name> extends <name>Daemon</name> <block>{
         }</block></expr> <if_stmt><if type="elseif">else if <condition>(<expr><call><name><name>TabletsSection</name><operator>.</operator><name>ServerColumnFamily</name><operator>.</operator><name>DIRECTORY_COLUMN</name><operator>.</operator><name>hasColumns</name></name><argument_list>(<argument><expr><name>key</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
           <expr_stmt><expr><call><name><name>datafiles</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>FileRef</name><argument_list>(<argument><expr><name><name>this</name><operator>.</operator><name>master</name><operator>.</operator><name>fs</name></name></expr></argument>, <argument><expr><name>key</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
           <if_stmt><if>if <condition>(<expr><call><name><name>datafiles</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">1000</literal></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>datafiles</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>datafiles</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt><expr><call><name><name>datafiles</name><operator>.</operator><name>clear</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
           <expr_stmt/>}</block_content>
         }
       }
      MetadataTableUtil.addDeleteEntries(extent</block><operator>,</operator> <expr_stmt><expr><name>datafiles</name></expr><operator>,</operator> <expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></expr_stmt></if></if_stmt></block_content></block></if></if_stmt></block></expr></expr_stmt></block_content></block></block></if></if_stmt></block></expr></expr_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></for></block></expr></expr_stmt></for></block_content></block></while></block></expr></expr_stmt></block_content></block></for></block></expr></block></block></expr></expr_stmt></block_content></block></try>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>datafiles</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <decl_stmt><decl><type><name>BatchWriter</name></type> <name>bw</name> <init>= <expr><call><name><name>conn</name><operator>.</operator><name>createBatchWriter</name></name><argument_list>(<argument><expr><name>targetSystemTable</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>BatchWriterConfig</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       <try>try <block>{<block_content>
         <expr_stmt><expr><call><name>deleteTablets</name><argument_list>(<argument><expr><name>info</name></expr></argument>, <argument><expr><name>deleteRange</name></expr></argument>, <argument><expr><name>bw</name></expr></argument>, <argument><expr><name>conn</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">448</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">448</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <name>class</name> <name>TabletGroupWatcher</name> extends <name>Daemon</name> <block>{
       }</block></expr></expr_stmt> <if_stmt><else>else <block>{<block_content>
         <comment type="line">// Recreate the default tablet to hold the end of the table</comment>
         <expr_stmt><expr><call><name><name>Master</name><operator>.</operator><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Recreating the last tablet to point to "</literal> <operator>+</operator> <call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>getTableId</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Constants</name><operator>.</operator><name>DEFAULT_TABLET_LOCATION</name></name></expr></argument>,
            <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>timeType</name></expr></argument>, <argument><expr><name><name>this</name><operator>.</operator><name>master</name><operator>.</operator><name>masterLock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>getTableId</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Constants</name><operator>.</operator><name>DEFAULT_TABLET_LOCATION</name></name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name>
            <operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>timeType</name></expr></argument>, <argument><expr><name><name>this</name><operator>.</operator><name>master</name><operator>.</operator><name>masterLock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></else></if_stmt>
     </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<block_content>
       <throw>throw <expr><operator>new</operator> <call><name>AccumuloException</name><argument_list>(<argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</throw>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TableLoadBalancer</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TableLoadBalancer</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>b9cecbf19</name><operator>..</operator><literal type="number">3e0a2bf0e</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TableLoadBalancer</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TableLoadBalancer</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">33</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">33</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>data</name><operator>.</operator><name>KeyExtent</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TabletServerStatus</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletMigration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>start</name><operator>.</operator><name>classloader</name><operator>.</operator><name>vfs</name><operator>.</operator><name>AccumuloVFSClassLoader</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
 
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">119</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">119</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TableLoadBalancer</name> extends <name>TabletBalancer</name> <block>{
   <expr><specifier>protected</specifier> <name>TableOperations</name> <call><name>getTableOperations</name><argument_list>()</argument_list></call> <block>{
     <if_stmt><if>if <condition>(<expr><name>tops</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
       <try>try <block>{<block_content>
        <expr_stmt><expr><name>tops</name> <operator>=</operator> <call><name><name>configuration</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>tableOperations</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>tops</name> <operator>=</operator> <call><name><name>configuration</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>tableOperations</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/></block_content></block></try></block_content></block></if></if_stmt>}</block></expr> <catch>catch <parameter_list>(<parameter><decl><type><name>AccumuloException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Unable to access table operations from within table balancer"</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/></block_content></block></catch>}</block></expr></expr_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>AccumuloSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TabletBalancer</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TabletBalancer</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>d6dce2f40</name><operator>..</operator><literal type="number">625fa4073</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TabletBalancer</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>balancer</name><operator>/</operator><name><name>TabletBalancer</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">22</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">22</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@</expr></expr_stmt> <import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Map</name></name>;</import>
 <import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Set</name></name>;</import>
 <import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>SortedMap</name></name>;</import>
 
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>impl</name><operator>.</operator><name>thrift</name><operator>.</operator><name>ThriftSecurityException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>data</name><operator>.</operator><name>KeyExtent</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TabletServerStatus</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">33</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>ThriftUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>conf</name><operator>.</operator><name>ServerConfiguration</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletMigration</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>thrift</name><operator>.</operator><name>transport</name><operator>.</operator><name>TTransportException</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">43</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">43</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <specifier>abstract</specifier> <name>class</name> <name>TabletBalancer</name> <block>{
   <expr><specifier>private</specifier> <specifier>static</specifier> <name>final</name> <name>Logger</name> <name>log</name> <operator>=</operator> <call><name><name>Logger</name><operator>.</operator><name>getLogger</name></name><argument_list>(<argument><expr><name><name>TabletBalancer</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;
   
   <expr><specifier>protected</specifier> <name>ServerConfiguration</name> <name>configuration</name></expr>;

  
   <comment type="block" format="javadoc">/**
    * Initialize the TabletBalancer. This gives the balancer the opportunity to read the configuration.
    */</comment>
@@ <expr><operator>-</operator><literal type="number">98</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">98</literal></expr>,<expr><literal type="number">7</literal> @@ <specifier>public</specifier> <specifier>abstract</specifier> <name>class</name> <name>TabletBalancer</name> <block>{
     <expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Scanning tablet server "</literal> <operator>+</operator> <name>tserver</name> <operator>+</operator> <literal type="string">" for table "</literal> <operator>+</operator> <name>tableId</name></expr></argument>)</argument_list></call></expr>;
     <expr><name>Client</name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tserver</name><operator>.</operator><name>getLocation</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>configuration</name><operator>.</operator><name>getConfiguration</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
     <try>try <block>{<block_content>
      <decl_stmt><decl><type><name><name>List</name><argument_list type="generic">&lt;<argument><name>TabletStats</name></argument>&gt;</argument_list></name></type> <name>onlineTabletsForTable</name> <init>= <expr><call><name><name>client</name><operator>.</operator><name>getTabletStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>List</name><argument_list type="generic">&lt;<argument><name>TabletStats</name></argument>&gt;</argument_list></name></type> <name>onlineTabletsForTable</name> <init>= <expr><call><name><name>client</name><operator>.</operator><name>getTabletStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       <return>return <expr><name>onlineTabletsForTable</name></expr>;</return>
     <expr_stmt/></block_content></block></try>}</block></expr> <catch>catch <parameter_list>(<parameter><decl><type><name>TTransportException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
       <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Unable to connect to "</literal> <operator>+</operator> <name>tserver</name> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>state</name><operator>/</operator><name><name>MetaDataStateStore</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>state</name><operator>/</operator><name><name>MetaDataStateStore</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>b58e618a4</name><operator>..</operator><literal type="number">5cb7b0c0f</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>state</name><operator>/</operator><name><name>MetaDataStateStore</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>state</name><operator>/</operator><name><name>MetaDataStateStore</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>metadata</name><operator>.</operator><name>schema</name><operator>.</operator><name>MetadataSchema</name><operator>.</operator><name>TabletsSection</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>CredentialHelper</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import>
 
 <class><specifier>public</specifier> class <name>MetaDataStateStore</name> <super_list><extends>extends <super><name>TabletStateStore</name></super></extends></super_list> <block>{
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">59</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">59</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetaDataStateStore</name> extends <name>TabletStateStore</name> <block>{
   }</block>
   
   <specifier>protected</specifier> <call><name>MetaDataStateStore</name><argument_list>(<argument><expr><name>String</name> <name>tableName</name></expr></argument>)</argument_list></call> <block>{
    <expr><call><name>this</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><name>tableName</name></expr></argument>)</argument_list></call></expr>;
    <expr><call><name>this</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><name>tableName</name></expr></argument>)</argument_list></call></expr>;
   }</block>
   
   <specifier>public</specifier> <call><name>MetaDataStateStore</name><argument_list>()</argument_list></call> <block>{
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>BulkImport</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>BulkImport</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">4f44d79ad</literal><operator>..</operator><name>cfbdc97eb</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>BulkImport</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>BulkImport</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">68</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">68</literal></expr>,<expr><literal type="number">7</literal> @@</expr> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import></block></expr></expr_stmt>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>LiveTServerSet</name><operator>.</operator><name>TServerConnection</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>Master</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>UniqueNameAllocator</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>DistributedWorkQueue</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">557</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">557</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>LoadFiles</name> extends <name>MasterRepo</name> <block>{
               <expr><name>server</name> <operator>=</operator> <call><name><name>pair</name><operator>.</operator><name>getFirst</name></name><argument_list>()</argument_list></call></expr>;
               <expr><name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>attempt</name> <operator>=</operator> <call><name><name>Collections</name><operator>.</operator><name>singletonList</name></name><argument_list>(<argument><expr><name>file</name></expr></argument>)</argument_list></call></expr>;
               <expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Asking "</literal> <operator>+</operator> <call><name><name>pair</name><operator>.</operator><name>getFirst</name></name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">" to bulk import "</literal> <operator>+</operator> <name>file</name></expr></argument>)</argument_list></call></expr>;
              <expr><name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>fail</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>bulkImportFiles</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tid</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>attempt</name></expr></argument>, <argument><expr><name>errorDir</name></expr></argument>, <argument><expr><name>setTime</name></expr></argument>)</argument_list></call></expr>;
              <expr><name><name>List</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name> <name>fail</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>bulkImportFiles</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tid</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>attempt</name></expr></argument>, <argument><expr><name>errorDir</name></expr></argument>, <argument><expr><name>setTime</name></expr></argument>)</argument_list></call></expr>;
               <if_stmt><if>if <condition>(<expr><call><name><name>fail</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
                 <expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>file</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
               <expr_stmt/></block_content></block></if></if_stmt>}</block></expr></expr_stmt> <if_stmt><else>else <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CloneTable</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CloneTable</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">8bf437d4e</literal><operator>..</operator><literal type="number">3534a7885</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CloneTable</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CloneTable</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>Master</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
 
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">108</literal></expr><operator>,</operator><expr><literal type="number">14</literal> <operator>+</operator><literal type="number">108</literal></expr><operator>,</operator><expr><literal type="number">14</literal> @@ <name>class</name> <name>CloneMetadata</name> extends <name>MasterRepo</name> <block>{
     <expr><name>Instance</name> <name>instance</name> <operator>=</operator> <call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr>;
     <comment type="line">// need to clear out any metadata entries for tableId just in case this</comment>
     <comment type="line">// died before and is executing again</comment>
    <call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>cloneTable</name></name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>srcTableId</name></name></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <return>return <expr><operator>new</operator> <call><name>FinishCloneTable</name><argument_list>(<argument><expr><name>cloneInfo</name></expr></argument>)</argument_list></call></expr>;</return>
   <expr_stmt/></block_content></block></else></if_stmt></block></class></block_content></block></catch>}</block>
   
   @<name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>environment</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></catch>
   
 </block_content>}</block></catch></try>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">183</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">183</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>ClonePermissions</name> extends <name>MasterRepo</name> <block>{
     <comment type="line">// give all table permissions to the creator</comment>
     <for>for <control>(<init><decl><type><name>TablePermission</name></type> <name>permission</name> <range>: <expr><call><name><name>TablePermission</name><operator>.</operator><name>values</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>grantTablePermission</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>grantTablePermission</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/></block_content></block></try></block_content></block></for>}</block></expr></expr_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>Logger</name><operator>.</operator><name>getLogger</name></name><argument_list>(<argument><expr><name><name>FinishCloneTable</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>error</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><name>e</name></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">198</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">198</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>ClonePermissions</name> extends <name>MasterRepo</name> <block>{
   
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>environment</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>cloneInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr>;
   }</block></expr></expr_stmt>
 </block_content>}</block></catch>
 
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CreateTable</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CreateTable</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>d9acd8da7</name><operator>..</operator><literal type="number">2f35f9776</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CreateTable</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>CreateTable</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">36</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">36</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>Master</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletTime</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>TablePropUtil</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">115</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">115</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>PopulateMetadata</name> extends <name>MasterRepo</name> <block>{
   <expr><specifier>public</specifier> <name><name>Repo</name><argument_list type="generic">&lt;<argument><name>Master</name></argument>&gt;</argument_list></name> <call><name>call</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>environment</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
     
     <expr><name>KeyExtent</name> <name>extent</name> <operator>=</operator> <operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name><name>Constants</name><operator>.</operator><name>DEFAULT_TABLET_LOCATION</name></name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>timeType</name></name></expr></argument>,
    <argument><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name><name>Constants</name><operator>.</operator><name>DEFAULT_TABLET_LOCATION</name></name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>timeType</name></name></expr></argument>,
         <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
     
     return <argument><expr><operator>new</operator> <call><name>FinishCreateTable</name><argument_list>(<argument><expr><name>tableInfo</name></expr></argument>)</argument_list></call></expr></argument>;
<argument>@@ <expr><operator>-</operator><literal type="number">124</literal></expr></argument>,<argument><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">124</literal></expr></argument>,<argument><expr><literal type="number">7</literal> @@ class <name>PopulateMetadata</name> extends <name>MasterRepo</name> <block>{
   
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>environment</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
   }</block></expr></argument>
   
 }</argument_list></call>
@@ <operator>-</operator><literal type="number">153</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">153</literal></expr>,<expr><literal type="number">7</literal> @@ <name>class</name> <name>CreateDir</name> extends <name>MasterRepo</name> <block>{
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>master</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
     <expr><name>VolumeManager</name> <name>fs</name> <operator>=</operator> <call><name><name>master</name><operator>.</operator><name>getFileSystem</name></name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr>;
    <for>for<control>(<init><decl><type><name>String</name></type> <name>dir</name> <range>: <expr><call><name><name>ServerConstants</name><operator>.</operator><name>getTablesDirs</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
    <for>for <control>(<init><decl><type><name>String</name></type> <name>dir</name> <range>: <expr><call><name><name>ServerConstants</name><operator>.</operator><name>getTablesDirs</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
       <expr_stmt><expr><call><name><name>fs</name><operator>.</operator><name>deleteRecursively</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Path</name><argument_list>(<argument><expr><name>dir</name> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt/></block_content></block></for></block_content></block></for>}</block>
     
@@ <operator>-</operator><literal type="number">225</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">225</literal></expr>,<expr><literal type="number">7</literal> @@ <name>class</name> <name>SetupPermissions</name> extends <name>MasterRepo</name> <block>{
     <expr><name>SecurityOperation</name> <name>security</name> <operator>=</operator> <call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr>;
     <for>for <control>(<init><decl><type><name>TablePermission</name></type> <name>permission</name> <range>: <expr><call><name><name>TablePermission</name><operator>.</operator><name>values</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>grantTablePermission</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>grantTablePermission</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/></block_content></block></try></block_content></block></for>}</block></expr> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>Logger</name><operator>.</operator><name>getLogger</name></name><argument_list>(<argument><expr><name><name>FinishCreateTable</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>error</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><name>e</name></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">240</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">240</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>SetupPermissions</name> extends <name>MasterRepo</name> <block>{
   
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>env</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr>;
   }</block></expr></expr_stmt></block_content></block></catch>
   
 }</block>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>DeleteTable</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>DeleteTable</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">7d6186e86</literal><operator>..</operator><literal type="number">3786d27cf</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>DeleteTable</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>DeleteTable</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReports</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>fs</name><operator>.</operator><name>Path</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">155</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">155</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>CleanUp</name> extends <name>MasterRepo</name> <block>{
       <comment type="line">// Intentionally do not pass master lock. If master loses lock, this operation may complete before master can kill itself.</comment>
       <comment type="line">// If the master lock passed to deleteTable, it is possible that the delete mutations will be dropped. If the delete operations</comment>
       <comment type="line">// are dropped and the operation completes, then the deletes will not be repeated.</comment>
      <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>refCount</name> <operator>!=</operator> <literal type="number">0</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;
      <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>refCount</name> <operator>!=</operator> <literal type="number">0</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;
     }</block></expr></expr_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
       <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"error deleting "</literal> <operator>+</operator> <name>tableId</name> <operator>+</operator> <literal type="string">" from metadata table"</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></catch>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">189</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">189</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>CleanUp</name> extends <name>MasterRepo</name> <block>{
     
     <comment type="line">// remove any permissions associated with this table</comment>
     <try>try <block>{<block_content>
      <expr_stmt><expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt/></block_content></block></try>}</block></expr></expr_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
       <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></catch>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>ImportTable</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>ImportTable</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>ae6930bd1</name><operator>..</operator><literal type="number">364c2676d</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>ImportTable</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>master</name><operator>/</operator><name>tableOps</name><operator>/</operator><name><name>ImportTable</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">59</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">59</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>Master</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>UniqueNameAllocator</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>TablePropUtil</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">293</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">293</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>PopulateMetadataTable</name> extends <name>MasterRepo</name> <block>{
   
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>environment</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>deleteTable</name></name><argument_list>(<argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>environment</name><operator>.</operator><name>getMasterLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
   }</block></expr></expr_stmt>
 }
 
@<annotation>@</annotation> -<expr_stmt><expr><literal type="number">484</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">484</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>ImportSetupPermissions</name> extends <name>MasterRepo</name> <block>{
     <expr><name>SecurityOperation</name> <name>security</name> <operator>=</operator> <call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr>;
     <for>for <control>(<init><decl><type><name>TablePermission</name></type> <name>permission</name> <range>: <expr><call><name><name>TablePermission</name><operator>.</operator><name>values</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>grantTablePermission</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>security</name><operator>.</operator><name>grantTablePermission</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>user</name></name></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>, <argument><expr><name>permission</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt/></block_content></block></try></block_content></block></for>}</block></expr></expr_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>Logger</name><operator>.</operator><name>getLogger</name></name><argument_list>(<argument><expr><name><name>ImportSetupPermissions</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>error</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><name>e</name></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">499</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">499</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <name>ImportSetupPermissions</name> extends <name>MasterRepo</name> <block>{
   
   @<expr><name>Override</name>
   <specifier>public</specifier> <name>void</name> <call><name>undo</name><argument_list>(<argument><expr><name>long</name> <name>tid</name></expr></argument>, <argument><expr><name>Master</name> <name>env</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>deleteTable</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>tableInfo</name><operator>.</operator><name>tableId</name></name></expr></argument>)</argument_list></call></expr>;
   }</block></expr></expr_stmt>
 </block_content>}</block></catch>
 
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name><name>Monitor</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name><name>Monitor</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">56e473a5a</literal><operator>..</operator><literal type="number">5957f261f</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name><name>Monitor</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name><name>Monitor</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">70</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">70</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>servlets</name><operator>.</operator><name>trace</name><operator>.</operator><name>ShowTrace</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>servlets</name><operator>.</operator><name>trace</name><operator>.</operator><name>Summary</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReports</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemType</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>EmbeddedWebServer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">292</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">292</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Monitor</name> <block>{
         <try>try <block>{<block_content>
           <expr_stmt><expr><name>client</name> <operator>=</operator> <call><name><name>MasterClient</name><operator>.</operator><name>getConnection</name></name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
           <if_stmt><if>if <condition>(<expr><name>client</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><name>mmi</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><name>mmi</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
             <expr_stmt><expr><name>retry</name> <operator>=</operator> <literal type="boolean">false</literal></expr>;</expr_stmt>
           <expr_stmt/></block_content></block></if></if_stmt></block_content></block></try>}</block></expr></expr_stmt> <if_stmt><else>else <block>{<block_content>
             <expr_stmt><expr><name>mmi</name> <operator>=</operator> <literal type="null">null</literal></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">432</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">432</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Monitor</name> <block>{
           <expr><name>address</name> <operator>=</operator> <operator>new</operator> <call><name>ServerServices</name><argument_list>(<argument><expr><operator>new</operator> <call><name>String</name><argument_list>(<argument><expr><call><name><name>zk</name><operator>.</operator><name>getData</name></name><argument_list>(<argument><expr><name>path</name> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <call><name><name>locks</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>getAddress</name><argument_list>(<argument><expr><name><name>Service</name><operator>.</operator><name>GC_CLIENT</name></name></expr></argument>)</argument_list></call></expr>;
           <name><name>GCMonitorService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>GCMonitorService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><call><name><name>config</name><operator>.</operator><name>getConfiguration</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
           <try>try <block>{<block_content>
            <expr_stmt><expr><name>result</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getStatus</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><name>result</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getStatus</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
           </block_content>}</block> <finally>finally <block>{<block_content>
             <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
           </block_content>}</block></finally></try>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TServersServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TServersServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">095725efb</literal><operator>..</operator><literal type="number">848460887</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TServersServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TServersServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">27</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">27</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@</expr></expr_stmt> <import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Map</name><operator>.</operator><name>Entry</name></name>;</import>
 <import>import <name><name>javax</name><operator>.</operator><name>servlet</name><operator>.</operator><name>http</name><operator>.</operator><name>HttpServletRequest</name></name>;</import>
 <import>import <name><name>javax</name><operator>.</operator><name>servlet</name><operator>.</operator><name>http</name><operator>.</operator><name>HttpServletResponse</name></name>;</import>
 
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>data</name><operator>.</operator><name>KeyExtent</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>DeadServer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>MasterMonitorInfo</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">51</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">50</literal></expr><operator>,</operator><expr><literal type="number">9</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>PercentageType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>ProgressChartType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>TServerLinkType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>TableLinkType</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletStatsKeeper</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>codec</name><operator>.</operator><name>binary</name><operator>.</operator><name>Base64</name></name>;</import>
 
 <class><specifier>public</specifier> class <name>TServersServlet</name> <super_list><extends>extends <super><name>BasicServlet</name></super></extends></super_list> <block>{
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">126</literal></expr><operator>,</operator><expr><literal type="number">9</literal> <operator>+</operator><literal type="number">126</literal></expr><operator>,</operator><expr><literal type="number">9</literal> @@ <specifier>public</specifier> <name>class</name> <name>TServersServlet</name> extends <name>BasicServlet</name> <block>{
       <expr><name><name>TabletClientService</name><operator>.</operator><name>Client</name></name> <name>client</name> <operator>=</operator> <call><name><name>ThriftUtil</name><operator>.</operator><name>getClient</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name><name>TabletClientService</name><operator>.</operator><name>Client</name><operator>.</operator><name>Factory</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>address</name></expr></argument>, <argument><expr><call><name><name>Monitor</name><operator>.</operator><name>getSystemConfiguration</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</block></expr></expr_stmt>
       <try>try <block>{<block_content>
         <for>for <control>(<init><decl><type><name>String</name></type> <name>tableId</name> <range>: <expr><call><name><name>Monitor</name><operator>.</operator><name>getMmi</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name><name>tableMap</name><operator>.</operator><name>keySet</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<block_content>
          <expr_stmt><expr><call><name><name>tsStats</name><operator>.</operator><name>addAll</name></name><argument_list>(<argument><expr><call><name><name>client</name><operator>.</operator><name>getTabletStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          <expr_stmt><expr><call><name><name>tsStats</name><operator>.</operator><name>addAll</name></name><argument_list>(<argument><expr><call><name><name>client</name><operator>.</operator><name>getTabletStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         </block_content>}</block></for>
        <expr_stmt><expr><name>historical</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getHistoricalStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>historical</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getHistoricalStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <finally>finally <block>{<block_content>
         <expr_stmt><expr><call><name><name>ThriftUtil</name><operator>.</operator><name>returnClient</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></finally></try>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">239</literal></expr><operator>,</operator><expr><literal type="number">12</literal> <operator>+</operator><literal type="number">239</literal></expr><operator>,</operator><expr><literal type="number">10</literal> @@ <specifier>public</specifier> <name>class</name> <name>TServersServlet</name> extends <name>BasicServlet</name> <block>{
     
     <expr><call><name><name>opHistoryDetails</name><operator>.</operator><name>addRow</name></name><argument_list>(<argument><expr><literal type="string">"Split"</literal></expr></argument>, <argument><expr><name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>num</name></name></expr></argument>, <argument><expr><name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>fail</name></name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>,
         <argument><expr><name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal> <operator>?</operator> <operator>(</operator><name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>elapsed</name></name> <operator>/</operator> <name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>num</name></name><operator>)</operator> <operator>:</operator> <literal type="null">null</literal></expr></argument>, <argument><expr><name>splitStdDev</name></expr></argument>, <argument><expr><name><name>historical</name><operator>.</operator><name>splits</name><operator>.</operator><name>elapsed</name></name></expr></argument>)</argument_list></call></expr>;
    <call><name><name>opHistoryDetails</name><operator>.</operator><name>addRow</name></name><argument_list>(<argument><expr><literal type="string">"Major&amp;nbsp;Compaction"</literal></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>fail</name></name></expr></argument>,
        <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>queueTime</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>majorQueueStdDev</name></expr></argument>,
        <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>elapsed</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>majorStdDev</name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>elapsed</name></name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>opHistoryDetails</name><operator>.</operator><name>addRow</name></name><argument_list>(<argument><expr><literal type="string">"Minor&amp;nbsp;Compaction"</literal></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>fail</name></name></expr></argument>,
        <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>queueTime</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>minorQueueStdDev</name></expr></argument>,
        <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>elapsed</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>minorStdDev</name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>elapsed</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>opHistoryDetails</name><operator>.</operator><name>addRow</name></name><argument_list>(<argument><expr><literal type="string">"Major&amp;nbsp;Compaction"</literal></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>fail</name></name></expr></argument>, <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>queueTime</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr>
        </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>majorQueueStdDev</name></expr></argument>, <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>elapsed</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>majorStdDev</name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>majors</name><operator>.</operator><name>elapsed</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>opHistoryDetails</name><operator>.</operator><name>addRow</name></name><argument_list>(<argument><expr><literal type="string">"Minor&amp;nbsp;Compaction"</literal></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>fail</name></name></expr></argument>, <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>queueTime</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr>
        </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>minorQueueStdDev</name></expr></argument>, <argument><expr><ternary><condition><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name> <operator>!=</operator> <literal type="number">0</literal></expr> ?</condition><then> <expr><operator>(</operator><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>elapsed</name></name> <operator>/</operator> <name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>num</name></name><operator>)</operator></expr> </then><else>: <expr><literal type="null">null</literal></expr></else></ternary></expr></argument>, <argument><expr><name>minorStdDev</name></expr></argument>, <argument><expr><name><name>total</name><operator>.</operator><name>minors</name><operator>.</operator><name>elapsed</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <constructor_decl><name><name>opHistoryDetails</name><operator>.</operator><name>generate</name></name><parameter_list>(<parameter><decl><type><name>req</name></type></decl></parameter>, <parameter><decl><type><name>sb</name></type></decl></parameter>)</parameter_list>;</constructor_decl>
   }</block></class>
   
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TablesServlet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TablesServlet</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">127989c2e</literal><operator>..</operator><literal type="number">85d17ff5c</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TablesServlet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>monitor</name><operator>/</operator><name>servlets</name><operator>/</operator><name><name>TablesServlet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>DurationType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>NumberType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>TableLinkType</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>util</name><operator>.</operator><name>celltypes</name><operator>.</operator><name>TableStateType</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import>
 
 <class><specifier>public</specifier> class <name>TablesServlet</name> <super_list><extends>extends <super><name>BasicServlet</name></super></extends></super_list> <block>{
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">151</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">151</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>TablesServlet</name> extends <name>BasicServlet</name> <block>{
       <expr><call><name><name>locs</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><call><name><name>instance</name><operator>.</operator><name>getRootTabletLocation</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
     }</block></expr></expr_stmt> <if_stmt><else>else <block>{<block_content>
       <decl_stmt><decl><type><name>String</name></type> <name>systemTableName</name> <init>= <expr><ternary><condition><expr><call><name><name>MetadataTable</name><operator>.</operator><name>ID</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr> ?</condition><then> <expr><name><name>RootTable</name><operator>.</operator><name>NAME</name></name></expr> </then><else>: <expr><name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name></expr></else></ternary></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Range</name><argument_list>(<argument><expr><call><name><name>KeyExtent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>(
          <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>KeyExtent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>systemTableName</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Range</name><argument_list>(<argument><expr><call><name><name>KeyExtent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(
          <argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>KeyExtent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>systemTableName</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       
       <while>while <condition>(<expr><call><name><name>scanner</name><operator>.</operator><name>hasNext</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
         <decl_stmt><decl><type><name>TabletLocationState</name></type> <name>state</name> <init>= <expr><call><name><name>scanner</name><operator>.</operator><name>next</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReport</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReport</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>a34de9fad</name><operator>..</operator><literal type="number">530ef764f</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReport</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReport</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">34</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">34</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>fate</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name><operator>.</operator><name>NodeExistsPolicy</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>fate</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name><operator>.</operator><name>NodeMissingPolicy</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooReaderWriter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">125</literal></expr><operator>,</operator><expr><literal type="number">13</literal> <operator>+</operator><literal type="number">125</literal></expr><operator>,</operator><expr><literal type="number">13</literal> @@ <specifier>public</specifier> <name>class</name> <name>ProblemReport</name> <block>{
   <expr><name>void</name> <call><name>removeFromMetadataTable</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
     <expr><name>Mutation</name> <name>m</name> <operator>=</operator> <operator>new</operator> <call><name>Mutation</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"~err_"</literal> <operator>+</operator> <name>tableName</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
     <call><name><name>m</name><operator>.</operator><name>putDelete</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><call><name><name>problemType</name><operator>.</operator><name>name</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>resource</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>m</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>m</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></while>
   
   <function><type><name>void</name></type> <name>saveToMetadataTable</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
     <decl_stmt><decl><type><name>Mutation</name></type> <name>m</name> <init>= <expr><operator>new</operator> <call><name>Mutation</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"~err_"</literal> <operator>+</operator> <name>tableName</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>m</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><call><name><name>problemType</name><operator>.</operator><name>name</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>resource</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>Value</name><argument_list>(<argument><expr><call><name>encode</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>m</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>m</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></function>
   
   <function><type><name>void</name></type> <name>removeFromZooKeeper</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReports</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReports</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">5b82621c0</literal><operator>..</operator><literal type="number">5422e903a</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReports</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>problems</name><operator>/</operator><name><name>ProblemReports</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>NamingThreadFactory</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>fate</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>IZooReaderWriter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>MetadataTableUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooReaderWriter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>collections</name><operator>.</operator><name>map</name><operator>.</operator><name>LRUMap</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">155</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">155</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>ProblemReports</name> implements <name><name>Iterable</name><argument_list type="generic">&lt;<argument><name>ProblemReport</name></argument>&gt;</argument_list></name> <block>{
       <return>return;</return>
     }</block></expr></expr_stmt>
     
    <decl_stmt><decl><type><name>Connector</name></type> <name>connector</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Connector</name></type> <name>connector</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <decl_stmt><decl><type><name>Scanner</name></type> <name>scanner</name> <init>= <expr><call><name><name>connector</name><operator>.</operator><name>createScanner</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>scanner</name><operator>.</operator><name>addScanIterator</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>IteratorSetting</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="string">"keys-only"</literal></expr></argument>, <argument><expr><name><name>SortedKeyIterator</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">174</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">174</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>ProblemReports</name> implements <name><name>Iterable</name><argument_list type="generic">&lt;<argument><name>ProblemReport</name></argument>&gt;</argument_list></name> <block>{
     }</block></expr></expr_stmt>
     
     <if_stmt><if>if <condition>(<expr><name>hasProblems</name></expr>)</condition><block type="pseudo"><block_content>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>delMut</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getMetadataTable</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>update</name><argument_list>(<argument><expr><name>delMut</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name><name>Iterator</name><argument_list type="generic">&lt;<argument><name>ProblemReport</name></argument>&gt;</argument_list></name></type> <name>iterator</name><parameter_list>(<parameter><decl><type><specifier>final</specifier> <name>String</name></type> <name>table</name></decl></parameter>)</parameter_list> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">210</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">210</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>ProblemReports</name> implements <name><name>Iterable</name><argument_list type="generic">&lt;<argument><name>ProblemReport</name></argument>&gt;</argument_list></name> <block>{
           <if_stmt><if>if <condition>(<expr><name>iter2</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
             <try>try <block>{<block_content>
               <if_stmt><if>if <condition>(<expr><operator>(</operator><name>table</name> <operator>==</operator> <literal type="null">null</literal> <operator>||</operator> <operator>!</operator><call><name><name>table</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>)</argument_list></call><operator>)</operator> <operator>&amp;&amp;</operator> <name>iter1Count</name> <operator>==</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
                <decl_stmt><decl><type><name>Connector</name></type> <name>connector</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name>Connector</name></type> <name>connector</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                 <decl_stmt><decl><type><name>Scanner</name></type> <name>scanner</name> <init>= <expr><call><name><name>connector</name><operator>.</operator><name>createScanner</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                 
                 <expr_stmt><expr><call><name><name>scanner</name><operator>.</operator><name>setTimeout</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><name><name>TimeUnit</name><operator>.</operator><name>SECONDS</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>AuditedSecurityOperation</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>AuditedSecurityOperation</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">125915b28</literal><operator>..</operator><name>a74f58438</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>AuditedSecurityOperation</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>AuditedSecurityOperation</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">92</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">92</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>AuditedSecurityOperation</name> extends <name>SecurityOperation</name> <block>{
   
   <comment type="line">// Is INFO the right level to check? Do we even need that check?</comment>
   <expr><specifier>private</specifier> <specifier>static</specifier> <name>boolean</name> <call><name>shouldAudit</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>)</argument_list></call> <block>{
    <return>return <expr><operator>!</operator><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>;</return></block></expr>
    <return>return <expr><operator>!</operator><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getClass</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getName</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   }</block></expr></expr_stmt>
   
   <comment type="block">/*
diff --git a/server/src/main/java/org/apache/accumulo/server/security/SecurityOperation.java b/server/src/main/java/org/apache/accumulo/server/security/SecurityOperation.java
index e948894a6..2b9833188 100644
-- a/server/src/main/java/org/apache/accumulo/server/security/SecurityOperation.java
++ b/server/src/main/java/org/apache/accumulo/server/security/SecurityOperation.java
@@ -103,12 +103,7 @@ public class SecurityOperation {
     return toRet;
   }
   
  /**
   * 
   * @deprecated not for client use
   */</comment>
  <constructor><annotation>@<name>Deprecated</name></annotation>
  <specifier>public</specifier> <name>SecurityOperation</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>instanceId</name></decl></parameter>)</parameter_list> <block>{<block_content>
  <constructor><specifier>protected</specifier> <name>SecurityOperation</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>instanceId</name></decl></parameter>)</parameter_list> <block>{<block_content>
     <expr_stmt><expr><name>ZKUserPath</name> <operator>=</operator> <name><name>Constants</name><operator>.</operator><name>ZROOT</name></name> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <name>instanceId</name> <operator>+</operator> <literal type="string">"/users"</literal></expr>;</expr_stmt>
     <expr_stmt><expr><name>zooCache</name> <operator>=</operator> <operator>new</operator> <call><name>ZooCache</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></constructor>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">128</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">123</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   <expr><specifier>public</specifier> <name>void</name> <call><name>initializeSecurity</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>rootPrincipal</name></expr></argument>, <argument><expr><name><name>byte</name><index>[]</index></name> <name>token</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>AccumuloSecurityException</name></expr></argument>, <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
     
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name>isSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>AccumuloSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
     
     <expr_stmt><expr><call><name><name>authenticator</name><operator>.</operator><name>initializeSecurity</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>rootPrincipal</name></expr></argument>, <argument><expr><name>token</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">148</literal></expr><operator>,</operator><expr><literal type="number">27</literal> <operator>+</operator><literal type="number">143</literal></expr><operator>,</operator><expr><literal type="number">34</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
     <return>return <expr><name>rootUserName</name></expr>;</return>
   }</block></expr></expr_stmt>
   
  <function><type><specifier>public</specifier> <name>boolean</name></type> <name>isSystemUser</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>)</parameter_list> <block>{<block_content>
    <return>return <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getClass</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getName</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
  </block_content>}</block></function>
  
   <function><type><specifier>private</specifier> <name>void</name></type> <name>authenticate</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>credentials</name><operator>.</operator><name>getInstanceId</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getInstanceID</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>INVALID_INSTANCEID</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
     
    <if_stmt><if>if <condition>(<expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <return>return;</return></block_content></block></if>
    <if type="elseif">else if <condition>(<expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>BAD_CREDENTIALS</name></name></expr></argument>)</argument_list></call></expr>;</throw>
    </block_content>}</block></if></if_stmt>
    
    <try>try <block>{<block_content>
      <decl_stmt><decl><type><name>AuthenticationToken</name></type> <name>token</name> <init>= <expr><call><name>reassembleToken</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>authenticator</name><operator>.</operator><name>authenticateUser</name></name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>token</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
        <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>BAD_CREDENTIALS</name></name></expr></argument>)</argument_list></call></expr>;</throw>
    <if_stmt><if>if <condition>(<expr><call><name>isSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
      <expr_stmt><expr><call><name>authenticateSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if> <else>else <block>{<block_content>
      <try>try <block>{<block_content>
        <decl_stmt><decl><type><name>AuthenticationToken</name></type> <name>token</name> <init>= <expr><call><name>reassembleToken</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>authenticator</name><operator>.</operator><name>authenticateUser</name></name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>token</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
          <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>BAD_CREDENTIALS</name></name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>
      </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>AccumuloSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <throw>throw <expr><call><name><name>e</name><operator>.</operator><name>asThriftException</name></name><argument_list>()</argument_list></call></expr>;</throw>
       </block_content>}</block></catch></try>
    </block_content>}</block></else></if_stmt> <catch>catch <parameter_list>(<parameter><decl><type><name>AccumuloSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
      <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <throw>throw <expr><call><name><name>e</name><operator>.</operator><name>asThriftException</name></name><argument_list>()</argument_list></call></expr>;</throw>
     </block_content>}</block></catch>
   </block_content>}</block></if></if_stmt>
   
  <function><type><specifier>private</specifier> <name>void</name></type> <name>authenticateSystemUser</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>BAD_CREDENTIALS</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
  </block_content>}</block></function>
  
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canAskAboutUser</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <comment type="line">// Authentication done in canPerformSystemActions</comment>
     <if_stmt><if>if <condition>(<expr><operator>!</operator><operator>(</operator><call><name>canPerformSystemActions</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call><operator>)</operator></expr>)</condition><block type="pseudo"><block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">178</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">180</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>authenticateUser</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>toAuth</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>canAskAboutUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><call><name><name>toAuth</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></block_content></block></if></if_stmt>
    <comment type="line">// User is already authenticated from canAskAboutUser, this gets around issues with !SYSTEM user</comment>
    <comment type="line">// User is already authenticated from canAskAboutUser</comment>
     <if_stmt><if>if <condition>(<expr><call><name><name>credentials</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name>toAuth</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <return>return <expr><literal type="boolean">true</literal></expr>;</return></block_content></block></if></if_stmt>
     <try>try <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">189</literal></expr><operator>,</operator><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">191</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
     }</block></expr></expr_stmt>
   </block_content>}</block></try>
   
  <comment type="block" format="javadoc">/**
   * @param toAuth
   * @return
   * @throws AccumuloSecurityException
   */</comment>
   <function><type><specifier>private</specifier> <name>AuthenticationToken</name></type> <name>reassembleToken</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>toAuth</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>AccumuloSecurityException</name></expr></argument></throws> <block>{<block_content>
     <decl_stmt><decl><type><name>String</name></type> <name>tokenClass</name> <init>= <expr><call><name><name>toAuth</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
     <if_stmt><if>if <condition>(<expr><call><name><name>authenticator</name><operator>.</operator><name>validTokenClass</name></name><argument_list>(<argument><expr><name>tokenClass</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">207</literal></expr><operator>,</operator><expr><literal type="number">13</literal> <operator>+</operator><literal type="number">204</literal></expr><operator>,</operator><expr><literal type="number">9</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
     
     <expr><call><name>targetUserExists</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>;</block></expr></expr_stmt>
     
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <operator>!</operator><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <operator>!</operator><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
     
    <comment type="line">// system user doesn't need record-level authorizations for the tables it reads (for now)</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <return>return <expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr>;</return></block_content></block></if></if_stmt>
    
     <try>try <block>{<block_content>
       <return>return <expr><call><name><name>authorizor</name><operator>.</operator><name>getCachedUserAuthorizations</name></name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>;</return>
     </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>AccumuloSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">222</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">215</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   }</block>
   
   <specifier>public</specifier> <name>Authorizations</name> <call><name>getUserAuthorizations</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
    <comment type="line">// system user doesn't need record-level authorizations for the tables it reads</comment>
    <if_stmt><if>if <condition>(<expr><call><name>isSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
      <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <return>return <expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr>;</return>
    </block_content>}</block></if></if_stmt>
     <return>return <expr><call><name>getUserAuthorizations</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></catch></try>
   
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">230</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">228</literal></expr><operator>,</operator><expr><literal type="number">20</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
    <expr><operator>*</operator> 
    <operator>*</operator> @</expr><return>return <expr><literal type="boolean">true</literal></expr></return> <if_stmt><if>if a user exists and has permission<empty_stmt>;</empty_stmt></if></if_stmt> <literal type="boolean">false</literal> <name>otherwise</name>
    <operator>*</operator><operator>/</operator>
  <specifier>private</specifier> <name>boolean</name> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>String</name> <name>user</name></expr></argument>, <argument><expr><name>SystemPermission</name> <name>permission</name></expr></argument>, <argument><expr><name>boolean</name> <name>useCached</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{</block></expr></argument></throws></block></expr></expr_stmt>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
  <function><type><specifier>private</specifier> <name>boolean</name></type> <name>hasSystemPermission</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>SystemPermission</name></type> <name>permission</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>useCached</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name>isSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <return>return <expr><literal type="boolean">true</literal></expr>;</return></block_content></block></if></if_stmt>
    <return>return <expr><call><name>_hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>permission</name></expr></argument>, <argument><expr><name>useCached</name></expr></argument>)</argument_list></call></expr>;</return>
  </block_content>}</block></function></block_content></block></if></if_stmt>
  
  <comment type="block" format="javadoc">/**
   * Checks if a user has a system permission&lt;br/&gt;
   * This cannot check if a system user has permission.
   * 
   * @return true if a user exists and has permission; false otherwise
   */</comment>
  <function><type><specifier>private</specifier> <name>boolean</name></type> <name>_hasSystemPermission</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>SystemPermission</name></type> <name>permission</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>useCached</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <return>return <expr><literal type="boolean">true</literal></expr>;</return></block_content></block></if></if_stmt>
     
     <expr_stmt><expr><call><name>targetUserExists</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">250</literal></expr><operator>,</operator><expr><literal type="number">10</literal> <operator>+</operator><literal type="number">260</literal></expr><operator>,</operator><expr><literal type="number">19</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
    <expr><operator>*</operator> 
    <operator>*</operator> @</expr><return>return <expr><literal type="boolean">true</literal></expr></return> <if_stmt><if>if a user exists and has permission<empty_stmt>;</empty_stmt></if></if_stmt> <literal type="boolean">false</literal> <name>otherwise</name>
    <operator>*</operator><operator>/</operator>
  <specifier>protected</specifier> <name>boolean</name> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>String</name> <name>user</name></expr></argument>, <argument><expr><name>String</name> <name>table</name></expr></argument>, <argument><expr><name>TablePermission</name> <name>permission</name></expr></argument>, <argument><expr><name>boolean</name> <name>useCached</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{</block></expr></argument></throws></block></expr></expr_stmt>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
  <function><type><specifier>protected</specifier> <name>boolean</name></type> <name>hasTablePermission</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>table</name></decl></parameter>, <parameter><decl><type><name>TablePermission</name></type> <name>permission</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>useCached</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name>isSystemUser</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <return>return <expr><literal type="boolean">true</literal></expr>;</return></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>_hasTablePermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name>permission</name></expr></argument>, <argument><expr><name>useCached</name></expr></argument>)</argument_list></call></expr>;</return>
  </block_content>}</block></function></block_content></block></if></if_stmt>
  
  <comment type="block" format="javadoc">/**
   * Checks if a user has a table permission&lt;br/&gt;
   * This cannot check if a system user has permission.
   * 
   * @return true if a user exists and has permission; false otherwise
   */</comment>
  <function><type><specifier>protected</specifier> <name>boolean</name></type> <name>_hasTablePermission</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>table</name></decl></parameter>, <parameter><decl><type><name>TablePermission</name></type> <name>permission</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>useCached</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>targetUserExists</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
     <if_stmt><if>if <condition>(<expr><operator>(</operator><call><name><name>table</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>table</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>RootTable</name><operator>.</operator><name>ID</name></name></expr></argument>)</argument_list></call><operator>)</operator> <operator>&amp;&amp;</operator> <call><name><name>permission</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">273</literal></expr><operator>,</operator><expr><literal type="number">16</literal> <operator>+</operator><literal type="number">292</literal></expr><operator>,</operator><expr><literal type="number">14</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   <comment type="line">// some people just aren't allowed to ask about other users; here are those who can ask</comment>
   <expr><specifier>private</specifier> <name>boolean</name> <call><name>canAskAboutOtherUsers</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>user</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt></block_content></block></if></if_stmt>
    <return>return <expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>private</specifier> <name>void</name></type> <name>targetUserExists</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <return>return;</return></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
    
     <try>try <block>{<block_content>
       <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>authenticator</name><operator>.</operator><name>userExists</name></name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
         <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>USER_DOESNT_EXIST</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">293</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">310</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>canScan</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>table</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></try>
   
   <decl_stmt><decl><type><specifier>public</specifier> <name>boolean</name></type> <name>canScan</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>table</name></expr></argument>, <argument><expr><name>TRange</name> <name>range</name></expr></argument>, <argument><expr><name><name>List</name><argument_list type="generic">&lt;<argument><name>TColumn</name></argument>&gt;</argument_list></name> <name>columns</name></expr></argument>, <argument><expr><name><name>List</name><argument_list type="generic">&lt;<argument><name>IterInfo</name></argument>&gt;</argument_list></name> <name>ssiList</name></expr></argument>,
<argument>@@ <expr><operator>-</operator><literal type="number">308</literal></expr></argument>,<argument><expr><literal type="number">14</literal> <operator>+</operator><literal type="number">325</literal></expr></argument>,<argument><expr><literal type="number">13</literal> @@ <specifier>public</specifier> class <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>canWrite</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>table</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></argument></argument_list></decl></decl_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canSplitTablet</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>table</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <comment type="block" format="javadoc">/**
@@ -323,19 +339,17 @@ public class SecurityOperation {
    */</comment>
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canPerformSystemActions</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canFlush</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canAlterTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canCreateTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableName</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">344</literal></expr><operator>,</operator><expr><literal type="number">42</literal> <operator>+</operator><literal type="number">358</literal></expr><operator>,</operator><expr><literal type="number">39</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>canCreateTable</name><argument_list>(<argument><expr><name>TCredentials</name> <name>c</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canRenameTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>oldTableName</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>newTableName</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canCloneTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableName</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>&amp;&amp;</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>&amp;&amp;</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canDeleteTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>DROP_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>DROP_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canOnlineOfflineTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>TableOperation</name></type> <name>op</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canMerge</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canDeleteRange</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableName</name></decl></parameter>, <parameter><decl><type><name>Text</name></type> <name>startRow</name></decl></parameter>, <parameter><decl><type><name>Text</name></type> <name>endRow</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>SYSTEM</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canBulkImport</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableName</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>dir</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>failDir</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">388</literal></expr><operator>,</operator><expr><literal type="number">98</literal> <operator>+</operator><literal type="number">399</literal></expr><operator>,</operator><expr><literal type="number">66</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>canBulkImport</name><argument_list>(<argument><expr><name>TCredentials</name> <name>c</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>BULK_IMPORT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>BULK_IMPORT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canCompact</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>WRITE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canChangeAuthorizations</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canChangePassword</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    <return>return <expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name>user</name></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canCreateUser</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// don't allow creating a user with the same name as system user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canDropUser</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// can't delete root or system users</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>DROP_USER</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canGrantSystem</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>SystemPermission</name></type> <name>sysPerm</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// can't modify system user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    
     <comment type="line">// can't grant GRANT</comment>
     <if_stmt><if>if <condition>(<expr><call><name><name>sysPerm</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>GRANT_INVALID</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canGrantTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>table</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// can't modify system user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canRevokeSystem</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>SystemPermission</name></type> <name>sysPerm</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// can't modify system or root user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call> <operator>||</operator> <call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
    <comment type="line">// can't modify root user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><call><name>getRootUsername</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block_content></block></if></if_stmt>
     
     <comment type="line">// can't revoke GRANT</comment>
     <if_stmt><if>if <condition>(<expr><call><name><name>sysPerm</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>GRANT_INVALID</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
     
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canRevokeTable</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>c</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>table</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    
    <comment type="line">// can't modify system user</comment>
    <if_stmt><if>if <condition>(<expr><call><name><name>user</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
      <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call>
        <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>c</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>ALTER_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call> <operator>||</operator> <call><name>hasTablePermission</name><argument_list>(<argument><expr><name>c</name></expr></argument>, <argument><expr><name>table</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>GRANT</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>void</name></type> <name>changeAuthorizations</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>Authorizations</name></type> <name>authorizations</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">602</literal></expr><operator>,</operator><expr><literal type="number">13</literal> <operator>+</operator><literal type="number">581</literal></expr><operator>,</operator><expr><literal type="number">13</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>user</name></expr></argument>, <argument><expr><name>SystemPermission</name> <name>permissionById</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{</block></expr></argument></throws></expr>
     <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name>canAskAboutOtherUsers</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt></block></expr></expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><name>permissionById</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>_hasSystemPermission</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><name>permissionById</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>hasTablePermission</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>user</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>TablePermission</name></type> <name>permissionById</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name>canAskAboutOtherUsers</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>user</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo"><block_content>
       <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw></block_content></block></if></if_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>permissionById</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>_hasTablePermission</name><argument_list>(<argument><expr><name>user</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>permissionById</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name><name>Set</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></type> <name>listUsers</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">635</literal></expr><operator>,</operator><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">614</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityOperation</name> <block>{
   
   <expr><specifier>public</specifier> <name>boolean</name> <call><name>canExport</name><argument_list>(<argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>String</name> <name>tableName</name></expr></argument>, <argument><expr><name>String</name> <name>exportDir</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
     <expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</block></expr></expr_stmt>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasTablePermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>TablePermission</name><operator>.</operator><name>READ</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <name>boolean</name></type> <name>canImport</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableName</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>importDir</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
     <expr_stmt><expr><call><name>authenticate</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
    <return>return <expr><call><name>hasSystemPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name><name>SystemPermission</name><operator>.</operator><name>CREATE_TABLE</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>
 </block_content>}</block></function>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SecurityConstants</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentials</name><operator>.</operator><name>java</name></name>
<name>similarity</name> <name>index</name> <literal type="number">51</literal><operator>%</operator>
<name>rename</name> <name>from</name> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SecurityConstants</name><operator>.</operator><name>java</name></name>
<name>rename</name> <name>to</name> <name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentials</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">5c42a6900</literal><operator>..</operator><name>f30419afa</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SecurityConstants</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentials</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">28</literal></expr><operator>,</operator><expr><literal type="number">71</literal> <operator>+</operator><literal type="number">28</literal></expr><operator>,</operator><expr><literal type="number">76</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>Constants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>security</name><operator>.</operator><name>tokens</name><operator>.</operator><name>AuthenticationToken</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>security</name><operator>.</operator><name>tokens</name><operator>.</operator><name>PasswordToken</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>conf</name><operator>.</operator><name>Property</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>CredentialHelper</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>Credentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>ServerConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>conf</name><operator>.</operator><name>ServerConfiguration</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>codec</name><operator>.</operator><name>binary</name><operator>.</operator><name>Base64</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Writable</name></name>;</import>
 
<class><specifier>public</specifier> class <name>SecurityConstants</name> <block>{
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <name>SecurityPermission</name></type> <name>SYSTEM_CREDENTIALS_PERMISSION</name> <init>= <expr><operator>new</operator> <call><name>SecurityPermission</name><argument_list>(<argument><expr><literal type="string">"systemCredentialsPermission"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>static</specifier> <name>Logger</name></type> <name>log</name> <init>= <expr><call><name><name>Logger</name><operator>.</operator><name>getLogger</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
<comment type="block" format="javadoc">/**
 * Credentials for the system services.
 * 
 * @since 1.6.0
 */</comment>
<class><specifier>public</specifier> <specifier>final</specifier> class <name>SystemCredentials</name> <super_list><extends>extends <super><name>Credentials</name></super></extends></super_list> <block>{
  
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>SecurityPermission</name></type> <name>SYSTEM_CREDENTIALS_PERMISSION</name> <init>= <expr><operator>new</operator> <call><name>SecurityPermission</name><argument_list>(<argument><expr><literal type="string">"systemCredentialsPermission"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
   
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>SYSTEM_PRINCIPAL</name> <init>= <expr><literal type="string">"!SYSTEM"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>AuthenticationToken</name></type> <name>SYSTEM_TOKEN</name> <init>= <expr><call><name>makeSystemPassword</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>TCredentials</name></type> <name>systemCredentials</name> <init>= <expr><call><name><name>CredentialHelper</name><operator>.</operator><name>createSquelchError</name></name><argument_list>(<argument><expr><name>SYSTEM_PRINCIPAL</name></expr></argument>, <argument><expr><name>SYSTEM_TOKEN</name></expr></argument>, <argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call>
      <operator>.</operator><call><name>getInstanceID</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <name><name>byte</name><index>[]</index></name></type> <name>confChecksum</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <name>SystemCredentials</name></type> <name>SYSTEM_CREDS</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>SYSTEM_PRINCIPAL</name> <init>= <expr><literal type="string">"!SYSTEM"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>SystemToken</name></type> <name>SYSTEM_TOKEN</name> <init>= <expr><call><name><name>SystemToken</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
   
  <function><type><specifier>public</specifier> <specifier>static</specifier> <name>AuthenticationToken</name></type> <name>getSystemToken</name><parameter_list>()</parameter_list> <block>{<block_content>
    <return>return <expr><name>SYSTEM_TOKEN</name></expr>;</return>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>final</specifier> <name>TCredentials</name></type> <name>AS_THRIFT</name></decl>;</decl_stmt>
  
  <constructor><specifier>private</specifier> <name>SystemCredentials</name><parameter_list>()</parameter_list> <block>{<block_content>
    <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><name>SYSTEM_PRINCIPAL</name></expr></argument>, <argument><expr><name>SYSTEM_TOKEN</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><name>AS_THRIFT</name> <operator>=</operator> <call><name>toThrift</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></constructor>
   
  <function><type><specifier>public</specifier> <specifier>static</specifier> <name>TCredentials</name></type> <name>getSystemCredentials</name><parameter_list>()</parameter_list> <block>{<block_content>
  <function><type><specifier>public</specifier> <specifier>static</specifier> <name>SystemCredentials</name></type> <name>get</name><parameter_list>()</parameter_list> <block>{<block_content>
     <decl_stmt><decl><type><name>SecurityManager</name></type> <name>sm</name> <init>= <expr><call><name><name>System</name><operator>.</operator><name>getSecurityManager</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
     <if_stmt><if>if <condition>(<expr><name>sm</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
       <expr_stmt><expr><call><name><name>sm</name><operator>.</operator><name>checkPermission</name></name><argument_list>(<argument><expr><name>SYSTEM_CREDENTIALS_PERMISSION</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></if></if_stmt>
    <return>return <expr><name>systemCredentials</name></expr>;</return>
    <if_stmt><if>if <condition>(<expr><name>SYSTEM_CREDS</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
      <expr_stmt><expr><name>SYSTEM_CREDS</name> <operator>=</operator> <operator>new</operator> <call><name>SystemCredentials</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
      
    </block_content>}</block></if></if_stmt>
    <return>return <expr><name>SYSTEM_CREDS</name></expr>;</return>
   </block_content>}</block></function>
   
  <function><type><specifier>public</specifier> <specifier>static</specifier> <name>String</name></type> <name>getSystemPrincipal</name><parameter_list>()</parameter_list> <block>{<block_content>
    <return>return <expr><name>SYSTEM_PRINCIPAL</name></expr>;</return>
  <function><type><specifier>public</specifier> <name>TCredentials</name></type> <name>getAsThrift</name><parameter_list>()</parameter_list> <block>{<block_content>
    <return>return <expr><name>AS_THRIFT</name></expr>;</return>
   </block_content>}</block></function>
   
  <function><type><specifier>private</specifier> <specifier>static</specifier> <name>AuthenticationToken</name></type> <name>makeSystemPassword</name><parameter_list>()</parameter_list> <block>{<block_content>
    <decl_stmt><decl><type><name>int</name></type> <name>wireVersion</name> <init>= <expr><name><name>ServerConstants</name><operator>.</operator><name>WIRE_VERSION</name></name></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name><name>byte</name><index>[]</index></name></type> <name>inst</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getInstanceID</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBytes</name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>UTF8</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <try>try <block>{<block_content>
      <expr_stmt><expr><name>confChecksum</name> <operator>=</operator> <call><name>getSystemConfigChecksum</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>NoSuchAlgorithmException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
      <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><literal type="string">"Failed to compute configuration checksum"</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
    </block_content>}</block></catch></try>
  <comment type="block" format="javadoc">/**
   * An {@link AuthenticationToken} type for Accumulo servers for inter-server communication.
   * 
   * @since 1.6.0
   */</comment>
  <class><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> class <name>SystemToken</name> <super_list><extends>extends <super><name>PasswordToken</name></super></extends></super_list> <block>{
     
    <decl_stmt><decl><type><name>ByteArrayOutputStream</name></type> <name>bytes</name> <init>= <expr><operator>new</operator> <call><name>ByteArrayOutputStream</name><argument_list>(<argument><expr><literal type="number">3</literal> <operator>*</operator> <operator>(</operator><name><name>Integer</name><operator>.</operator><name>SIZE</name></name> <operator>/</operator> <name><name>Byte</name><operator>.</operator><name>SIZE</name></name><operator>)</operator> <operator>+</operator> <name><name>inst</name><operator>.</operator><name>length</name></name> <operator>+</operator> <name><name>confChecksum</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>DataOutputStream</name></type> <name>out</name> <init>= <expr><operator>new</operator> <call><name>DataOutputStream</name><argument_list>(<argument><expr><name>bytes</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <try>try <block>{<block_content>
      <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>wireVersion</name> <operator>*</operator> <operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name><name>inst</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>inst</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name><name>confChecksum</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>confChecksum</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
      <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw> <comment type="line">// this is impossible with</comment>
      <comment type="line">// ByteArrayOutputStream; crash hard</comment>
      <comment type="line">// if this happens</comment>
    <comment type="block" format="javadoc">/**
     * A Constructor for {@link Writable}.
     */</comment>
    <constructor><specifier>public</specifier> <name>SystemToken</name><parameter_list>()</parameter_list> <block>{<block_content/>}</block></constructor>
    
    <constructor><specifier>private</specifier> <name>SystemToken</name><parameter_list>(<parameter><decl><type><name><name>byte</name><index>[]</index></name></type> <name>systemPassword</name></decl></parameter>)</parameter_list> <block>{<block_content>
      <expr_stmt><expr><call><name>super</name><argument_list>(<argument><expr><name>systemPassword</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></constructor>
    <return>return <expr><operator>new</operator> <call><name>PasswordToken</name><argument_list>(<argument><expr><call><name><name>Base64</name><operator>.</operator><name>encodeBase64</name></name><argument_list>(<argument><expr><call><name><name>bytes</name><operator>.</operator><name>toByteArray</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
  </block_content>}</block></catch></try>
  
  <function><type><specifier>private</specifier> <specifier>static</specifier> <name><name>byte</name><index>[]</index></name></type> <name>getSystemConfigChecksum</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>NoSuchAlgorithmException</name></expr></argument></throws> <block>{<block_content>
    <if_stmt><if>if <condition>(<expr><name>confChecksum</name> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
      <decl_stmt><decl><type><name>MessageDigest</name></type> <name>md</name> <init>= <expr><call><name><name>MessageDigest</name><operator>.</operator><name>getInstance</name></name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>PW_HASH_ALGORITHM</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    
    <function><type><specifier>private</specifier> <specifier>static</specifier> <name>SystemToken</name></type> <name>get</name><parameter_list>()</parameter_list> <block>{<block_content>
      <decl_stmt><decl><type><name><name>byte</name><index>[]</index></name></type> <name>confChecksum</name></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>MessageDigest</name></type> <name>md</name></decl>;</decl_stmt>
      <try>try <block>{<block_content>
        <expr_stmt><expr><name>md</name> <operator>=</operator> <call><name><name>MessageDigest</name><operator>.</operator><name>getInstance</name></name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>PW_HASH_ALGORITHM</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>NoSuchAlgorithmException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><literal type="string">"Failed to compute configuration checksum"</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
      </block_content>}</block></catch></try>
       
      <comment type="line">// seed the config with the version and instance id, so at least</comment>
      <comment type="line">// it's not empty</comment>
      <comment type="line">// seed the config with the version and instance id, so at least it's not empty</comment>
       <expr_stmt><expr><call><name><name>md</name><operator>.</operator><name>update</name></name><argument_list>(<argument><expr><call><name><name>ServerConstants</name><operator>.</operator><name>WIRE_VERSION</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBytes</name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>UTF8</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <expr_stmt><expr><call><name><name>md</name><operator>.</operator><name>update</name></name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getInstanceID</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBytes</name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>UTF8</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">103</literal></expr><operator>,</operator><expr><literal type="number">9</literal> <operator>+</operator><literal type="number">108</literal></expr><operator>,</operator><expr><literal type="number">25</literal> @@ <specifier>public</specifier> <name>class</name> <name>SecurityConstants</name> <block>{
           <expr><call><name><name>md</name><operator>.</operator><name>update</name></name><argument_list>(<argument><expr><call><name><name>entry</name><operator>.</operator><name>getValue</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBytes</name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>UTF8</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
         }</block></expr></expr_stmt>
       </block_content>}</block></function>
      
       <expr_stmt><expr><name>confChecksum</name> <operator>=</operator> <call><name><name>md</name><operator>.</operator><name>digest</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
      
      <decl_stmt><decl><type><name>int</name></type> <name>wireVersion</name> <init>= <expr><name><name>ServerConstants</name><operator>.</operator><name>WIRE_VERSION</name></name></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>byte</name><index>[]</index></name></type> <name>inst</name> <init>= <expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getInstanceID</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getBytes</name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>UTF8</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      
      <decl_stmt><decl><type><name>ByteArrayOutputStream</name></type> <name>bytes</name> <init>= <expr><operator>new</operator> <call><name>ByteArrayOutputStream</name><argument_list>(<argument><expr><literal type="number">3</literal> <operator>*</operator> <operator>(</operator><name><name>Integer</name><operator>.</operator><name>SIZE</name></name> <operator>/</operator> <name><name>Byte</name><operator>.</operator><name>SIZE</name></name><operator>)</operator> <operator>+</operator> <name><name>inst</name><operator>.</operator><name>length</name></name> <operator>+</operator> <name><name>confChecksum</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>DataOutputStream</name></type> <name>out</name> <init>= <expr><operator>new</operator> <call><name>DataOutputStream</name><argument_list>(<argument><expr><name>bytes</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>wireVersion</name> <operator>*</operator> <operator>-</operator><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name><name>inst</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>inst</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name><name>confChecksum</name><operator>.</operator><name>length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>out</name><operator>.</operator><name>write</name></name><argument_list>(<argument><expr><name>confChecksum</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <comment type="line">// this is impossible with ByteArrayOutputStream; crash hard if this happens</comment>
        <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
      </block_content>}</block></catch></try>
      <return>return <expr><operator>new</operator> <call><name>SystemToken</name><argument_list>(<argument><expr><call><name><name>Base64</name><operator>.</operator><name>encodeBase64</name></name><argument_list>(<argument><expr><call><name><name>bytes</name><operator>.</operator><name>toByteArray</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
     </block_content>}</block></if></if_stmt>
    <return>return <expr><name>confChecksum</name></expr>;</return>
   </block_content>}</block></function>
  
 }</block></class>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>Tablet</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>Tablet</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">1305be6e8</literal><operator>..</operator><name>e9b973ae3</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>Tablet</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>Tablet</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">106</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">106</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>tableOps</name><operator>.</operator><name>CompactRange</name><operator>.</operator><name>CompactionIterato</name></name>
 <name>import</name> <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReport</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReports</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemType</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>Compactor</name><operator>.</operator><name>CompactionCanceledException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>Compactor</name><operator>.</operator><name>CompactionEnv</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>FileManager</name><operator>.</operator><name>ScanFileManager</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">583</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">583</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       
       <if_stmt><if>if <condition>(<expr><call><name><name>filesToDelete</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Removing scan refs from metadata "</literal> <operator>+</operator> <name>extent</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>filesToDelete</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>removeScanFiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>filesToDelete</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>removeScanFiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>filesToDelete</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></if></if_stmt>
     }</block></expr></expr_stmt>
     
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">604</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">604</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       
       <if_stmt><if>if <condition>(<expr><call><name><name>filesToDelete</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Removing scan refs from metadata "</literal> <operator>+</operator> <name>extent</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>filesToDelete</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>removeScanFiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>filesToDelete</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>removeScanFiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>filesToDelete</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></if></if_stmt>
     }</block></expr></expr_stmt>
     
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">680</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">680</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       }</block>
       
       <synchronized>synchronized <init>(<expr><name>bulkFileImportLock</name></expr>)</init> <block>{<block_content>
        <decl_stmt><decl><type><name>TCredentials</name></type> <name>auths</name> <init>= <expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>TCredentials</name></type> <name>auths</name> <init>= <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
         <decl_stmt><decl><type><name>Connector</name></type> <name>conn</name></decl>;</decl_stmt>
         <try>try <block>{<block_content>
           <expr_stmt><expr><name>conn</name> <operator>=</operator> <call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getConnector</name><argument_list>(<argument><expr><call><name><name>auths</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>CredentialHelper</name><operator>.</operator><name>extractToken</name></name><argument_list>(<argument><expr><name>auths</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">838</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">838</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       <comment type="line">// very important to write delete entries outside of log lock, because</comment>
       <comment type="line">// this !METADATA write does not go up... it goes sideways or to itself</comment>
       <if_stmt><if>if <condition>(<expr><name>absMergeFile</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><call><name><name>Collections</name><operator>.</operator><name>singleton</name></name><argument_list>(<argument><expr><name>absMergeFile</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
        <call><name><name>MetadataTableUtil</name><operator>.</operator><name>addDeleteEntries</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><call><name><name>Collections</name><operator>.</operator><name>singleton</name></name><argument_list>(<argument><expr><name>absMergeFile</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
       
       <decl_stmt><decl><type><name><name>Set</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></type> <name>unusedWalLogs</name> <init>= <expr><call><name>beginClearingUnusedLogs</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
       <try>try <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">846</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">846</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
         <comment type="line">// need to write to !METADATA before writing to walog, when things are done in the reverse order</comment>
         <comment type="line">// data could be lost... the minor compaction start even should be written before the following metadata</comment>
         <comment type="line">// write is made</comment>
        <expr><name>TCredentials</name> <name>creds</name> <operator>=</operator> <call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr>;
        <name>TCredentials</name> <name>creds</name> <operator>=</operator> <call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></block></expr>;</expr_stmt>
         
         <synchronized>synchronized <init>(<expr><name>timeLock</name></expr>)</init> <block>{<block_content>
           <if_stmt><if>if <condition>(<expr><call><name><name>commitSession</name><operator>.</operator><name>getMaxCommittedTime</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <name>persistedTime</name></expr>)</condition><block type="pseudo"><block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1037</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1037</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
         <expr><name><name>Set</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>&gt;</argument_list></name> <name>filesInUseByScans</name> <operator>=</operator> <call><name>waitForScansToFinish</name><argument_list>(<argument><expr><name>oldDatafiles</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="number">10000</literal></expr></argument>)</argument_list></call></expr>;</block></expr></expr_stmt></block_content></block></if></if_stmt>
         <if_stmt><if>if <condition>(<expr><call><name><name>filesInUseByScans</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition><block type="pseudo"><block_content>
           <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Adding scan refs to metadata "</literal> <operator>+</operator> <name>extent</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>filesInUseByScans</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>replaceDatafiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>oldDatafiles</name></expr></argument>, <argument><expr><name>filesInUseByScans</name></expr></argument>, <argument><expr><name>newDatafile</name></expr></argument>, <argument><expr><name>compactionId</name></expr></argument>, <argument><expr><name>dfv</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>,
        <argument><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>replaceDatafiles</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>oldDatafiles</name></expr></argument>, <argument><expr><name>filesInUseByScans</name></expr></argument>, <argument><expr><name>newDatafile</name></expr></argument>, <argument><expr><name>compactionId</name></expr></argument>, <argument><expr><name>dfv</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>,
             <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getClientAddressString</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>lastLocation</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;</argument_list></call></expr></expr_stmt>
         <expr_stmt><expr><call><name>removeFilesAfterScan</name><argument_list>(<argument><expr><name>filesInUseByScans</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></synchronized>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1131</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1131</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       <expr><name>Text</name> <name>rowName</name> <operator>=</operator> <call><name><name>extent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>()</argument_list></call></expr>;
       
       <name>String</name> <name>tableId</name> <operator>=</operator> <ternary><condition><expr><call><name><name>extent</name><operator>.</operator><name>isMeta</name></name><argument_list>()</argument_list></call></expr> ?</condition><then> <expr><name><name>RootTable</name><operator>.</operator><name>ID</name></name></expr> </then><else>: <expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></else></ternary></block></expr>;</expr_stmt>
      <decl_stmt><decl><type><name>ScannerImpl</name></type> <name>mdScanner</name> <init>= <expr><operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>ScannerImpl</name></type> <name>mdScanner</name> <init>= <expr><operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableId</name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       
       <comment type="line">// Commented out because when no data file is present, each tablet will scan through metadata table and return nothing</comment>
       <comment type="line">// reduced batch size to improve performance</comment>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1161</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1161</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
     
     <if_stmt><if>if <condition>(<expr><call><name><name>ke</name><operator>.</operator><name>isMeta</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
       <try>try <block>{<block_content>
        <expr_stmt><expr><name>logEntries</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>ke</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>logEntries</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>ke</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><literal type="string">"Unable to read tablet log entries"</literal></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</throw>
       </block_content>}</block></catch></try>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2213</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2213</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       }</block></expr></expr_stmt>
       
       <if_stmt><if>if <condition>(<expr><name>updateMetadata</name></expr>)</condition> <block>{<block_content>
        <decl_stmt><decl><type><name>TCredentials</name></type> <name>creds</name> <init>= <expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>TCredentials</name></type> <name>creds</name> <init>= <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
         <comment type="line">// if multiple threads were allowed to update this outside of a sync block, then it would be</comment>
         <comment type="line">// a race condition</comment>
         <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>updateTabletFlushID</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>tableFlushID</name></expr></argument>, <argument><expr><name>creds</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2729</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2729</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
     }</block></expr></expr_stmt>
     
     <try>try <block>{<block_content>
      <decl_stmt><decl><type><name><name>Pair</name><argument_list type="generic">&lt;<argument><name><name>List</name><argument_list type="generic">&lt;<argument><name>LogEntry</name></argument>&gt;</argument_list></name></argument>,<argument><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name></type> <name>fileLog</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getFileAndLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>Pair</name><argument_list type="generic">&lt;<argument><name><name>List</name><argument_list type="generic">&lt;<argument><name>LogEntry</name></argument>&gt;</argument_list></name></argument>,<argument><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name></argument>&gt;</argument_list></name></type> <name>fileLog</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getFileAndLogEntries</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       
       <if_stmt><if>if <condition>(<expr><call><name><name>fileLog</name><operator>.</operator><name>getFirst</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>size</name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="number">0</literal></expr>)</condition> <block>{<block_content>
         <decl_stmt><decl><type><name>String</name></type> <name>msg</name> <init>= <expr><literal type="string">"Closed tablet "</literal> <operator>+</operator> <name>extent</name> <operator>+</operator> <literal type="string">" has walog entries in "</literal> <operator>+</operator> <name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <call><name><name>fileLog</name><operator>.</operator><name>getFirst</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">3516</literal></expr><operator>,</operator><expr><literal type="number">12</literal> <operator>+</operator><literal type="number">3516</literal></expr><operator>,</operator><expr><literal type="number">12</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       <comment type="line">// it is possible that some of the bulk loading flags will be deleted after being read below because the bulk load</comment>
       <comment type="line">// finishes.... therefore split could propogate load flags for a finished bulk load... there is a special iterator</comment>
       <comment type="line">// on the !METADATA table to clean up this type of garbage</comment>
      <expr><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name> <name>bulkLoadedFiles</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr>;
      <name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name> <name>bulkLoadedFiles</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
       
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>splitRatio</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addNewTablet</name></name><argument_list>(<argument><expr><name>low</name></expr></argument>, <argument><expr><name>lowDirectory</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getTabletSession</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>, <argument><expr><name>bulkLoadedFiles</name></expr></argument>,
          <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>time</name></expr></argument>, <argument><expr><name>lastFlushID</name></expr></argument>, <argument><expr><name>lastCompactID</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>finishSplit</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>highDatafileSizes</name></expr></argument>, <argument><expr><name>highDatafilesToRemove</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>splitRatio</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addNewTablet</name></name><argument_list>(<argument><expr><name>low</name></expr></argument>, <argument><expr><name>lowDirectory</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getTabletSession</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>, <argument><expr><name>bulkLoadedFiles</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call>
          <operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>time</name></expr></argument>, <argument><expr><name>lastFlushID</name></expr></argument>, <argument><expr><name>lastCompactID</name></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>finishSplit</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>highDatafileSizes</name></expr></argument>, <argument><expr><name>highDatafilesToRemove</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
       <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>log</name></name><argument_list>(<argument><expr><name><name>TLevel</name><operator>.</operator><name>TABLET_HIST</name></name></expr></argument>, <argument><expr><name>extent</name> <operator>+</operator> <literal type="string">" split "</literal> <operator>+</operator> <name>low</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>high</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">3807</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">3807</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>Tablet</name> <block>{
       <try>try <block>{<block_content>
         <comment type="line">// if multiple threads were allowed to update this outside of a sync block, then it would be</comment>
         <comment type="line">// a race condition</comment>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>updateTabletCompactID</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>compactionId</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>updateTabletCompactID</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>compactionId</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>tabletServer</name><operator>.</operator><name>getLock</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <finally>finally <block>{<block_content>
         <synchronized>synchronized <init>(<expr><name>this</name></expr>)</init> <block>{<block_content>
           <expr_stmt><expr><name>majorCompactionInProgress</name> <operator>=</operator> <literal type="boolean">false</literal></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>TabletServer</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>TabletServer</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">9d50f07f7</literal><operator>..</operator><name>ceed0ee0e</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>TabletServer</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>tabletserver</name><operator>/</operator><name><name>TabletServer</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">156</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">156</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>metrics</name><operator>.</operator><name>AbstractMetricsImpl</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReport</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>problems</name><operator>.</operator><name>ProblemReports</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>Compactor</name><operator>.</operator><name>CompactionInfo</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>Tablet</name><operator>.</operator><name>CommitSession</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>Tablet</name><operator>.</operator><name>KVEntry</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">228</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">228</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
   <specifier>private</specifier> <specifier>static</specifier> <name>long</name> <name>gcTimeIncreasedCount</name></expr>;</expr_stmt>
   
   <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>long</name></type> <name>MAX_TIME_TO_WAIT_FOR_SCAN_RESULT_MILLIS</name> <init>= <expr><literal type="number">1000</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>long</name></type> <name>RECENTLY_SPLIT_MILLIES</name> <init>= <expr><literal type="number">60</literal><operator>*</operator><literal type="number">1000</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>long</name></type> <name>RECENTLY_SPLIT_MILLIES</name> <init>= <expr><literal type="number">60</literal> <operator>*</operator> <literal type="number">1000</literal></expr></init></decl>;</decl_stmt>
   
   <decl_stmt><decl><type><specifier>private</specifier> <name>TabletServerLogger</name></type> <name>logger</name></decl>;</decl_stmt>
   
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1749</literal></expr><operator>,</operator><expr><literal type="number">31</literal> <operator>+</operator><literal type="number">1749</literal></expr><operator>,</operator><expr><literal type="number">29</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     
     <specifier>private</specifier> <name>ZooCache</name> <name>masterLockCache</name> <operator>=</operator> <operator>new</operator> <call><name>ZooCache</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
     
    <function><type><specifier>private</specifier> <name>void</name></type> <name>checkPermission</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>lock</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>requiresSystemPermission</name></decl></parameter>, <parameter><decl><type><specifier>final</specifier> <name>String</name></type> <name>request</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
      <if_stmt><if>if <condition>(<expr><name>requiresSystemPermission</name></expr>)</condition> <block>{<block_content>
        <decl_stmt><decl><type><name>boolean</name></type> <name>fatal</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt>
        <try>try <block>{<block_content>
          <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from user: "</literal> <operator>+</operator> <call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>security</name><operator>.</operator><name>canPerformSystemActions</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from user: "</literal> <operator>+</operator> <call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw>
          </block_content>}</block></if></if_stmt>
        </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
          <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from unauthenticatable user: "</literal> <operator>+</operator> <call><name><name>e</name><operator>.</operator><name>getUser</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          <if_stmt><if>if <condition>(<expr><call><name><name>e</name><operator>.</operator><name>getUser</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>fatal</name></name><argument_list>(<argument><expr><literal type="string">"Got message from a service with a mismatched configuration. Please ensure a compatible configuration."</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt><expr><name>fatal</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt>
          </block_content>}</block></if></if_stmt>
          <throw>throw <expr><name>e</name></expr>;</throw>
        </block_content>}</block></catch> <finally>finally <block>{<block_content>
          <if_stmt><if>if <condition>(<expr><name>fatal</name></expr>)</condition> <block>{<block_content>
            <expr_stmt><expr><call><name><name>Halt</name><operator>.</operator><name>halt</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><operator>new</operator> <class><super><name>Runnable</name></super><argument_list>()</argument_list> <block>{
              <function><annotation>@<name>Override</name></annotation>
              <type><specifier>public</specifier> <name>void</name></type> <name>run</name><parameter_list>()</parameter_list> <block>{<block_content>
                <expr_stmt><expr><call><name>logGCInfo</name><argument_list>(<argument><expr><call><name>getSystemConfiguration</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
              </block_content>}</block></function>
            }</block></class></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          </block_content>}</block></if></if_stmt>
    <function><type><specifier>private</specifier> <name>void</name></type> <name>checkPermission</name><parameter_list>(<parameter><decl><type><name>TCredentials</name></type> <name>credentials</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>lock</name></decl></parameter>, <parameter><decl><type><specifier>final</specifier> <name>String</name></type> <name>request</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument></throws> <block>{<block_content>
      <decl_stmt><decl><type><name>boolean</name></type> <name>fatal</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt>
      <try>try <block>{<block_content>
        <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from user: "</literal> <operator>+</operator> <call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>security</name><operator>.</operator><name>canPerformSystemActions</name></name><argument_list>(<argument><expr><name>credentials</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
          <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from user: "</literal> <operator>+</operator> <call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          <throw>throw <expr><operator>new</operator> <call><name>ThriftSecurityException</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getPrincipal</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SecurityErrorCode</name><operator>.</operator><name>PERMISSION_DENIED</name></name></expr></argument>)</argument_list></call></expr>;</throw>
        </block_content>}</block></if></if_stmt>
      </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Got "</literal> <operator>+</operator> <name>request</name> <operator>+</operator> <literal type="string">" message from unauthenticatable user: "</literal> <operator>+</operator> <call><name><name>e</name><operator>.</operator><name>getUser</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt><if>if <condition>(<expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getTokenClassName</name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>credentials</name><operator>.</operator><name>getTokenClassName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
          <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>fatal</name></name><argument_list>(<argument><expr><literal type="string">"Got message from a service with a mismatched configuration. Please ensure a compatible configuration."</literal></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
          <expr_stmt><expr><name>fatal</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt>
        </block_content>}</block></if></if_stmt>
        <throw>throw <expr><name>e</name></expr>;</throw>
      </block_content>}</block></catch> <finally>finally <block>{<block_content>
        <if_stmt><if>if <condition>(<expr><name>fatal</name></expr>)</condition> <block>{<block_content>
          <expr_stmt><expr><call><name><name>Halt</name><operator>.</operator><name>halt</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><operator>new</operator> <class><super><name>Runnable</name></super><argument_list>()</argument_list> <block>{
            <function><annotation>@<name>Override</name></annotation>
            <type><specifier>public</specifier> <name>void</name></type> <name>run</name><parameter_list>()</parameter_list> <block>{<block_content>
              <expr_stmt><expr><call><name>logGCInfo</name><argument_list>(<argument><expr><call><name>getSystemConfiguration</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block></function>
          }</block></class></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         </block_content>}</block></if></if_stmt>
       </block_content>}</block></finally></try>
       
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1815</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1813</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     <specifier>public</specifier> <name>void</name> <call><name>loadTablet</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>final</name> <name>TKeyExtent</name> <name>textent</name></expr></argument>)</argument_list></call> <block>{
       
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"loadTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"loadTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1891</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1889</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>unloadTablet</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>TKeyExtent</name> <name>textent</name></expr></argument>, <argument><expr><name>boolean</name> <name>save</name></expr></argument>)</argument_list></call> <block>{
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"unloadTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"unloadTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1905</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1903</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>flush</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>ByteBuffer</name> <name>startRow</name></expr></argument>, <argument><expr><name>ByteBuffer</name> <name>endRow</name></expr></argument>)</argument_list></call> <block>{
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"flush"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"flush"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1942</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1940</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>flushTablet</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>TKeyExtent</name> <name>textent</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"flushTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"flushTablet"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1962</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1960</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>halt</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name> <block>{
       
      <expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"halt"</literal></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
      <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"halt"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
       <expr_stmt><expr><call><name><name>Halt</name><operator>.</operator><name>halt</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><operator>new</operator> <class><super><name>Runnable</name></super><argument_list>()</argument_list> <block>{
         <annotation>@<name>Override</name></annotation>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1996</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1994</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name><name>List</name><argument_list type="generic">&lt;<argument><name>ActiveScan</name></argument>&gt;</argument_list></name> <call><name>getActiveScans</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument>, <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"getScans"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="string">"getScans"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2008</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2006</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>chop</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>TKeyExtent</name> <name>textent</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"chop"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"chop"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2025</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2023</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name>void</name> <call><name>compact</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>, <argument><expr><name>String</name> <name>lock</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>ByteBuffer</name> <name>startRow</name></expr></argument>, <argument><expr><name>ByteBuffer</name> <name>endRow</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"compact"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><name>lock</name></expr></argument>, <argument><expr><literal type="string">"compact"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2115</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2113</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     @<name>Override</name>
     <specifier>public</specifier> <name><name>List</name><argument_list type="generic">&lt;<argument><name>ActiveCompaction</name></argument>&gt;</argument_list></name> <call><name>getActiveCompactions</name><argument_list>(<argument><expr><name>TInfo</name> <name>tinfo</name></expr></argument>, <argument><expr><name>TCredentials</name> <name>credentials</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>ThriftSecurityException</name></expr></argument>, <argument><expr><name>TException</name> <block>{</block></expr></argument></throws></expr></expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>, <argument><expr><literal type="string">"getActiveCompactions"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>checkPermission</name><argument_list>(<argument><expr><name>credentials</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="string">"getActiveCompactions"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>ThriftSecurityException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><name>e</name></expr></argument>, <argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>RuntimeException</name><argument_list>(<argument><expr><name>e</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2612</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2610</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
     <name><name>entry</name><operator>.</operator><name>server</name></name> <operator>=</operator> <call><name><name>logs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>getLogger</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><name><name>entry</name><operator>.</operator><name>filename</name></name> <operator>=</operator> <call><name><name>logs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>getFileName</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><name><name>entry</name><operator>.</operator><name>logSet</name></name> <operator>=</operator> <name>logSet</name></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addLogEntry</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>entry</name></expr></argument>, <argument><expr><call><name>getLock</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addLogEntry</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>entry</name></expr></argument>, <argument><expr><call><name>getLock</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></catch></try>
   
   <function><type><specifier>private</specifier> <name>int</name></type> <name>startServer</name><parameter_list>(<parameter><decl><type><name>AccumuloConfiguration</name></type> <name>conf</name></decl></parameter>, <parameter><decl><type><name>Property</name></type> <name>portHint</name></decl></parameter>, <parameter><decl><type><name>TProcessor</name></type> <name>processor</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>threadName</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>UnknownHostException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2792</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2790</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name></expr></expr_stmt>
           <while>while <condition>(<expr><operator>!</operator><name>serverStopRequested</name> <operator>&amp;&amp;</operator> <name>mm</name> <operator>!=</operator> <literal type="null">null</literal> <operator>&amp;&amp;</operator> <name>client</name> <operator>!=</operator> <literal type="null">null</literal> <operator>&amp;&amp;</operator> <call><name><name>client</name><operator>.</operator><name>getOutputProtocol</name></name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="null">null</literal>
               <operator>&amp;&amp;</operator> <call><name><name>client</name><operator>.</operator><name>getOutputProtocol</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getTransport</name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="null">null</literal> <operator>&amp;&amp;</operator> <call><name><name>client</name><operator>.</operator><name>getOutputProtocol</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getTransport</name><argument_list>()</argument_list></call><operator>.</operator><call><name>isOpen</name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
             <try>try <block>{<block_content>
              <expr_stmt><expr><call><name><name>mm</name><operator>.</operator><name>send</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>getClientAddressString</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>iface</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
              <expr_stmt><expr><call><name><name>mm</name><operator>.</operator><name>send</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>getClientAddressString</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>iface</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
               <expr_stmt><expr><name>mm</name> <operator>=</operator> <literal type="null">null</literal></expr>;</expr_stmt>
             </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>TException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<block_content>
               <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>warn</name></name><argument_list>(<argument><expr><literal type="string">"Error sending message: queuing message again"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<annotation>@</annotation>@ <expr><operator>-</operator><literal type="number">2899</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2897</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
         <name><name>TabletsSection</name><operator>.</operator><name>TabletColumnFamily</name><operator>.</operator><name>PREV_ROW_COLUMN</name></name></expr><operator>,</operator> <expr><name><name>TabletsSection</name><operator>.</operator><name>TabletColumnFamily</name><operator>.</operator><name>SPLIT_RATIO_COLUMN</name></name></expr><operator>,</operator>
         <expr><name><name>TabletsSection</name><operator>.</operator><name>TabletColumnFamily</name><operator>.</operator><name>OLD_PREV_ROW_COLUMN</name></name></expr><operator>,</operator> <expr><name><name>TabletsSection</name><operator>.</operator><name>ServerColumnFamily</name><operator>.</operator><name>TIME_COLUMN</name></name></expr></block_content>}</block></catch></try><expr_stmt><expr/></expr_stmt></block_content></block></while></block_content></block></function></block_content></block></catch></try></block_content></block></catch></try></block_content></block></catch></try></block></class></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
    <decl_stmt><decl><type><name>ScannerImpl</name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableToVerify</name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>ScannerImpl</name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>tableToVerify</name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>scanner</name><operator>.</operator><name>setRange</name></name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>toMetadataRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
     <decl_stmt><decl><type><name><name>TreeMap</name><argument_list type="generic">&lt;<argument><name>Key</name></argument>,<argument><name>Value</name></argument>&gt;</argument_list></name></type> <name>tkv</name> <init>= <expr><operator>new</operator> <call><name><name>TreeMap</name><argument_list type="generic">&lt;<argument><name>Key</name></argument>,<argument><name>Value</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">2933</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">2931</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>TabletServer</name> extends <name>AbstractMetricsImpl</name> implements <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accu</name></name>
       
       <name>KeyExtent</name> <name>fke</name></expr>;</expr_stmt>
       <try>try <block>{<block_content>
        <expr_stmt><expr><name>fke</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>fixSplit</name></name><argument_list>(<argument><expr><name>metadataEntry</name></expr></argument>, <argument><expr><call><name><name>tabletEntries</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>metadataEntry</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>fke</name> <operator>=</operator> <call><name><name>MetadataTableUtil</name><operator>.</operator><name>fixSplit</name></name><argument_list>(<argument><expr><name>metadataEntry</name></expr></argument>, <argument><expr><call><name><name>tabletEntries</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name>metadataEntry</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>lock</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>IOException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<block_content>
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Error fixing split "</literal> <operator>+</operator> <name>metadataEntry</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <throw>throw <expr><operator>new</operator> <call><name>AccumuloException</name><argument_list>(<argument><expr><call><name><name>e</name><operator>.</operator><name>toString</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</throw>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Admin</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Admin</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>fca811e18</name><operator>..</operator><literal type="number">215b9c79a</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Admin</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Admin</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">36</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">36</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>CredentialHelper</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>cli</name><operator>.</operator><name>ClientOpts</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
 
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">88</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">88</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>Admin</name> <block>{
       <expr><name>String</name> <name>principal</name></expr>;
       <name>AuthenticationToken</name> <name>token</name></block></expr>;</expr_stmt>
       <if_stmt><if>if <condition>(<expr><call><name><name>opts</name><operator>.</operator><name>getToken</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
        <expr_stmt><expr><name>principal</name> <operator>=</operator> <call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemPrincipal</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>token</name> <operator>=</operator> <call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>principal</name> <operator>=</operator> <call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><name>token</name> <operator>=</operator> <call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></if> <else>else <block>{<block_content>
         <expr_stmt><expr><name>principal</name> <operator>=</operator> <name><name>opts</name><operator>.</operator><name>principal</name></name></expr>;</expr_stmt>
         <expr_stmt><expr><name>token</name> <operator>=</operator> <call><name><name>opts</name><operator>.</operator><name>getToken</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>FindOfflineTablets</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>FindOfflineTablets</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>de27112eb</name><operator>..</operator><name>f180ccd3b</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>FindOfflineTablets</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>FindOfflineTablets</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">33</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">33</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletLocationState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TabletState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>collections</name><operator>.</operator><name>iterators</name><operator>.</operator><name>IteratorChain</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Logger</name></name>;</import>
 
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">48</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">48</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>FindOfflineTablets</name> <block>{
     <expr><call><name><name>opts</name><operator>.</operator><name>parseArgs</name></name><argument_list>(<argument><expr><call><name><name>FindOfflineTablets</name><operator>.</operator><name><name>class</name><operator>.</operator><name>getName</name></name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>args</name></expr></argument>)</argument_list></call></expr>;
     <name>final</name> <name>AtomicBoolean</name> <name>scanning</name> <operator>=</operator> <operator>new</operator> <call><name>AtomicBoolean</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
     <decl_stmt><decl><type><name>Instance</name></type> <name>instance</name> <init>= <expr><call><name><name>opts</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>rootScanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>MetadataSchema</name><operator>.</operator><name>TabletsSection</name><operator>.</operator><name>getRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>metaScanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>MetadataSchema</name><operator>.</operator><name>TabletsSection</name><operator>.</operator><name>getRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>rootScanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>MetadataSchema</name><operator>.</operator><name>TabletsSection</name><operator>.</operator><name>getRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>MetaDataTableScanner</name></type> <name>metaScanner</name> <init>= <expr><operator>new</operator> <call><name>MetaDataTableScanner</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>MetadataSchema</name><operator>.</operator><name>TabletsSection</name><operator>.</operator><name>getRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <decl_stmt><decl><annotation>@<name>SuppressWarnings</name><argument_list>(<argument><expr><literal type="string">"unchecked"</literal></expr></argument>)</argument_list></annotation>
     <type><name><name>Iterator</name><argument_list type="generic">&lt;<argument><name>TabletLocationState</name></argument>&gt;</argument_list></name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>IteratorChain</name><argument_list>(<argument><expr><name>rootScanner</name></expr></argument>, <argument><expr><name>metaScanner</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <decl_stmt><decl><type><name>LiveTServerSet</name></type> <name>tservers</name> <init>= <expr><operator>new</operator> <call><name>LiveTServerSet</name><argument_list>(<argument><expr><name>instance</name></expr></argument>, <argument><expr><call><name><name>DefaultConfiguration</name><operator>.</operator><name>getDefaultConfiguration</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <class><super><name>Listener</name></super><argument_list>()</argument_list> <block>{
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Initialize</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Initialize</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">7d4e6f201</literal><operator>..</operator><literal type="number">843184d62</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Initialize</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>Initialize</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">64</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">64</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManagerImpl</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>iterators</name><operator>.</operator><name>MetadataBulkLoadFilter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>tables</name><operator>.</operator><name>TableManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>AuditedSecurityOperation</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletTime</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooReaderWriter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">439</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">439</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> class <name>Initialize</name> <block>{
   }</block>
   
   <specifier>private</specifier> <specifier>static</specifier> <name>void</name> <call><name>initSecurity</name><argument_list>(<argument><expr><name>Opts</name> <name>opts</name></expr></argument>, <argument><expr><name>String</name> <name>iid</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>AccumuloSecurityException</name></expr></argument>, <argument><expr><name>ThriftSecurityException</name> <block>{
    <expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>(<argument><expr><name>iid</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>initializeSecurity</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>DEFAULT_ROOT_USER</name></expr></argument>, <argument><expr><name><name>opts</name><operator>.</operator><name>rootpass</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>AuditedSecurityOperation</name><operator>.</operator><name>getInstance</name></name><argument_list>(<argument><expr><name>iid</name></expr></argument>, <argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>initializeSecurity</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>DEFAULT_ROOT_USER</name></expr></argument>, <argument><expr><name><name>opts</name><operator>.</operator><name>rootpass</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   }</block></class>
   
   <specifier>protected</specifier> <specifier>static</specifier> <name>void</name> <call><name>initMetadataConfig</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>IOException</name> <block>{
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>MetadataTableUtil</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>MetadataTableUtil</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">816df8b50</literal><operator>..</operator><name>b2cd11492</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>MetadataTableUtil</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>util</name><operator>/</operator><name><name>MetadataTableUtil</name><operator>.</operator><name>java</name></name></expr></block></expr></argument>
@<argument>@ <expr><operator>-</operator><literal type="number">81</literal></expr></argument>,<argument><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">81</literal></expr></argument>,<argument><expr><literal type="number">7</literal> @@</expr></argument></throws></expr></argument></argument_list></call></expr></init></decl></decl_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>FileRef</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManagerImpl</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooLock</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>zookeeper</name><operator>.</operator><name>ZooReaderWriter</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>fs</name><operator>.</operator><name>FileStatus</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">490</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">490</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
   }</block>
   
   <specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>addDeleteEntry</name><argument_list>(<argument><expr><name>String</name> <name>tableId</name></expr></argument>, <argument><expr><name>String</name> <name>path</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>IOException</name> <block>{
    <expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>createDeleteMutation</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>path</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name>createDeleteMutation</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><name>path</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></else></if_stmt>
   
   <function><type><specifier>public</specifier> <specifier>static</specifier> <name>Mutation</name></type> <name>createDeleteMutation</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>pathToRemove</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">975</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">975</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
       }</block></expr></expr_stmt> <if_stmt><else>else <block>{<block_content>
         <decl_stmt><decl><type><name>Mutation</name></type> <name>m</name> <init>= <expr><operator>new</operator> <call><name>Mutation</name><argument_list>(<argument><expr><call><name><name>entry</name><operator>.</operator><name>extent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
         <expr_stmt><expr><call><name><name>m</name><operator>.</operator><name>putDelete</name></name><argument_list>(<argument><expr><name><name>LogColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><name><name>entry</name><operator>.</operator><name>server</name></name> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <name><name>entry</name><operator>.</operator><name>filename</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zooLock</name></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><name><name>entry</name><operator>.</operator><name>extent</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zooLock</name></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><name><name>entry</name><operator>.</operator><name>extent</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       </block_content>}</block></else></if_stmt>
     </block_content>}</block></function>
   </block_content>}</block></catch></try>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1126</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1126</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
   
   <expr><specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>cloneTable</name><argument_list>(<argument><expr><name>Instance</name> <name>instance</name></expr></argument>, <argument><expr><name>String</name> <name>srcTableId</name></expr></argument>, <argument><expr><name>String</name> <name>tableId</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
     
    <expr><name>Connector</name> <name>conn</name> <operator>=</operator> <call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><name><name>SecurityConstants</name><operator>.</operator><name>SYSTEM_PRINCIPAL</name></name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemToken</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;
    <name>Connector</name> <name>conn</name> <operator>=</operator> <call><name><name>instance</name><operator>.</operator><name>getConnector</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getPrincipal</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
     <decl_stmt><decl><type><name>BatchWriter</name></type> <name>bw</name> <init>= <expr><call><name><name>conn</name><operator>.</operator><name>createBatchWriter</name></name><argument_list>(<argument><expr><name><name>MetadataTable</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><operator>new</operator> <call><name>BatchWriterConfig</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     
     <while>while <condition>(<expr><literal type="boolean">true</literal></expr>)</condition> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1151</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1151</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
         <expr><call><name><name>bw</name><operator>.</operator><name>flush</name></name><argument_list>()</argument_list></call></expr>;
         
         <comment type="line">// delete what we have cloned and try again</comment>
        <call><name>deleteTable</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>deleteTable</name><argument_list>(<argument><expr><name>tableId</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         
         <expr_stmt><expr><call><name><name>log</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Tablets merged in table "</literal> <operator>+</operator> <name>srcTableId</name> <operator>+</operator> <literal type="string">" while attempting to clone, trying again"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1181</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1181</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
   <expr><specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>chopped</name><argument_list>(<argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>, <argument><expr><name>ZooLock</name> <name>zooLock</name></expr></argument>)</argument_list></call> <block>{
     <expr><name>Mutation</name> <name>m</name> <operator>=</operator> <operator>new</operator> <call><name>Mutation</name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
     <call><name><name>ChoppedColumnFamily</name><operator>.</operator><name>CHOPPED_COLUMN</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><name>m</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>Value</name><argument_list>(<argument><expr><literal type="string">"chopped"</literal><operator>.</operator><call><name>getBytes</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></block></expr>;
    <call><name>update</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zooLock</name></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zooLock</name></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></while>
   
   <function><type><specifier>public</specifier> <specifier>static</specifier> <name>void</name></type> <name>removeBulkLoadEntries</name><parameter_list>(<parameter><decl><type><name>Connector</name></type> <name>conn</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>tableId</name></decl></parameter>, <parameter><decl><type><name>long</name></type> <name>tid</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1242</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1242</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
     
     <comment type="line">// new KeyExtent is only added to force update to write to the metadata table, not the root table</comment>
     <comment type="line">// because bulk loads aren't supported to the metadata table</comment>
    <expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"anythingNotMetadata"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
    <call><name>update</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"anythingNotMetadata"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <specifier>static</specifier> <name>void</name></type> <name>removeBulkLoadInProgressFlag</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>path</name></decl></parameter>)</parameter_list> <block>{<block_content>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">1252</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">1252</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>MetadataTableUtil</name> <block>{
     
     <comment type="line">// new KeyExtent is only added to force update to write to the metadata table, not the root table</comment>
     <comment type="line">// because bulk loads aren't supported to the metadata table</comment>
    <expr><call><name>update</name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"anythingNotMetadata"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;
    <call><name>update</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>m</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>KeyExtent</name><argument_list>(<argument><expr><operator>new</operator> <call><name>Text</name><argument_list>(<argument><expr><literal type="string">"anythingNotMetadata"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
   </block_content>}</block></function>
   
   <function><type><specifier>public</specifier> <specifier>static</specifier> <name>void</name></type> <name>moveMetaDeleteMarkers</name><parameter_list>(<parameter><decl><type><name>Instance</name></type> <name>instance</name></decl></parameter>, <parameter><decl><type><name>TCredentials</name></type> <name>creds</name></decl></parameter>)</parameter_list> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentialsTest</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentialsTest</name><operator>.</operator><name>java</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">000000000..f422ecba9</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>server</name><operator>/</operator><name>security</name><operator>/</operator><name><name>SystemCredentialsTest</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">67</literal> @@</expr></expr_stmt>
<comment type="block">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</comment>
<package>package <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name></name>;</package>

<import>import static <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>Assert</name><operator>.</operator><name>assertEquals</name></name>;</import>
<import>import static <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>Assert</name><operator>.</operator><name>assertTrue</name></name>;</import>

<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>File</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>UUID</name></name>;</import>

<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>Instance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>impl</name><operator>.</operator><name>ConnectorImpl</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>Credentials</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TCredentials</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name><operator>.</operator><name>SystemToken</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>BeforeClass</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>Test</name></name>;</import>

<comment type="block" format="javadoc">/**
 * 
 */</comment>
<class><specifier>public</specifier> class <name>SystemCredentialsTest</name> <block>{
  
  <function><annotation>@<name>BeforeClass</name></annotation>
  <type><specifier>public</specifier> <specifier>static</specifier> <name>void</name></type> <name>setUp</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>IOException</name></expr></argument></throws> <block>{<block_content>
    <decl_stmt><decl><type><name>File</name></type> <name>testInstanceId</name> <init>= <expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><literal type="string">"target"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"instanceTest"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"instance_id"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name><name>UUID</name><operator>.</operator><name>fromString</name></name><argument_list>(
        <argument><expr><literal type="string">"00000000-0000-0000-0000-000000000000"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>testInstanceId</name><operator>.</operator><name>exists</name></name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
      <expr_stmt><expr><call><name><name>testInstanceId</name><operator>.</operator><name>getParentFile</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>mkdirs</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>testInstanceId</name><operator>.</operator><name>createNewFile</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
  </block_content>}</block></function>
  
  <comment type="block" format="javadoc">/**
   * This is a test to ensure the string literal in {@link ConnectorImpl#ConnectorImpl(Instance, TCredentials)} is kept up-to-date if we move the
   * {@link SystemToken}&lt;br/&gt;
   * This check will not be needed after ACCUMULO-1578
   */</comment>
  <function><annotation>@<name>Test</name></annotation>
  <type><specifier>public</specifier> <name>void</name></type> <name>testSystemToken</name><parameter_list>()</parameter_list> <block>{<block_content>
    <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><literal type="string">"org.apache.accumulo.server.security.SystemCredentials$SystemToken"</literal></expr></argument>, <argument><expr><call><name><name>SystemToken</name><operator>.</operator><name><name>class</name><operator>.</operator><name>getName</name></name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getToken</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getClass</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>SystemToken</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>assertEquals</name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call><operator>.</operator><call><name>getTokenClassName</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemToken</name><operator>.</operator><name><name>class</name><operator>.</operator><name>getName</name></name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></function>
  
  <function><annotation>@<name>Test</name></annotation>
  <type><specifier>public</specifier> <name>void</name></type> <name>testSystemCredentials</name><parameter_list>()</parameter_list> <block>{<block_content>
    <decl_stmt><decl><type><name>Credentials</name></type> <name>a</name> <init>= <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Credentials</name></type> <name>b</name> <init>= <expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <expr_stmt><expr><call><name>assertTrue</name><argument_list>(<argument><expr><name>a</name> <operator>==</operator> <name>b</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></function>
}</block></class>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>accumulo</name><operator>-</operator><name><name>site</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>accumulo</name><operator>-</operator><name><name>site</name><operator>.</operator><name>xml</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">000000000..2aa9fff5e</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>resources</name><operator>/</operator><name>accumulo</name><operator>-</operator><name><name>site</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><ternary><condition><expr><literal type="number">32</literal> @@
<operator>&lt;</operator></expr>?</condition><then><expr><name>xml</name> <name>version</name><operator>=</operator><literal type="string">"1.0"</literal> <name>encoding</name><operator>=</operator><ternary><condition><expr><literal type="string">"UTF-8"</literal></expr>?</condition><then><expr><operator>&gt;</operator>
<operator>&lt;</operator><operator>!</operator><operator>--</operator>
  <name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <call><name>Foundation</name> <argument_list>(<argument><expr><name>ASF</name></expr></argument>)</argument_list></call> <name>under</name> <name>one</name> <name>or</name> <name>more</name>
  <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name> <name>distributed</name> <name>with</name>
  <name>this</name> <name>work</name></expr></then></ternary></expr></then></ternary></expr></expr_stmt> <for>for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal>
  <operator>(</operator><name>the</name> <literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name> <name>with</name>
  <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

      <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

  <name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
  <name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
  <expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
  <name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
  limitations under the License.
--&gt;
&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;

&lt;configuration&gt;

  &lt;property&gt;
    &lt;name&gt;instance.dfs.dir&lt;/name&gt;
    &lt;value&gt;$<block>{<block_content><expr><name><name>project</name><operator>.</operator><name>build</name><operator>.</operator><name>directory</name></name></expr></block_content>}</block></for><expr_stmt><expr><operator>/</operator><name><name>instanceTest</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>value</name></argument>&gt;</argument_list></name>
  <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>

  <operator>&lt;</operator><name>property</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>instance</name><operator>.</operator><name><name>secret</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name></name>
    <operator>&lt;</operator><name>value</name><operator>&gt;</operator><name><name>TEST_SYSTEM_SECRET</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>value</name></argument>&gt;</argument_list></name>
  <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>

<operator>&lt;</operator><operator>/</operator><name>configuration</name><operator>&gt;</operator>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name><name>GetMasterStats</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name><name>GetMasterStats</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">65cf80c1e</literal><operator>..</operator><name>caef67036</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name><name>GetMasterStats</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name><name>GetMasterStats</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">19</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">19</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@</expr></expr_stmt> <package>package <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>test</name></name>;</package>
 <import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
 <import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Map</name><operator>.</operator><name>Entry</name></name>;</import>
 
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>client</name><operator>.</operator><name>impl</name><operator>.</operator><name>MasterClient</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>MasterNotRunningException</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>MasterClientService</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">29</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">28</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TableInfo</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>master</name><operator>.</operator><name>thrift</name><operator>.</operator><name>TabletServerStatus</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>Monitor</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>thrift</name><operator>.</operator><name>transport</name><operator>.</operator><name>TTransportException</name></name>;</import>
 
 <class><specifier>public</specifier> class <name>GetMasterStats</name> <block>{
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">44</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">44</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>GetMasterStats</name> <block>{
     <expr><name>MasterMonitorInfo</name> <name>stats</name> <operator>=</operator> <literal type="null">null</literal></expr>;</block></expr></expr_stmt>
     <try>try <block>{<block_content>
       <expr_stmt><expr><name>client</name> <operator>=</operator> <call><name><name>MasterClient</name><operator>.</operator><name>getConnectionWithRetry</name></name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><name>stats</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><name>stats</name> <operator>=</operator> <call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block> <finally>finally <block>{<block_content>
       <if_stmt><if>if <condition>(<expr><name>client</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><block type="pseudo"><block_content>
         <expr_stmt><expr><call><name><name>MasterClient</name><operator>.</operator><name>close</name></name><argument_list>(<argument><expr><name>client</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>continuous</name><operator>/</operator><name><name>ContinuousStatsCollector</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>continuous</name><operator>/</operator><name><name>ContinuousStatsCollector</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>ea677da62</name><operator>..</operator><literal type="number">8345ac440</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>continuous</name><operator>/</operator><name><name>ContinuousStatsCollector</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>continuous</name><operator>/</operator><name><name>ContinuousStatsCollector</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">45</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">45</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>cli</name><operator>.</operator><name>ClientOnRequiredTable</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManager</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>VolumeManagerImpl</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>monitor</name><operator>.</operator><name>Monitor</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>trace</name><operator>.</operator><name>instrument</name><operator>.</operator><name>Tracer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>fs</name><operator>.</operator><name>ContentSummary</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">134</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">134</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>ContinuousStatsCollector</name> <block>{
       <expr><name><name>MasterClientService</name><operator>.</operator><name>Iface</name></name> <name>client</name> <operator>=</operator> <literal type="null">null</literal></expr>;</block></expr></expr_stmt>
       <try>try <block>{<block_content>
         <expr_stmt><expr><name>client</name> <operator>=</operator> <call><name><name>MasterClient</name><operator>.</operator><name>getConnectionWithRetry</name></name><argument_list>(<argument><expr><call><name><name>opts</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>MasterMonitorInfo</name></type> <name>stats</name> <init>= <expr><call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><name>MasterMonitorInfo</name></type> <name>stats</name> <init>= <expr><call><name><name>client</name><operator>.</operator><name>getMasterStats</name></name><argument_list>(<argument><expr><call><name><name>Tracer</name><operator>.</operator><name>traceInfo</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
         
         <decl_stmt><decl><type><name>TableInfo</name></type> <name>all</name> <init>= <expr><operator>new</operator> <call><name>TableInfo</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
         <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>String</name></argument>,<argument><name>TableInfo</name></argument>&gt;</argument_list></name></type> <name>tableSummaries</name> <init>= <expr><operator>new</operator> <call><name><name>HashMap</name><argument_list type="generic">&lt;<argument><name>String</name></argument>,<argument><name>TableInfo</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">177</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">177</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>ContinuousStatsCollector</name> <block>{
     
   }</block>
   
  <specifier>static</specifier> <name>class</name> <name>Opts</name> extends <name>ClientOnRequiredTable</name> <block>{
  }</block>
  <specifier>static</specifier> <name>class</name> <name>Opts</name> extends <name>ClientOnRequiredTable</name> <block>{}</block>
   
   <specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>main</name><argument_list>(<argument><expr><name><name>String</name><index>[]</index></name> <name>args</name></expr></argument>)</argument_list></call> <block>{
     <expr><name>Opts</name> <name>opts</name> <operator>=</operator> <operator>new</operator> <call><name>Opts</name><argument_list>()</argument_list></call></expr>;
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>functional</name><operator>/</operator><name><name>SplitRecoveryTest</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>functional</name><operator>/</operator><name><name>SplitRecoveryTest</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">8cb79c318</literal><operator>..</operator><literal type="number">802d94288</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>functional</name><operator>/</operator><name><name>SplitRecoveryTest</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>functional</name><operator>/</operator><name><name>SplitRecoveryTest</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">52</literal><operator>,</operator><literal type="number">7</literal> <operator>+</operator><literal type="number">52</literal><operator>,</operator><literal type="number">7</literal> @@</block></expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>client</name><operator>.</operator><name>HdfsZooInstance</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>fs</name><operator>.</operator><name>FileRef</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>Assignment</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletServer</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>tabletserver</name><operator>.</operator><name>TabletTime</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>util</name><operator>.</operator><name>FileUtil</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">140</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">140</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
       <expr><name>KeyExtent</name> <name>extent</name> <operator>=</operator> <name><name>extents</name><index>[<expr><name>i</name></expr>]</index></name></expr>;
       
       <name>String</name> <name>tdir</name> <operator>=</operator> <call><name><name>ServerConstants</name><operator>.</operator><name>getTablesDirs</name></name><argument_list>()</argument_list></call><index>[<expr><literal type="number">0</literal></expr>]</index> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <call><name><name>extent</name><operator>.</operator><name>getTableId</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call> <operator>+</operator> <literal type="string">"/dir_"</literal> <operator>+</operator> <name>i</name></block></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>tdir</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>TabletTime</name><operator>.</operator><name>LOGICAL_TIME_ID</name></name></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addTablet</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><name>tdir</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>TabletTime</name><operator>.</operator><name>LOGICAL_TIME_ID</name></name></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <decl_stmt><decl><type><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name></type> <name>mapFiles</name> <init>= <expr><operator>new</operator> <call><name><name>TreeMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
       <expr_stmt><expr><call><name><name>mapFiles</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><operator>new</operator> <call><name>FileRef</name><argument_list>(<argument><expr><name>tdir</name> <operator>+</operator> <literal type="string">"/"</literal> <operator>+</operator> <name><name>RFile</name><operator>.</operator><name>EXTENSION</name></name> <operator>+</operator> <literal type="string">"_000_000"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><operator>new</operator> <call><name>DataFileValue</name><argument_list>(<argument><expr><literal type="number">1000017</literal> <operator>+</operator> <name>i</name></expr></argument>, <argument><expr><literal type="number">10000</literal> <operator>+</operator> <name>i</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">149</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">149</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
       }</block>
       <name>int</name> <name>tid</name> <operator>=</operator> <literal type="number">0</literal></expr>;</expr_stmt>
       <expr_stmt><expr><call><name><name>TransactionWatcher</name><operator>.</operator><name>ZooArbitrator</name><operator>.</operator><name>start</name></name><argument_list>(<argument><expr><name><name>Constants</name><operator>.</operator><name>BULK_ARBITRATOR_TYPE</name></name></expr></argument>, <argument><expr><name>tid</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>updateTabletDataFile</name></name><argument_list>(<argument><expr><name>tid</name></expr></argument>, <argument><expr><name>extent</name></expr></argument>, <argument><expr><name>mapFiles</name></expr></argument>, <argument><expr><literal type="string">"L0"</literal></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>updateTabletDataFile</name></name><argument_list>(<argument><expr><name>tid</name></expr></argument>, <argument><expr><name>extent</name></expr></argument>, <argument><expr><name>mapFiles</name></expr></argument>, <argument><expr><literal type="string">"L0"</literal></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></try>
     
     <decl_stmt><decl><type><name>KeyExtent</name></type> <name>extent</name> <init>= <expr><name><name>extents</name><index>[<expr><name>extentToSplit</name></expr>]</index></name></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">170</literal></expr><operator>,</operator><expr><literal type="number">21</literal> <operator>+</operator><literal type="number">170</literal></expr><operator>,</operator><expr><literal type="number">21</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
     <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>splitDatafiles</name></name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>getTableId</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>midRow</name></expr></argument>, <argument><expr><name>splitRatio</name></expr></argument>, <argument><expr><operator>new</operator> <call><name><name>HashMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name><name>FileUtil</name><operator>.</operator><name>FileInfo</name></name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>mapFiles</name></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>,
         <argument><expr><name>highDatafileSizes</name></expr></argument>, <argument><expr><name>highDatafilesToRemove</name></expr></argument>)</argument_list></call></expr>;
     
    <call><name><name>MetadataTableUtil</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>splitRatio</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>splitTablet</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><call><name><name>extent</name><operator>.</operator><name>getPrevEndRow</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>splitRatio</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <decl_stmt><decl><type><name>TServerInstance</name></type> <name>instance</name> <init>= <expr><operator>new</operator> <call><name>TServerInstance</name><argument_list>(<argument><expr><name>location</name></expr></argument>, <argument><expr><call><name><name>zl</name><operator>.</operator><name>getSessionId</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>Writer</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Writer</name></type> <name>writer</name> <init>= <expr><operator>new</operator> <call><name>Writer</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <decl_stmt><decl><type><name>Assignment</name></type> <name>assignment</name> <init>= <expr><operator>new</operator> <call><name>Assignment</name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>instance</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <decl_stmt><decl><type><name>Mutation</name></type> <name>m</name> <init>= <expr><operator>new</operator> <call><name>Mutation</name><argument_list>(<argument><expr><call><name><name>assignment</name><operator>.</operator><name>tablet</name><operator>.</operator><name>getMetadataEntry</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>m</name><operator>.</operator><name>put</name></name><argument_list>(<argument><expr><name><name>TabletsSection</name><operator>.</operator><name>FutureLocationColumnFamily</name><operator>.</operator><name>NAME</name></name></expr></argument>, <argument><expr><call><name><name>assignment</name><operator>.</operator><name>server</name><operator>.</operator><name>asColumnQualifier</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>assignment</name><operator>.</operator><name>server</name><operator>.</operator><name>asMutationValue</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>writer</name><operator>.</operator><name>update</name></name><argument_list>(<argument><expr><name>m</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
     <if_stmt><if>if <condition>(<expr><name>steps</name> <operator>&gt;=</operator> <literal type="number">1</literal></expr>)</condition> <block>{<block_content>
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>bulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addNewTablet</name></name><argument_list>(<argument><expr><name>low</name></expr></argument>, <argument><expr><literal type="string">"/lowDir"</literal></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>, <argument><expr><name>bulkFiles</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>,
          <argument><expr><name><name>TabletTime</name><operator>.</operator><name>LOGICAL_TIME_ID</name></name> <operator>+</operator> <literal type="string">"0"</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1l</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1l</literal></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>bulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>extent</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>addNewTablet</name></name><argument_list>(<argument><expr><name>low</name></expr></argument>, <argument><expr><literal type="string">"/lowDir"</literal></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>, <argument><expr><name>bulkFiles</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>TabletTime</name><operator>.</operator><name>LOGICAL_TIME_ID</name></name>
          <operator>+</operator> <literal type="string">"0"</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1l</literal></expr></argument>, <argument><expr><operator>-</operator><literal type="number">1l</literal></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     </block_content>}</block></if></if_stmt>
     <if_stmt><if>if <condition>(<expr><name>steps</name> <operator>&gt;=</operator> <literal type="number">2</literal></expr>)</condition><block type="pseudo"><block_content>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>finishSplit</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>highDatafileSizes</name></expr></argument>, <argument><expr><name>highDatafilesToRemove</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
      <expr_stmt><expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>finishSplit</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>highDatafileSizes</name></expr></argument>, <argument><expr><name>highDatafilesToRemove</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
     <expr_stmt><expr><call><name><name>TabletServer</name><operator>.</operator><name>verifyTabletInformation</name></name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>instance</name></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>, <argument><expr><literal type="string">"127.0.0.1:0"</literal></expr></argument>, <argument><expr><name>zl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">192</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">192</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
       <expr><call><name>ensureTabletHasNoUnexpectedMetadataEntries</name><argument_list>(<argument><expr><name>low</name></expr></argument>, <argument><expr><name>lowDatafileSizes</name></expr></argument>)</argument_list></call></expr>;
       <call><name>ensureTabletHasNoUnexpectedMetadataEntries</name><argument_list>(<argument><expr><name>high</name></expr></argument>, <argument><expr><name>highDatafileSizes</name></expr></argument>)</argument_list></call></block></expr>;</expr_stmt>
       
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>lowBulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>low</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>highBulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>high</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>lowBulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>low</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name><name>Map</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>Long</name></argument>&gt;</argument_list></name></type> <name>highBulkFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getBulkFilesLoaded</name></name><argument_list>(<argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>high</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
       
       <if_stmt><if>if <condition>(<expr><operator>!</operator><call><name><name>lowBulkFiles</name><operator>.</operator><name>equals</name></name><argument_list>(<argument><expr><name>highBulkFiles</name></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
         <throw>throw <expr><operator>new</operator> <call><name>Exception</name><argument_list>(<argument><expr><literal type="string">" "</literal> <operator>+</operator> <name>lowBulkFiles</name> <operator>+</operator> <literal type="string">" != "</literal> <operator>+</operator> <name>highBulkFiles</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>low</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>high</name></expr></argument>)</argument_list></call></expr>;</throw>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">208</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">208</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
   }</block>
   
   <specifier>private</specifier> <name>void</name> <call><name>ensureTabletHasNoUnexpectedMetadataEntries</name><argument_list>(<argument><expr><name>KeyExtent</name> <name>extent</name></expr></argument>, <argument><expr><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name> <name>expectedMapFiles</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><name>Scanner</name> <name>scanner</name> <operator>=</operator> <operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
    <decl_stmt><decl><type><name>Scanner</name></type> <name>scanner</name> <init>= <expr><operator>new</operator> <call><name>ScannerImpl</name><argument_list>(<argument><expr><call><name><name>HdfsZooInstance</name><operator>.</operator><name>getInstance</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>MetadataTable</name><operator>.</operator><name>ID</name></name></expr></argument>, <argument><expr><name><name>Authorizations</name><operator>.</operator><name>EMPTY</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name><name>scanner</name><operator>.</operator><name>setRange</name></name><argument_list>(<argument><expr><call><name><name>extent</name><operator>.</operator><name>toMetadataRange</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     
     <decl_stmt><decl><type><name><name>HashSet</name><argument_list type="generic">&lt;<argument><name>ColumnFQ</name></argument>&gt;</argument_list></name></type> <name>expectedColumns</name> <init>= <expr><operator>new</operator> <call><name><name>HashSet</name><argument_list type="generic">&lt;<argument><name>ColumnFQ</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">247</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">247</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>SplitRecoveryTest</name> extends <name>FunctionalTest</name> <block>{
       <throw>throw <argument_list>new <argument><expr><call><name>Exception</name><argument_list>(<argument><expr><literal type="string">"Not all expected columns seen "</literal> <operator>+</operator> <name>extent</name> <operator>+</operator> <literal type="string">" "</literal> <operator>+</operator> <name>expectedColumns</name></expr></argument>)</argument_list></call></expr></argument></argument_list></throw>;
     }</block></expr></expr_stmt>
     
    <decl_stmt><decl><type><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name></type> <name>fixedMapFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getDataFileSizes</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><call><name><name>SecurityConstants</name><operator>.</operator><name>getSystemCredentials</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name><name>SortedMap</name><argument_list type="generic">&lt;<argument><name>FileRef</name></argument>,<argument><name>DataFileValue</name></argument>&gt;</argument_list></name></type> <name>fixedMapFiles</name> <init>= <expr><call><name><name>MetadataTableUtil</name><operator>.</operator><name>getDataFileSizes</name></name><argument_list>(<argument><expr><name>extent</name></expr></argument>, <argument><expr><call><name><name>SystemCredentials</name><operator>.</operator><name>get</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAsThrift</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
     <expr_stmt><expr><call><name>verifySame</name><argument_list>(<argument><expr><name>expectedMapFiles</name></expr></argument>, <argument><expr><name>fixedMapFiles</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></if></if_stmt>
   
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>performance</name><operator>/</operator><name>metadata</name><operator>/</operator><name><name>MetadataBatchScanTest</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>performance</name><operator>/</operator><name>metadata</name><operator>/</operator><name><name>MetadataBatchScanTest</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">5602f144e</literal><operator>..</operator><literal type="number">3545170e2</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>performance</name><operator>/</operator><name>metadata</name><operator>/</operator><name><name>MetadataBatchScanTest</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>test</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>accumulo</name><operator>/</operator><name>test</name><operator>/</operator><name>performance</name><operator>/</operator><name>metadata</name><operator>/</operator><name><name>MetadataBatchScanTest</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">42</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">42</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt> <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>security</name><operator>.</operator><name>Authorizations</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>AddressUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>core</name><operator>.</operator><name>util</name><operator>.</operator><name>Stat</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>master</name><operator>.</operator><name>state</name><operator>.</operator><name>TServerInstance</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SecurityConstants</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>accumulo</name><operator>.</operator><name>server</name><operator>.</operator><name>security</name><operator>.</operator><name>SystemCredentials</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>io</name><operator>.</operator><name>Text</name></name>;</import></block_content></block></finally></try></block></class></block_content></block></function></block_content></block></catch></try></block_content></block></catch></try></block></expr></expr_stmt></block_content></block></catch></try></block></expr></expr_stmt></block_content></block></catch></try></block></expr></expr_stmt></block_content></block></function></block_content></block></finally></try></block_content></block></if></if_stmt></block_content></block></function></block_content></block></synchronized></block_content></block></finally></try></block></expr></expr_stmt></block_content></block></if></if_stmt></block_content></block></try></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block></expr></expr_stmt></block_content></block></try></block_content></block></try></block_content></block></synchronized></expr></expr_stmt></block_content></block></function></block_content></block></function></block_content></block></function></block_content></block></function></block></class></block></class></block_content></block></if></if_stmt></block_content></block></function></block_content></block></function></block_content></block></try></block_content></block></function></block_content></block></constructor></block_content></block></if></if_stmt></block_content></block></try></block_content></block></if></if_stmt></block></expr></expr_stmt></block_content></block></function></block_content></block></else></if_stmt></block></class></block_content></block></else></if_stmt>
 
 <comment type="block" format="javadoc">/**
@@ -56,8 +56,8 @@ public class MetadataBatchScanTest {
   
   public static void main(String[] args) throws Exception {
     
    final Connector connector = new ZooKeeperInstance("acu14", "localhost")
        .getConnector(SecurityConstants.SYSTEM_PRINCIPAL, SecurityConstants.getSystemToken());
    final Connector connector = new ZooKeeperInstance("acu14", "localhost").getConnector(SystemCredentials.get().getPrincipal(), SystemCredentials.get()
        .getToken());
     
     TreeSet&lt;Long&gt; splits = new TreeSet&lt;Long&gt;();
     Random r = new Random(42);
diff --git a/test/src/main/java/org/apache/accumulo/test/performance/thrift/NullTserver.java b/test/src/main/java/org/apache/accumulo/test/performance/thrift/NullTserver.java
index d4b1c8e2e..41a4d541e 100644
-- a/test/src/main/java/org/apache/accumulo/test/performance/thrift/NullTserver.java
++ b/test/src/main/java/org/apache/accumulo/test/performance/thrift/NullTserver.java
@@ -62,7 +62,7 @@ import org.apache.accumulo.server.master.state.MetaDataStateStore;
 import org.apache.accumulo.server.master.state.MetaDataTableScanner;
 import org.apache.accumulo.server.master.state.TServerInstance;
 import org.apache.accumulo.server.master.state.TabletLocationState;
import org.apache.accumulo.server.security.SecurityConstants;
import org.apache.accumulo.server.security.SystemCredentials;
 import org.apache.accumulo.server.util.TServerUtils;
 import org.apache.accumulo.server.zookeeper.TransactionWatcher;
 import org.apache.accumulo.trace.thrift.TInfo;
@@ -230,7 +230,7 @@ public class NullTserver {
     
     // read the locations for the table
     Range tableRange = new KeyExtent(new Text(tableId), null, null).toMetadataRange();
    MetaDataTableScanner s = new MetaDataTableScanner(zki, SecurityConstants.getSystemCredentials(), tableRange);
    MetaDataTableScanner s = new MetaDataTableScanner(zki, SystemCredentials.get().getAsThrift(), tableRange);
     long randomSessionID = opts.port;
     TServerInstance instance = new TServerInstance(addr, randomSessionID);
     List&lt;Assignment&gt; assignments = new ArrayList&lt;Assignment&gt;();
diff --git a/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/Shutdown.java b/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/Shutdown.java
index b28375249..aa4c619e9 100644
-- a/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/Shutdown.java
++ b/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/Shutdown.java
@@ -24,7 +24,7 @@ import org.apache.accumulo.core.master.thrift.MasterGoalState;
 import org.apache.accumulo.core.util.UtilWaitThread;
 import org.apache.accumulo.server.client.HdfsZooInstance;
 import org.apache.accumulo.server.master.state.SetGoalState;
import org.apache.accumulo.server.security.SecurityConstants;
import org.apache.accumulo.server.security.SystemCredentials;
 import org.apache.accumulo.test.randomwalk.State;
 import org.apache.accumulo.test.randomwalk.Test;
 import org.apache.accumulo.trace.instrument.Tracer;
@@ -32,25 +32,25 @@ import org.apache.accumulo.trace.instrument.Tracer;
 public class Shutdown extends Test {
   
   @Override
  public void visit(State state, Properties props) throws Exception  {
  public void visit(State state, Properties props) throws Exception {
     log.debug("shutting down");
    SetGoalState.main(new String[]{MasterGoalState.CLEAN_STOP.name()});
    SetGoalState.main(new String[] {MasterGoalState.CLEAN_STOP.name()});
     
     while (!state.getConnector().instanceOperations().getTabletServers().isEmpty()) {
       UtilWaitThread.sleep(1000);
     }
     
     while (true) {
        try {
          Client client = MasterClient.getConnection(HdfsZooInstance.getInstance());
          client.getMasterStats(Tracer.traceInfo(), SecurityConstants.getSystemCredentials());
        } catch (Exception e) {
          // assume this is due to server shutdown
          break;
        }
        UtilWaitThread.sleep(1000);
      try {
        Client client = MasterClient.getConnection(HdfsZooInstance.getInstance());
        client.getMasterStats(Tracer.traceInfo(), SystemCredentials.get().getAsThrift());
      } catch (Exception e) {
        // assume this is due to server shutdown
        break;
      }
      UtilWaitThread.sleep(1000);
     }

    
     log.debug("tablet servers stopped");
   }
   
diff --git a/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/StartAll.java b/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/StartAll.java
index 8b99a5580..45844b095 100644
-- a/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/StartAll.java
++ b/test/src/main/java/org/apache/accumulo/test/randomwalk/concurrent/StartAll.java
@@ -25,7 +25,7 @@ import org.apache.accumulo.core.master.thrift.MasterMonitorInfo;
 import org.apache.accumulo.core.util.UtilWaitThread;
 import org.apache.accumulo.server.client.HdfsZooInstance;
 import org.apache.accumulo.server.master.state.SetGoalState;
import org.apache.accumulo.server.security.SecurityConstants;
import org.apache.accumulo.server.security.SystemCredentials;
 import org.apache.accumulo.test.randomwalk.State;
 import org.apache.accumulo.test.randomwalk.Test;
 import org.apache.accumulo.trace.instrument.Tracer;
@@ -35,13 +35,13 @@ public class StartAll extends Test {
   @Override
   public void visit(State state, Properties props) throws Exception {
     log.info("Starting all servers");
    SetGoalState.main(new String[]{MasterGoalState.NORMAL.name()});
    Process exec = Runtime.getRuntime().exec(new String[]{System.getenv().get("ACCUMULO_HOME") + "/bin/start-all.sh"});
    SetGoalState.main(new String[] {MasterGoalState.NORMAL.name()});
    Process exec = Runtime.getRuntime().exec(new String[] {System.getenv().get("ACCUMULO_HOME") + "/bin/start-all.sh"});
     exec.waitFor();
     while (true) {
       try {
         Client client = MasterClient.getConnection(HdfsZooInstance.getInstance());
        MasterMonitorInfo masterStats = client.getMasterStats(Tracer.traceInfo(), SecurityConstants.getSystemCredentials());
        MasterMonitorInfo masterStats = client.getMasterStats(Tracer.traceInfo(), SystemCredentials.get().getAsThrift());
         if (!masterStats.tServerInfo.isEmpty())
           break;
       } catch (Exception ex) {
diff --git a/test/src/main/java/org/apache/accumulo/test/randomwalk/security/WalkingSecurity.java b/test/src/main/java/org/apache/accumulo/test/randomwalk/security/WalkingSecurity.java
index bd97dd42e..9cff8f7aa 100644
-- a/test/src/main/java/org/apache/accumulo/test/randomwalk/security/WalkingSecurity.java
++ b/test/src/main/java/org/apache/accumulo/test/randomwalk/security/WalkingSecurity.java
@@ -69,7 +69,6 @@ public class WalkingSecurity extends SecurityOperation implements Authorizor, Au
     super(author, authent, pm, instanceId);
   }
   
  @SuppressWarnings("deprecation")
   public WalkingSecurity(State state2) {
     super(state2.getInstance().getInstanceID());
     this.state = state2;
@@ -401,7 +400,7 @@ public class WalkingSecurity extends SecurityOperation implements Authorizor, Au
   public boolean validTokenClass(String tokenClass) {
     return tokenClass.equals(PasswordToken.class.getCanonicalName());
   }

  
   public static void clearInstance() {
     instance = null;
   }
- 
2.19.1.windows.1

</comment></unit>
