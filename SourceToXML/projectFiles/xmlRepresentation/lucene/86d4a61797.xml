<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/lucene/86d4a61797.java"><expr_stmt><expr><name>From</name> <literal type="number">86d4a61797cd8df5dc810ea3ebb9124b5f0e52a4</literal> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <literal type="string">"Chris M. Hostetter"</literal> <operator>&lt;</operator><name>hossman</name>@<name><name>apache</name><operator>.</operator><name>org</name></name><operator>&gt;</operator>
<name>Date</name><operator>:</operator> <name>Wed</name></expr><operator>,</operator> <expr><literal type="number">11</literal> <name>Sep</name> <literal type="number">2013</literal> <literal type="number">17</literal><operator>:</operator><literal type="number">35</literal><operator>:</operator><literal type="number">24</literal> <operator>+</operator><literal type="number">0000</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>SOLR</name><operator>-</operator><literal type="number">5231</literal><operator>:</operator> <name>Fixed</name> <name>a</name> <name>bug</name> <name>with</name> <name>the</name> <name>behavior</name> <name>of</name> <name>BoolField</name> <name>that</name>
 <name>caused</name> <name>documents</name> <name>w</name><operator>/</operator><name>o</name> <name>a</name> <name>value</name></expr></expr_stmt> <for>for the field to act as if the value were true
 in functions if no other documents in the same index segment had a value of
 true.

git-svn-id: https:<comment type="line">//svn.apache.org/repos/asf/lucene/dev/trunk@1521948 13f79535-47bb-0310-9956-ffa450edef68</comment>
--
 solr/CHANGES.txt                              <operator>|</operator>  5 ++++
 .../org/apache/solr/schema/BoolField.java     <operator>|</operator>  3 +-
 .../search/function/TestFunctionQuery.java    <operator>|</operator> 28 +++++++++++++++++++
 3 files changed<operator>,</operator> <expr_stmt><expr><literal type="number">35</literal> <call><name>insertions</name><argument_list>(<argument><expr><operator>+</operator></expr></argument>)</argument_list></call></expr><operator>,</operator> <expr><literal type="number">1</literal> <call><name>deletion</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name><name>CHANGES</name><operator>.</operator><name>txt</name></name> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name><name>CHANGES</name><operator>.</operator><name>txt</name></name>
<name>index</name> <name>b3bdca90287</name><operator>..</operator><literal type="number">9c2f2e16276</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name><name>CHANGES</name><operator>.</operator><name>txt</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name><name>CHANGES</name><operator>.</operator><name>txt</name></name>
@@ <operator>-</operator><literal type="number">225</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">225</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <name>Bug</name> <name>Fixes</name>
 <operator>*</operator> <name>SOLR</name><operator>-</operator><literal type="number">5227</literal><operator>:</operator> <name>Correctly</name> <name>fail</name> <name>schema</name> <name>initalization</name></expr></expr_stmt></for> <if_stmt><if>if a dynamicField is configured to
   be required<operator>,</operator> <expr_stmt><expr><name>or</name> <name>have</name> <name>a</name> default <name><name>value</name><operator>.</operator></name>  (<name>hossman</name></expr></expr_stmt></if></if_stmt>)
 
<expr_stmt><expr><operator>*</operator> <name>SOLR</name><operator>-</operator><literal type="number">5231</literal><operator>:</operator> <name>Fixed</name> <name>a</name> <name>bug</name> <name>with</name> <name>the</name> <name>behavior</name> <name>of</name> <name>BoolField</name> <name>that</name> <name>caused</name> <name>documents</name> <name>w</name><operator>/</operator><name>o</name>
  <name>a</name> <name>value</name></expr></expr_stmt> <for>for the field to act as if the value were true in functions if no other
  documents in the same index segment had a value of true.
  <control>(<init><decl><type><name>Robert</name></type> <name>Muir</name></decl>, <decl><type ref="prev"/><name>hossman</name></decl>, <decl><type ref="prev"/><name>yonik</name></decl></init>)</control><block type="pseudo"><block_content>

 <expr_stmt><expr><name>Optimizations</name>
 <operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator><operator>--</operator>
 
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>schema</name><operator>/</operator><name><name>BoolField</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>schema</name><operator>/</operator><name><name>BoolField</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">3704120a152</literal><operator>..</operator><name>d7be93b91fd</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>schema</name><operator>/</operator><name><name>BoolField</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>schema</name><operator>/</operator><name><name>BoolField</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">173</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">173</literal></expr><operator>,</operator><expr><literal type="number">8</literal> @@ <name>class</name> <name>BoolFieldSource</name> extends <name>ValueSource</name> <block>{
     <comment type="line">// figure out what ord maps to true</comment>
     <expr><name>int</name> <name>nord</name> <operator>=</operator> <call><name><name>sindex</name><operator>.</operator><name>getValueCount</name></name><argument_list>()</argument_list></call></expr>;
     <expr><name>BytesRef</name> <name>br</name> <operator>=</operator> <operator>new</operator> <call><name>BytesRef</name><argument_list>()</argument_list></call></expr>;
    <expr><name>int</name> <name>tord</name> <operator>=</operator> <operator>-</operator><literal type="number">1</literal></expr>;
    <comment type="line">// if no values in the segment, default trueOrd to something other then -1 (missing)</comment>
    <expr><name>int</name> <name>tord</name> <operator>=</operator> <operator>-</operator><literal type="number">2</literal></expr>;
     <for>for <control>(<init><decl><type><name>int</name></type> <name>i</name><init>=<expr><literal type="number">0</literal></expr></init></decl>;</init> <condition><expr><name>i</name><operator>&lt;</operator><name>nord</name></expr>;</condition> <incr><expr><name>i</name><operator>++</operator></expr></incr>)</control> <block>{<block_content>
       <expr_stmt><expr><call><name><name>sindex</name><operator>.</operator><name>lookupOrd</name></name><argument_list>(<argument><expr><name>i</name></expr></argument>, <argument><expr><name>br</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
       <if_stmt><if>if <condition>(<expr><name><name>br</name><operator>.</operator><name>length</name></name><operator>==</operator><literal type="number">1</literal> <operator>&amp;&amp;</operator> <name><name>br</name><operator>.</operator><name>bytes</name><index>[<expr><name><name>br</name><operator>.</operator><name>offset</name></name></expr>]</index></name><operator>==</operator><literal type="char">'T'</literal></expr>)</condition> <block>{<block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>search</name><operator>/</operator><name>function</name><operator>/</operator><name><name>TestFunctionQuery</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>search</name><operator>/</operator><name>function</name><operator>/</operator><name><name>TestFunctionQuery</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">7778240910b</literal><operator>..</operator><literal type="number">7068b1620c9</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>search</name><operator>/</operator><name>function</name><operator>/</operator><name><name>TestFunctionQuery</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>solr</name><operator>/</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>solr</name><operator>/</operator><name>search</name><operator>/</operator><name>function</name><operator>/</operator><name><name>TestFunctionQuery</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">723</literal></expr><operator>,</operator><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">723</literal></expr><operator>,</operator><expr><literal type="number">32</literal> @@ <specifier>public</specifier> <name>class</name> <name>TestFunctionQuery</name> extends <name>SolrTestCaseJ4</name> <block>{
         , <expr><literal type="string">"/response/docs/[0]=={'a':1, 'b':2.0,'c':'X','d':'A'}"</literal></expr>)</block></expr>;</expr_stmt>
   <expr_stmt/></block_content></block></if></if_stmt></block_content></block></for>}</block>
 
  <specifier>public</specifier> <name>void</name> <call><name>testMissingFieldFunctionBehavior</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name>clearIndex</name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt></block_content></block></for>
    <comment type="line">// add a doc that has no values in any interesting fields</comment>
    <expr_stmt><expr><call><name>assertU</name><argument_list>(<argument><expr><call><name>adoc</name><argument_list>(<argument><expr><literal type="string">"id"</literal></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>assertU</name><argument_list>(<argument><expr><call><name>commit</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <comment type="line">// it's important that these functions not only use fields that</comment>
    <comment type="line">// out doc have no values for, but also that that no other doc ever added</comment>
    <comment type="line">// to the index might have ever had a value for, so that the segment</comment>
    <comment type="line">// term metadata doesn't exist</comment>
    
    <for>for <control>(<init><decl><type><name>String</name></type> <name>suffix</name> <range>: <expr><operator>new</operator> <name><name>String</name><index>[]</index></name> <block>{<expr><literal type="string">"s"</literal></expr>, <expr><literal type="string">"b"</literal></expr>, <expr><literal type="string">"dt"</literal></expr>, <expr><literal type="string">"tdt"</literal></expr>,
                                       <expr><literal type="string">"i"</literal></expr>, <expr><literal type="string">"l"</literal></expr>, <expr><literal type="string">"f"</literal></expr>, <expr><literal type="string">"d"</literal></expr>, 
                                       <expr><literal type="string">"pi"</literal></expr>, <expr><literal type="string">"pl"</literal></expr>, <expr><literal type="string">"pf"</literal></expr>, <expr><literal type="string">"pd"</literal></expr>,
                                       <expr><literal type="string">"ti"</literal></expr>, <expr><literal type="string">"tl"</literal></expr>, <expr><literal type="string">"tf"</literal></expr>, <expr><literal type="string">"td"</literal></expr>    }</block></expr></range></decl></init>)</control> <block>{<block_content>
      <decl_stmt><decl><type><specifier>final</specifier> <name>String</name></type> <name>field</name> <init>= <expr><literal type="string">"no__vals____"</literal> <operator>+</operator> <name>suffix</name></expr></init></decl>;</decl_stmt>
      <expr_stmt><expr><call><name>assertQ</name><argument_list>(<argument><expr><call><name>req</name><argument_list>(<argument><expr><literal type="string">"q"</literal></expr></argument>,<argument><expr><literal type="string">"id:1"</literal></expr></argument>,
                  <argument><expr><literal type="string">"fl"</literal></expr></argument>,<argument><expr><literal type="string">"noval_if:if("</literal><operator>+</operator><name>field</name><operator>+</operator><literal type="string">",42,-99)"</literal></expr></argument>,
                  <argument><expr><literal type="string">"fl"</literal></expr></argument>,<argument><expr><literal type="string">"noval_def:def("</literal><operator>+</operator><name>field</name><operator>+</operator><literal type="string">",-99)"</literal></expr></argument>,
                  <argument><expr><literal type="string">"fl"</literal></expr></argument>,<argument><expr><literal type="string">"noval_not:not("</literal><operator>+</operator><name>field</name><operator>+</operator><literal type="string">")"</literal></expr></argument>,
                  <argument><expr><literal type="string">"fl"</literal></expr></argument>,<argument><expr><literal type="string">"noval_exists:exists("</literal><operator>+</operator><name>field</name><operator>+</operator><literal type="string">")"</literal></expr></argument>)</argument_list></call></expr></argument>,
              <argument><expr><literal type="string">"//long[@name='noval_if']='-99'"</literal></expr></argument>,
              <argument><expr><literal type="string">"//long[@name='noval_def']='-99'"</literal></expr></argument>,
              <argument><expr><literal type="string">"//bool[@name='noval_not']='true'"</literal></expr></argument>,
              <argument><expr><literal type="string">"//bool[@name='noval_exists']='false'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></for>
  }

 }
<expr><operator>-</operator> 
<literal type="number">2.19.1.windows</literal><literal type="number">.1</literal></expr>

</unit>
