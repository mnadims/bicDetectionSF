<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/ambari/b96c77a8f9.java"><expr_stmt><expr><name>From</name> <name>b96c77a8f9dfd021aa4a0b2f825dc2e270f79050</name> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>Swapan</name> <name><name>Shridhar</name> <argument_list type="generic">&lt;<argument><name>sshridhar</name><annotation>@<name><name>hortonworks</name><operator>.</operator><name>com</name></name></annotation></argument>&gt;</argument_list></name>
<name>Date</name><operator>:</operator> <name>Thu</name></expr><operator>,</operator> <expr><literal type="number">24</literal> <name>Aug</name> <literal type="number">2017</literal> <literal type="number">12</literal><operator>:</operator><literal type="number">13</literal><operator>:</operator><literal type="number">10</literal> <operator>-</operator><literal type="number">0700</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>AMBARI</name><operator>-</operator><literal type="number">21076.</literal> <name>Move</name> <name>superset</name> <name>as</name> <name>an</name> <name>independent</name> <name><name>project</name><operator>.</operator></name>
 (<name>Nishant</name> <name>Bangarwa</name> <name>via</name> <name>Swapan</name> <name>Shridhar</name></expr></expr_stmt>)<expr_stmt><expr><operator>.</operator>

<operator>--</operator>
 <operator>...</operator><operator>/</operator><name>server</name><operator>/</operator><name>upgrade</name><operator>/</operator><name><name>UpgradeCatalog260</name><operator>.</operator><name>java</name></name>     <operator>|</operator>  <literal type="number">48</literal> <operator>++</operator><operator>++</operator><operator>++</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>configuration</name><operator>/</operator><name>druid</name><operator>-</operator><name>superset</name><operator>-</operator><name><name>env</name><operator>.</operator><name>xml</name></name>      <operator>|</operator>  <literal type="number">12</literal> <operator>++</operator>
 <operator>...</operator><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>  <operator>|</operator>  <literal type="number">21</literal> <operator>--</operator><operator>-</operator>
 <operator>...</operator><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator></expr></expr_stmt><package>package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>     <operator>|</operator>  45 -------
 .../0.9.2/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>    <operator>|</operator>   2 -
 .../<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>superset</name><operator>.</operator><name>py</name></name>   <operator>|</operator>  40 +++---
 .../<name>DRUID</name>/0.9.2/package/<name>templates</name>/<name><name>superset</name><operator>.</operator><name>sh</name></name> <operator>|</operator>   2 +-
 .../<name>DRUID</name>/0.9.2/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>    <operator>|</operator>  13 --
 .../<name>DRUID</name>/0.9.2/<name><name>role_command_order</name><operator>.</operator><name>json</name></name>       <operator>|</operator>   3 +-
 .../<name>DRUID</name>/0.9.2/<name>themes</name>/<name><name>theme</name><operator>.</operator><name>json</name></name>             <operator>|</operator>  82 +-----------
 .../<name>SUPERSET</name>/0.15.0/<name><name>metainfo</name><operator>.</operator><name>xml</name></name>              <operator>|</operator>  88 +++++++++++++
 .../<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name> <operator>|</operator>  89 +++++++++++++
 .../0.15.0/package/<name>scripts</name>/<name><name>service_check</name><operator>.</operator><name>py</name></name>   <operator>|</operator>  37 ++++++
 .../0.15.0/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>   <operator>|</operator>  25 ++++
 .../0.15.0/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>         <operator>|</operator>  24 ++++
 .../<name>SUPERSET</name>/0.15.0/<name><name>role_command_order</name><operator>.</operator><name>json</name></name>   <operator>|</operator>   7 +
 .../<name>SUPERSET</name>/0.15.0/<name>themes</name>/<name><name>theme</name><operator>.</operator><name>json</name></name>         <operator>|</operator> 120 ++++++++++++++++++
 .../<name>HDP</name>/2.6/<name>services</name>/<name>DRUID</name>/<name><name>kerberos</name><operator>.</operator><name>json</name></name>      <operator>|</operator>   6 -
 .../<name>HDP</name>/2.6/<name>services</name>/<name>SUPERSET</name>/<name><name>kerberos</name><operator>.</operator><name>json</name></name>   <operator>|</operator>  51 ++++++++
 .../<name>HDP</name>/2.6/<name>services</name>/<name>SUPERSET</name>/<name><name>metainfo</name><operator>.</operator><name>xml</name></name>    <operator>|</operator>  28 ++++
 .../<name>stacks</name>/<name>HDP</name>/2.6/<name>services</name>/<name><name>stack_advisor</name><operator>.</operator><name>py</name></name>  <operator>|</operator>   8 +-
 .../<name>server</name>/<name>upgrade</name>/<name><name>UpgradeCatalog260Test</name><operator>.</operator><name>java</name></name> <operator>|</operator>  43 +++++++
 .../<name>python</name>/<name>stacks</name>/2.6/<name>configs</name>/default.<name>json</name>    <operator>|</operator>   2 +-
 23 <name>files</name> <name>changed</name><operator>,</operator> 602 <name>insertions</name>(+</package>)<operator>,</operator> <expr_stmt><expr><literal type="number">194</literal> <call><name>deletions</name><argument_list>(<argument><expr><operator>-</operator></expr></argument>)</argument_list></call>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
 <name>create</name> <name>mode</name> <literal type="number">100644</literal> <name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator></expr></expr_stmt><package>package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>service_check</name><operator>.</operator><name>py</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/<name><name>role_command_order</name><operator>.</operator><name>json</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/<name>themes</name>/<name><name>theme</name><operator>.</operator><name>json</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>stacks</name>/<name>HDP</name>/2.6/<name>services</name>/<name>SUPERSET</name>/<name><name>kerberos</name><operator>.</operator><name>json</name></name>
 <name>create</name> <name>mode</name> 100644 <name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>stacks</name>/<name>HDP</name>/2.6/<name>services</name>/<name>SUPERSET</name>/<name><name>metainfo</name><operator>.</operator><name>xml</name></name>

<name>diff</name> --<name>git</name> <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>java</name>/<name>org</name>/<name>apache</name>/<name>ambari</name>/<name>server</name>/<name>upgrade</name>/<name><name>UpgradeCatalog260</name><operator>.</operator><name>java</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>java</name>/<name>org</name>/<name>apache</name>/<name>ambari</name>/<name>server</name>/<name>upgrade</name>/<name><name>UpgradeCatalog260</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>ce84cc6717</name>..2d094e5bbc 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>java</name>/<name>org</name>/<name>apache</name>/<name>ambari</name>/<name>server</name>/<name>upgrade</name>/<name><name>UpgradeCatalog260</name><operator>.</operator><name>java</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>java</name>/<name>org</name>/<name>apache</name>/<name>ambari</name>/<name>server</name>/<name>upgrade</name>/<name><name>UpgradeCatalog260</name><operator>.</operator><name>java</name></name>
@@ -92<operator>,</operator>6 +92<operator>,</operator>10 @@ public class <name>UpgradeCatalog260</name> extends <name>AbstractUpgradeCatalog</name> <block>{<block_content>
   <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>FK_UPGRADE_HIST_FROM_REPO</name> <init>= <expr><literal type="string">"FK_upgrade_hist_from_repo"</literal></expr></init></decl>;</decl_stmt>
   <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>FK_UPGRADE_HIST_TARGET_REPO</name> <init>= <expr><literal type="string">"FK_upgrade_hist_target_repo"</literal></expr></init></decl>;</decl_stmt>
   <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>UQ_UPGRADE_HIST</name> <init>= <expr><literal type="string">"UQ_upgrade_hist"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>SERVICE_CONFIG_MAPPING_TABLE</name> <init>= <expr><literal type="string">"serviceconfigmapping"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>SERVICE_COMPONENT_DESIRED_STATE</name> <init>= <expr><literal type="string">"servicecomponentdesiredstate"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>HOST_COMPONENT_DESIRED_STATE</name> <init>= <expr><literal type="string">"hostcomponentdesiredstate"</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>public</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>HOST_COMPONENT_STATE</name> <init>= <expr><literal type="string">"hostcomponentstate"</literal></expr></init></decl>;</decl_stmt>
 
   <comment type="block" format="javadoc">/**
    * Logger.
@@ -117,14 +121,14 @@ public class UpgradeCatalog260 extends AbstractUpgradeCatalog {
    * {@inheritDoc}
    */</comment>
   <function><annotation>@<name>Override</name></annotation>
  <type><specifier>public</specifier> <name>String</name></type> <name>getSourceVersion</name><parameter_list>()</parameter_list> <block>{<block_content>
  <function><type><specifier>public</specifier> <name>String</name></type> <name>getSourceVersion</name><parameter_list>()</parameter_list>
  <block>{<block_content>
     <return>return <expr><literal type="string">"2.5.2"</literal></expr>;</return>
   </block_content>}</block></function>
 
   <comment type="block" format="javadoc">/**
    * {@inheritDoc}
    */</comment>
  <function><annotation>@<name>Override</name></annotation>
   <type><specifier>public</specifier> <name>String</name></type> <name>getTargetVersion</name><parameter_list>()</parameter_list> <block>{<block_content>
     <return>return <expr><literal type="string">"2.6.0"</literal></expr>;</return>
   </block_content>}</block></function>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">312</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">316</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>class</name> <name>UpgradeCatalog260</name> extends <name>AbstractUpgradeCatalog</name> <block>{
   @<expr><name>Override</name>
   <specifier>protected</specifier> <name>void</name> <call><name>executeDMLUpdates</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>AmbariException</name></expr></argument>, <argument><expr><name>SQLException</name> <block>{
     <expr><call><name>addNewConfigurationsFromXml</name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr>;
    <expr><call><name>removeSupersetFromDruid</name><argument_list>()</argument_list></call></expr>;
   }</block>
 
   <specifier>public</specifier> <name>int</name> <call><name>getCurrentVersionID</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>AmbariException</name></expr></argument>, <argument><expr><name>SQLException</name> <block>{</block></expr></argument>
@<argument>@ <expr><operator>-</operator><literal type="number">322</literal></expr></argument>,<argument><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">327</literal></expr></argument>,<argument><expr><literal type="number">43</literal> @@ <specifier>public</specifier> <name>class</name> <name>UpgradeCatalog260</name> extends <name>AbstractUpgradeCatalog</name></expr></argument></throws> <block>{<block_content>
     </block_content>}</block></expr></expr_stmt>
     <return>return <expr><call><name><name>currentVersionList</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</return>
   </block_content>}</block></function>

  <comment type="line">// Superset is moved as an independent service in Ambari-2.6.</comment>
  <comment type="line">// This will remove superset component if installed under Druid Service</comment>
  <function><type><specifier>protected</specifier> <name>void</name></type> <name>removeSupersetFromDruid</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>SQLException</name></expr></argument></throws> <block>{<block_content>
    <expr_stmt><expr><call><name>removeComponent</name><argument_list>(<argument><expr><literal type="string">"DRUID_SUPERSET"</literal></expr></argument>, <argument><expr><literal type="string">"druid-superset"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></function>

  <function><type><specifier>private</specifier> <name>void</name></type> <name>removeComponent</name><parameter_list>(<parameter><decl><type><name>String</name></type> <name>componentName</name></decl></parameter>, <parameter><decl><type><name>String</name></type> <name>configPrefix</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>SQLException</name></expr></argument></throws> <block>{<block_content>
    <decl_stmt><decl><type><name>String</name></type> <name>supersetConfigMappingRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE type_name like '%s%%'"</literal></expr></argument>,
        <argument><expr><name>CLUSTER_CONFIG_MAPPING_TABLE</name></expr></argument>, <argument><expr><name>configPrefix</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>String</name></type> <name>serviceConfigMappingRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE config_id IN (SELECT config_id from %s where type_name like '%s%%')"</literal></expr></argument>,
        <argument><expr><name>SERVICE_CONFIG_MAPPING_TABLE</name></expr></argument>, <argument><expr><name>CLUSTER_CONFIG_TABLE</name></expr></argument>, <argument><expr><name>configPrefix</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>String</name></type> <name>supersetConfigRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE type_name like '%s%%'"</literal></expr></argument>,
        <argument><expr><name>CLUSTER_CONFIG_TABLE</name></expr></argument>, <argument><expr><name>configPrefix</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>String</name></type> <name>hostComponentDesiredStateRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE component_name = '%s'"</literal></expr></argument>,
        <argument><expr><name>HOST_COMPONENT_DESIRED_STATE</name></expr></argument>, <argument><expr><name>componentName</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>String</name></type> <name>hostComponentStateRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE component_name = '%s'"</literal></expr></argument>,
        <argument><expr><name>HOST_COMPONENT_STATE</name></expr></argument>, <argument><expr><name>componentName</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>String</name></type> <name>serviceComponentDesiredStateRemoveSQL</name> <init>= <expr><call><name><name>String</name><operator>.</operator><name>format</name></name><argument_list>(
        <argument><expr><literal type="string">"DELETE FROM %s WHERE component_name = '%s'"</literal></expr></argument>,
        <argument><expr><name>SERVICE_COMPONENT_DESIRED_STATE</name></expr></argument>, <argument><expr><name>componentName</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>supersetConfigMappingRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>serviceConfigMappingRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>supersetConfigRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>hostComponentDesiredStateRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>hostComponentStateRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><name>serviceComponentDesiredStateRemoveSQL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></function>
 </block_content>}</block></package>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>configuration</name><operator>/</operator><name>druid</name><operator>-</operator><name>superset</name><operator>-</operator><name><name>env</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>configuration</name><operator>/</operator><name>druid</name><operator>-</operator><name>superset</name><operator>-</operator><name><name>env</name><operator>.</operator><name>xml</name></name>
<name>index</name> <literal type="number">728434203a</literal><operator>..</operator><literal type="number">71fa3b66a9</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>configuration</name><operator>/</operator><name>druid</name><operator>-</operator><name>superset</name><operator>-</operator><name><name>env</name><operator>.</operator><name>xml</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>configuration</name><operator>/</operator><name>druid</name><operator>-</operator><name>superset</name><operator>-</operator><name><name>env</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">84</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">84</literal></expr><operator>,</operator><expr><literal type="number">18</literal> @@
     <operator>&lt;</operator><name>value</name><operator>&gt;</operator><operator>&lt;</operator><operator>/</operator><name>value</name><operator>&gt;</operator>
     <operator>&lt;</operator><name>on</name><operator>-</operator><name>ambari</name><operator>-</operator><name>upgrade</name> <name>add</name><operator>=</operator><literal type="string">"true"</literal><operator>/</operator><operator>&gt;</operator>
   <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>
  <operator>&lt;</operator><name>property</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>superset_user</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
    <operator>&lt;</operator><name>display</name><operator>-</operator><name>name</name><operator>&gt;</operator><name>Superset</name> <name>User</name><operator>&lt;</operator><operator>/</operator><name>display</name><operator>-</operator><name>name</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>value</name><operator>&gt;</operator><name><name>superset</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>value</name></argument>&gt;</argument_list></name>
    <operator>&lt;</operator><name>property</name><operator>-</operator><name>type</name><operator>&gt;</operator><name>USER</name><operator>&lt;</operator><operator>/</operator><name>property</name><operator>-</operator><name>type</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>description</name><operator>&gt;</operator><operator>&lt;</operator><operator>/</operator><name>description</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>value</name><operator>-</operator><name>attributes</name><operator>&gt;</operator>
      <operator>&lt;</operator><name>type</name><operator>&gt;</operator><name><name>user</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>type</name></argument>&gt;</argument_list></name>
      <operator>&lt;</operator><name>overridable</name><operator>&gt;</operator><literal type="boolean">false</literal><operator>&lt;</operator><operator>/</operator><name>overridable</name><operator>&gt;</operator>
    <operator>&lt;</operator><operator>/</operator><name>value</name><operator>-</operator><name>attributes</name><operator>&gt;</operator>
    <operator>&lt;</operator><name>on</name><operator>-</operator><name>ambari</name><operator>-</operator><name>upgrade</name> <name>add</name><operator>=</operator><literal type="string">"false"</literal><operator>/</operator><operator>&gt;</operator>
  <operator>&lt;</operator><operator>/</operator><name>property</name><operator>&gt;</operator>
   <operator>&lt;</operator><name>property</name><operator>&gt;</operator>
     <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>content</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
     <operator>&lt;</operator><name>display</name><operator>-</operator><name>name</name><operator>&gt;</operator><name>superset</name><operator>-</operator><name>env</name> <name>template</name><operator>&lt;</operator><operator>/</operator><name>display</name><operator>-</operator><name>name</name><operator>&gt;</operator>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
<name>index</name> <literal type="number">404545c271</literal><operator>..</operator><name>f9f1a35797</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">168</literal></expr><operator>,</operator><expr><literal type="number">21</literal> <operator>+</operator><literal type="number">168</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
             <operator>&lt;</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator><name>druid</name><operator>-</operator><name>router</name><operator>&lt;</operator><operator>/</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator>
           <operator>&lt;</operator><operator>/</operator><name>configuration</name><operator>-</operator><name>dependencies</name><operator>&gt;</operator>
         <operator>&lt;</operator><operator>/</operator><name>component</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>component</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>DRUID_SUPERSET</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>displayName</name><operator>&gt;</operator><name>Druid</name> <name><name>Superset</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>displayName</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>category</name><operator>&gt;</operator><name><name>MASTER</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>category</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>cardinality</name><operator>&gt;</operator><literal type="number">1</literal><operator>+</operator><operator>&lt;</operator><operator>/</operator><name>cardinality</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>versionAdvertised</name><operator>&gt;</operator><literal type="boolean">true</literal><operator>&lt;</operator><operator>/</operator><name>versionAdvertised</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>commandScript</name><operator>&gt;</operator>
            <operator>&lt;</operator><name>script</name><operator>&gt;</operator><name>scripts</name><operator>/</operator><name><name>superset</name><operator>.</operator><name><name>py</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>script</name></argument>&gt;</argument_list></name></name>
            <operator>&lt;</operator><name>scriptType</name><operator>&gt;</operator><name><name>PYTHON</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>scriptType</name></argument>&gt;</argument_list></name>
            <operator>&lt;</operator><name>timeout</name><operator>&gt;</operator><literal type="number">600</literal><operator>&lt;</operator><operator>/</operator><name>timeout</name><operator>&gt;</operator>
          <operator>&lt;</operator><operator>/</operator><name>commandScript</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>configuration</name><operator>-</operator><name>dependencies</name><operator>&gt;</operator>
            <operator>&lt;</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator><name>druid</name><operator>-</operator><name>superset</name><operator>&lt;</operator><operator>/</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator>
          <operator>&lt;</operator><operator>/</operator><name>configuration</name><operator>-</operator><name>dependencies</name><operator>&gt;</operator>
        <operator>&lt;</operator><operator>/</operator><name>component</name><operator>&gt;</operator>
       <operator>&lt;</operator><operator>/</operator><name>components</name><operator>&gt;</operator>
 
       <operator>&lt;</operator><name>themes</name><operator>&gt;</operator>
@@ <operator>-</operator><literal type="number">199</literal></expr><operator>,</operator><expr><literal type="number">9</literal> <operator>+</operator><literal type="number">184</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
             <operator>&lt;</operator></expr></expr_stmt><package>package&gt;
               <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>druid_$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
             <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
            <name><argument_list type="generic">&lt;</argument_list></name>package&gt;
              <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>superset_$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
            <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
           <argument_list type="generic">&lt;<argument><operator>/</operator><name>packages</name></argument>&gt;</argument_list>
         <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecific</name></argument>&gt;</argument_list>
         <argument_list type="generic">&lt;<argument><name>osSpecific</name></argument>&gt;</argument_list>
@@ -210<operator>,</operator>9 +192<operator>,</operator>6 @@
             <name><argument_list type="generic">&lt;</argument_list></name>package&gt;
               <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>druid</name>-<name>$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
             <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
            <name><argument_list type="generic">&lt;</argument_list></name>package&gt;
              <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>superset</name>-<name>$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
            <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
           <argument_list type="generic">&lt;<argument><operator>/</operator><name>packages</name></argument>&gt;</argument_list>
         <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecific</name></argument>&gt;</argument_list>
       <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecifics</name></argument>&gt;</argument_list>
<name>diff</name> --<name>git</name> <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
<name>index</name> 7e90475a15..<name>fd1cde6134</name> 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
@@ -192<operator>,</operator>51 +192<operator>,</operator>6 @@ if <name>has_metric_collector</name>:
         <name>metric_collector_protocol</name> = 'http'
     <name>pass</name>
 
<name>superset_home_dir</name> = <name>format</name>("{stack_root}/current/druid-superset"</package>)
<expr_stmt><expr><name>superset_bin_dir</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"{superset_home_dir}/bin"</literal></expr></argument>)</argument_list></call>
<name>superset_log_dir</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/configurations/druid-superset-env/superset_log_dir"</literal><operator>,</operator> <literal type="char">'/var/log/superset'</literal><operator>)</operator>
<name>superset_pid_dir</name> <operator>=</operator> <name><name>status_params</name><operator>.</operator><name>superset_pid_dir</name></name>
<name>superset_config_dir</name> <operator>=</operator> <literal type="char">'/etc/superset/conf'</literal>
<name>superset_admin_user</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_user'</literal></expr>]</index></name>
<name>superset_admin_password</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_password'</literal></expr>]</index></name>
<name>superset_admin_firstname</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_firstname'</literal></expr>]</index></name>
<name>superset_admin_lastname</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_lastname'</literal></expr>]</index></name>
<name>superset_admin_email</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_email'</literal></expr>]</index></name>
<name>superset_env_sh_template</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'content'</literal></expr>]</index></name>
<name>superset_protocol</name> <operator>=</operator> <literal type="string">"http"</literal>
<name>superset_webserver_address</name><operator>=</operator><name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WEBSERVER_ADDRESS'</literal></expr>]</index></name>
<name>superset_webserver_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WEBSERVER_PORT'</literal></expr>]</index></name>
<name>superset_timeout</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_TIMEOUT'</literal></expr>]</index></name>
<name>superset_workers</name> <operator>=</operator>  <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WORKERS'</literal></expr>]</index></name>
<name>superset_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="char">'/clusterHostInfo/superset_hosts'</literal><operator>,</operator> <name>None</name><operator>)</operator>

# <name>superset</name> <name>database</name> <name>configs</name>
<name>superset_db_type</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_TYPE'</literal></expr>]</index></name>
<name>superset_db_name</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_NAME'</literal></expr>]</index></name>
<name>superset_db_password</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_PASSWORD'</literal></expr>]</index></name>
<name>superset_db_user</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_USER'</literal></expr>]</index></name>
<name>superset_db_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_PORT'</literal></expr>]</index></name>
<name>superset_db_host</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_HOSTNAME'</literal></expr>]</index></name>

<name>superset_db_uri</name> <operator>=</operator> <name>None</name></expr></expr_stmt>
<if_stmt><if>if superset_db_type == "sqlite":
  superset_db_uri = format<condition>(<expr><literal type="string">"sqlite:///{superset_config_dir}/{superset_db_name}.db"</literal></expr>)</condition><block type="pseudo"><block_content>
<expr_stmt><expr><name>elif</name> <name>superset_db_type</name> <operator>==</operator> <literal type="string">"postgresql"</literal><operator>:</operator>
  <name>superset_db_uri</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"postgresql+pygresql://{superset_db_user}:{superset_db_password}@{superset_db_host}:{superset_db_port}/{superset_db_name}"</literal></expr></argument>)</argument_list></call>
<name>elif</name> <name>superset_db_type</name> <operator>==</operator> <literal type="string">"mysql"</literal><operator>:</operator>
  <name>superset_db_uri</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"mysql+pymysql://{superset_db_user}:{superset_db_password}@{superset_db_host}:{superset_db_port}/{superset_db_name}"</literal></expr></argument>)</argument_list></call>

<name>druid_coordinator_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/clusterHostInfo/druid_coordinator_hosts"</literal><operator>,</operator> <index>[]</index><operator>)</operator>
<name>druid_coordinator_host</name> <operator>=</operator> <literal type="string">""</literal></expr></expr_stmt></block_content></block></if></if_stmt>
<if_stmt><if>if not len<condition>(<expr><name>druid_coordinator_hosts</name></expr>)</condition><block type="pseudo"><block_content> <expr_stmt><expr><operator>==</operator> <literal type="number">0</literal><operator>:</operator>
  <name>druid_coordinator_host</name> <operator>=</operator> <name><name>druid_coordinator_hosts</name><index>[<expr><literal type="number">0</literal></expr>]</index></name>
<name>druid_router_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/clusterHostInfo/druid_router_hosts"</literal><operator>,</operator> <index>[]</index><operator>)</operator>
<name>druid_router_host</name> <operator>=</operator> <literal type="string">""</literal></expr></expr_stmt></block_content></block></if></if_stmt>
<if_stmt><if>if not len<condition>(<expr><name>druid_router_hosts</name></expr>)</condition><block type="pseudo"><block_content> <expr_stmt><expr><operator>==</operator> <literal type="number">0</literal><operator>:</operator>
  <name>druid_router_host</name> <operator>=</operator> <name><name>druid_router_hosts</name><index>[<expr><literal type="number">0</literal></expr>]</index></name>
<name>druid_coordinator_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-coordinator'</literal></expr>]</index><index>[<expr><literal type="char">'druid.port'</literal></expr>]</index></name>
<name>druid_router_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-router'</literal></expr>]</index><index>[<expr><literal type="char">'druid.port'</literal></expr>]</index></name>

 # <name>Create</name> <name>current</name> <name>Hadoop</name> <name>Clients</name>  <name>Libs</name>
 <name>stack_version_unformatted</name> <operator>=</operator> <call><name>str</name><argument_list>(<argument><expr><name><name>config</name><index>[<expr><literal type="char">'hostLevelParams'</literal></expr>]</index><index>[<expr><literal type="char">'stack_version'</literal></expr>]</index></name></expr></argument>)</argument_list></call>
 <name>io_compression_codecs</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/configurations/core-site/io.compression.codecs"</literal><operator>,</operator> <name>None</name><operator>)</operator>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator></expr></expr_stmt></block_content></block></if></if_stmt><package>package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
<name>index</name> <name>d48ff83b35</name>..<name>ee1d61cc6c</name> 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
@@ -22<operator>,</operator>5 +22<operator>,</operator>3 @@ <name>from</name> <name><name>resource_management</name><operator>.</operator><name>libraries</name><operator>.</operator><name>script</name><operator>.</operator><name>script</name></name> <name>import</name> <name>Script</name>
 <name>config</name> = <name><name>Script</name><operator>.</operator><name>get_config</name></name>(</package>)
 
 <expr_stmt><expr><name>druid_pid_dir</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-env'</literal></expr>]</index><index>[<expr><literal type="char">'druid_pid_dir'</literal></expr>]</index></name>
<name>superset_pid_dir</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_pid_dir'</literal></expr>]</index></name>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator></expr></expr_stmt><package>package/<name>scripts</name>/<name><name>superset</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>superset</name><operator>.</operator><name>py</name></name>
<name>index</name> <name>a5dd4fb8da</name>..<name>adbe7393ad</name> 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>superset</name><operator>.</operator><name>py</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>scripts</name>/<name><name>superset</name><operator>.</operator><name>py</name></name>
@@ -35<operator>,</operator>6 +35<operator>,</operator>9 @@ <name>from</name> <name><name>resource_management</name><operator>.</operator><name>libraries</name><operator>.</operator><name>resources</name><operator>.</operator><name>properties_file</name></name> <name>import</name> <name>PropertiesFi</name>
 
 class <name>Superset</name>(<name>Script</name></package>):
 
  <macro><name>def</name></macro> <expr_stmt><expr><call><name>get_component_name</name><argument_list>(<argument><expr><name>self</name></expr></argument>)</argument_list></call><operator>:</operator></expr></expr_stmt>
    <return>return <expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"superset"</literal></expr></argument>)</argument_list></call>

   <name>def</name> <call><name>install</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>env</name></expr></argument>)</argument_list></call><operator>:</operator>
     <call><name><name>self</name><operator>.</operator><name>install_packages</name></name><argument_list>(<argument><expr><name>env</name></expr></argument>)</argument_list></call>
 
@@ <operator>-</operator><literal type="number">44</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">47</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
       <index>[<expr><name><name>params</name><operator>.</operator><name>superset_pid_dir</name></name></expr><operator>,</operator> <name><name>params</name><operator>.</operator><name>superset_log_dir</name></name><operator>,</operator> <name><name>params</name><operator>.</operator><name>superset_config_dir</name></name><operator>,</operator> <name><name>params</name><operator>.</operator><name>superset_home_dir</name></name>]</index></expr><operator>,</operator>
       <expr><name>mode</name><operator>=</operator><literal type="number">0755</literal></expr><operator>,</operator>
       <expr><name>cd_access</name><operator>=</operator><literal type="char">'a'</literal></expr><operator>,</operator>
      <expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr><operator>,</operator>
      <expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr><operator>,</operator>
       <expr><name>group</name><operator>=</operator><name><name>params</name><operator>.</operator><name>user_group</name></name></expr><operator>,</operator>
       <expr><name>create_parents</name><operator>=</operator><name>True</name></expr><operator>,</operator>
       <expr><name>recursive_ownership</name><operator>=</operator><name>True</name>
@@ <operator>-</operator><literal type="number">52</literal></expr><operator>,</operator><expr><literal type="number">18</literal> <operator>+</operator><literal type="number">55</literal></expr><operator>,</operator><expr><literal type="number">18</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
 
     <call><name>File</name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"{params.superset_config_dir}/superset-env.sh"</literal></expr></argument>)</argument_list></call></expr></argument>,
          <argument><expr><name>mode</name><operator>=</operator><literal type="number">0755</literal></expr></argument>,
         <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>,
         <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>,
          <argument><expr><name>group</name><operator>=</operator><name><name>params</name><operator>.</operator><name>user_group</name></name></expr></argument>,
          <argument><expr><name>content</name><operator>=</operator><call><name>InlineTemplate</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>superset_env_sh_template</name></name></expr></argument>)</argument_list></call></expr></argument>
          )</argument_list></call>
 
     <call><name>File</name><argument_list>(<argument><expr><call><name><name>os</name><operator>.</operator><name>path</name><operator>.</operator><name>join</name></name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>superset_bin_dir</name></name></expr></argument>, <argument><expr><literal type="char">'superset.sh'</literal></expr></argument>)</argument_list></call></expr></argument>,
         <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>,
         <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>,
          <argument><expr><name>group</name><operator>=</operator><name><name>params</name><operator>.</operator><name>user_group</name></name></expr></argument>,
          <argument><expr><name>mode</name><operator>=</operator><literal type="number">0755</literal></expr></argument>,
          <argument><expr><name>content</name><operator>=</operator><call><name>Template</name><argument_list>(<argument><expr><literal type="string">"superset.sh"</literal></expr></argument>)</argument_list></call></expr></argument>
          )</argument_list></call>
    <name>superset_config</name> <operator>=</operator>  <call><name>mutable_config_dict</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>config</name><index>[<expr><literal type="string">"configurations"</literal></expr>]</index><index>[<expr><literal type="string">"druid-superset"</literal></expr>]</index></name></expr></argument>)</argument_list></call>
    <name>superset_config</name> <operator>=</operator>  <call><name>mutable_config_dict</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>config</name><index>[<expr><literal type="string">"configurations"</literal></expr>]</index><index>[<expr><literal type="string">"superset"</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr></return>
 
     <if_stmt><if>if params.superset_db_uri:
       superset_config["SQLALCHEMY_DATABASE_URI"] = params.superset_db_uri
@@ -71<operator>,</operator><expr_stmt><expr><literal type="number">24</literal> <operator>+</operator><literal type="number">74</literal></expr><operator>,</operator><expr><literal type="number">25</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
     <call><name>PropertiesFile</name><argument_list>(<argument><expr><literal type="string">"superset_config.py"</literal></expr></argument>,
                    <argument><expr><name>dir</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_config_dir</name></name></expr></argument>,
                    <argument><expr><name>properties</name><operator>=</operator><call><name>quote_string_values</name><argument_list>(<argument><expr><name>superset_config</name></expr></argument>)</argument_list></call></expr></argument>,
                   <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>,
                   <argument><expr><name>owner</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>,
                    <argument><expr><name>group</name><operator>=</operator><name><name>params</name><operator>.</operator><name>user_group</name></name></expr></argument>
                    )</argument_list></call>
 
     # <name>Initialize</name> <name>DB</name> <name>and</name> <name>create</name> <name>admin</name> <call><name><name>user</name><operator>.</operator>
     <name>Execute</name></name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/superset db upgrade"</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list></call>
            <name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></expr_stmt></if></if_stmt>)
     <expr_stmt><expr><call><name>Execute</name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/fabmanager create-admin --app superset --username '{params.superset_admin_user}' --password '{params.superset_admin_password!p}' --firstname '{params.superset_admin_firstname}' --lastname '{params.superset_admin_lastname}' --email '{params.superset_admin_email}'"</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list></call>
            <name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></expr_stmt>)
     <expr_stmt><expr><call><name>Execute</name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/superset init"</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list></call>
            <name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></expr_stmt>)
 
     # <decl_stmt><decl><type><name>Configure</name> <name>Druid</name> <name>Cluster</name> <name>in</name> <name>superset</name> <name>DB</name></type>
    <name>Execute</name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/superset configure_druid_cluster --name druid-ambari --coordinator-host {params.druid_coordinator_host} --coordinator-port {params.druid_coordinator_port} --broker-host {params.druid_router_host} --broker-port {params.druid_router_port} --coordinator-endpoint druid/coordinator/v1/metadata --broker-endpoint druid/v2"</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list>
    if <name>len</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>druid_coordinator_hosts</name></name></expr></argument>)</argument_list> &gt; 0 <range>:
      <expr><call><name>Execute</name><argument_list>(<argument><expr><call><name>format</name><argument_list>(<argument><expr><literal type="string">"source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/superset configure_druid_cluster --name druid-ambari --coordinator-host {params.druid_coordinator_host} --coordinator-port {params.druid_coordinator_port} --broker-host {params.druid_router_host} --broker-port {params.druid_router_port} --coordinator-endpoint druid/coordinator/v1/metadata --broker-endpoint druid/v2"</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>)</argument_list></call>
 
   <name>def</name> <call><name>pre_upgrade_restart</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>env</name></expr></argument>, <argument><expr><name>upgrade_type</name><operator>=</operator><name>None</name></expr></argument>)</argument_list></call><operator>:</operator>
    <call><name><name>Logger</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"Executing druid-superset Upgrade pre-restart"</literal></expr></argument>)</argument_list></call>
    <call><name><name>Logger</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"Executing superset Upgrade pre-restart"</literal></expr></argument>)</argument_list></call></expr></range></decl></decl_stmt>
     <import>import <name>params</name>
 
     <name><name>env</name><operator>.</operator><name>set_params</name></name>(<name>params</name></import>)
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">103</literal></expr><operator>,</operator><expr><literal type="number">10</literal> <operator>+</operator><literal type="number">107</literal></expr><operator>,</operator><expr><literal type="number">10</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
     <name>daemon_cmd</name> <operator>=</operator> <call><name><name>self</name><operator>.</operator><name>get_daemon_cmd</name></name><argument_list>(<argument><expr><name>params</name></expr></argument>, <argument><expr><literal type="string">"start"</literal></expr></argument>)</argument_list></call></expr></expr_stmt>
     <try>try:
       <expr_stmt><expr><call><name>Execute</name><argument_list>(<argument><expr><name>daemon_cmd</name></expr></argument>,
              <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name>
              <name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>
               )</argument_list></call>
     <name>except</name><operator>:</operator>
      <call><name>show_logs</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>druid_log_dir</name></name></expr></argument>, <argument><expr><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list></call>
      <call><name>show_logs</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>superset_log_dir</name></name></expr></argument>, <argument><expr><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>)</argument_list></call>
       <name>raise</name>
 
   <name>def</name> <call><name>stop</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>env</name></expr></argument>, <argument><expr><name>upgrade_type</name><operator>=</operator><name>None</name></expr></argument>)</argument_list></call><operator>:</operator>
@@ <operator>-</operator><literal type="number">116</literal></expr><operator>,</operator><expr><literal type="number">10</literal> <operator>+</operator><literal type="number">120</literal></expr><operator>,</operator><expr><literal type="number">10</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
     <name>daemon_cmd</name> <operator>=</operator> <call><name><name>self</name><operator>.</operator><name>get_daemon_cmd</name></name><argument_list>(<argument><expr><name>params</name></expr></argument>, <argument><expr><literal type="string">"stop"</literal></expr></argument>)</argument_list></call></expr></expr_stmt></try>
     <try>try:
       <expr_stmt><expr><call><name>Execute</name><argument_list>(<argument><expr><name>daemon_cmd</name></expr></argument>,
              <argument><expr><name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>druid_user</name></name>
              <name>user</name><operator>=</operator><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>
               )</argument_list></call>
     <name>except</name><operator>:</operator>
      <call><name>show_logs</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>druid_log_dir</name></name></expr></argument>, <argument><expr><name><name>params</name><operator>.</operator><name>druid_user</name></name></expr></argument>)</argument_list></call>
      <call><name>show_logs</name><argument_list>(<argument><expr><name><name>params</name><operator>.</operator><name>superset_log_dir</name></name></expr></argument>, <argument><expr><name><name>params</name><operator>.</operator><name>superset_user</name></name></expr></argument>)</argument_list></call>
       <name>raise</name>
 
   <name>def</name> <call><name>status</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>env</name></expr></argument>)</argument_list></call><operator>:</operator>
@@ <operator>-</operator><literal type="number">130</literal></expr><operator>,</operator><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">134</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <name>class</name> <call><name>Superset</name><argument_list>(<argument><expr><name>Script</name></expr></argument>)</argument_list></call><operator>:</operator>
 
   <name>def</name> <call><name>get_log_folder</name><argument_list>(<argument><expr><name>self</name></expr></argument>)</argument_list></call><operator>:</operator></expr></expr_stmt></try>
     <import>import <name>params</name>
    return <name><name>params</name><operator>.</operator><name>druid_log_dir</name></name>
    return <name><name>params</name><operator>.</operator><name>superset_log_dir</name></name>
 
   <name>def</name> <name>get_user</name>(<name>self</name></import>):
     <import>import <name>params</name>
    return <name><name>params</name><operator>.</operator><name>druid_user</name></name>
    return <name><name>params</name><operator>.</operator><name>superset_user</name></name>
 
   <name>def</name> <name>get_daemon_cmd</name>(<name>self</name><operator>,</operator> <name>params</name>=<name>None</name><operator>,</operator> <name>command</name>=<name>None</name></import>):
     <return>return <expr><call><name>format</name><argument_list>(<argument><expr><literal type="char">'source {params.superset_config_dir}/superset-env.sh ; {params.superset_bin_dir}/superset.sh {command}'</literal></expr></argument>)</argument_list></call>
@@ <operator>-</operator><literal type="number">160</literal></expr><operator>,</operator><expr><literal type="number">4</literal> <operator>+</operator><literal type="number">164</literal></expr><operator>,</operator><expr><literal type="number">4</literal> @@ <name>def</name> <call><name>quote_string_value</name><argument_list>(<argument><expr><name>value</name></expr></argument>)</argument_list></call><operator>:</operator></expr></return>
 
 
 <if_stmt><if>if __name__ == "__main__":
  Superset<condition>()</condition><block type="pseudo"><block_content><expr_stmt><expr><operator>.</operator><call><name>execute</name><argument_list>()</argument_list></call>
<operator>\</operator> <name>No</name> <name>newline</name> <name>at</name> <name>end</name> <name>of</name> <name>file</name>
  <call><name>Superset</name><argument_list>()</argument_list></call><operator>.</operator><call><name>execute</name><argument_list>()</argument_list></call>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator></expr></expr_stmt></block_content></block></if></if_stmt><package>package/<name>templates</name>/<name><name>superset</name><operator>.</operator><name>sh</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>templates</name>/<name><name>superset</name><operator>.</operator><name>sh</name></name>
<name>index</name> 3e327a6c21..<name>ffef1fe6b0</name> 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>templates</name>/<name><name>superset</name><operator>.</operator><name>sh</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/package/<name>templates</name>/<name><name>superset</name><operator>.</operator><name>sh</name></name>
@@ -20<operator>,</operator>7 +20<operator>,</operator>7 @@
 
 ## <name>Runs</name> <name>superset</name> <name>as</name> <name>a</name> <name>daemon</name>
 ## <name>Environment</name> <name>Variables</name> <name>used</name> <name>by</name> <name>this</name> <name>script</name> -
## <name>SUPERSET_CONFIG_DIR</name> - <name>directory</name> <name>having</name> <name>druid</name> <name>config</name> <name>files</name>
## <name>SUPERSET_CONFIG_DIR</name> - <name>directory</name> <name>having</name> <name>superset</name> <name>config</name> <name>files</name>
 ## <name>SUPERSET_LOG_DIR</name> - <name>directory</name> <name>used</name> <name>to</name> <name>store</name> <name>superset</name> <name>logs</name>
 ## <name>SUPERSET_PID_DIR</name> - <name>directory</name> <name>used</name> <name>to</name> <name>store</name> <name>pid</name> <name>file</name>
 
<name>diff</name> --<name>git</name> <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>
<name>index</name> 16f5d5c990..<name>c68b9b90d1</name> 100644
-- <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>DRUID</name>/0.9.2/<name>quicklinks</name>/<name><name>quicklinks</name><operator>.</operator><name>json</name></name>
@@ -31<operator>,</operator>19 +31<operator>,</operator>6 @@
           "regex": "^(\\d+)$"<operator>,</operator>
           "site": "druid-overlord"</package>
         }
      }<operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"superset"</literal></expr><operator>,</operator>
        <expr><literal type="string">"label"</literal><operator>:</operator> <literal type="string">"Superset"</literal></expr><operator>,</operator>
        <expr><literal type="string">"component_name"</literal><operator>:</operator> <literal type="string">"DRUID_SUPERSET"</literal></expr><operator>,</operator>
        <expr><literal type="string">"requires_user_name"</literal><operator>:</operator> <literal type="string">"false"</literal></expr><operator>,</operator>
        <expr><literal type="string">"url"</literal><operator>:</operator> <literal type="string">"%@://%@:%@"</literal></expr><operator>,</operator>
        <expr><literal type="string">"port"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"http_property"</literal><operator>:</operator> <literal type="string">"SUPERSET_WEBSERVER_PORT"</literal></expr>,
          <expr><literal type="string">"http_default_port"</literal><operator>:</operator> <literal type="string">"9088"</literal></expr>,
          <expr><literal type="string">"regex"</literal><operator>:</operator> <literal type="string">"^(\\d+)$"</literal></expr>,
          <expr><literal type="string">"site"</literal><operator>:</operator> <literal type="string">"druid-superset"</literal></expr>
        }</block></expr></expr_stmt>
       </block_content>}</block>
     ]
   }
diff <expr_stmt><expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name>
<name>index</name> <literal type="number">8f65c2e3d6</literal><operator>..</operator><literal type="number">4d697fe8f6</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">7</literal></expr><operator>,</operator><expr><literal type="number">12</literal> <operator>+</operator><literal type="number">7</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@
     <literal type="string">"DRUID_BROKER-START"</literal> <operator>:</operator> <index>[<expr><literal type="string">"ZOOKEEPER_SERVER-START"</literal></expr><operator>,</operator> <literal type="string">"NAMENODE-START"</literal><operator>,</operator> <literal type="string">"DATANODE-START"</literal><operator>,</operator> <literal type="string">"RESOURCEMANAGER-START"</literal><operator>,</operator> <literal type="string">"NODEMANAGER-START"</literal>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_ROUTER-START"</literal> <operator>:</operator> <index>[<expr><literal type="string">"ZOOKEEPER_SERVER-START"</literal></expr><operator>,</operator> <literal type="string">"NAMENODE-START"</literal><operator>,</operator> <literal type="string">"DATANODE-START"</literal><operator>,</operator> <literal type="string">"RESOURCEMANAGER-START"</literal><operator>,</operator> <literal type="string">"NODEMANAGER-START"</literal>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_COORDINATOR-START"</literal> <operator>:</operator> <index>[<expr><literal type="string">"ZOOKEEPER_SERVER-START"</literal></expr><operator>,</operator> <literal type="string">"NAMENODE-START"</literal><operator>,</operator> <literal type="string">"DATANODE-START"</literal><operator>,</operator> <literal type="string">"RESOURCEMANAGER-START"</literal><operator>,</operator> <literal type="string">"NODEMANAGER-START"</literal>]</index></expr><operator>,</operator>
    <expr><literal type="string">"DRUID_SUPERSET-START"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_COORDINATOR-START"</literal></expr><operator>,</operator> <literal type="string">"DRUID_BROKER-START"</literal>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_OVERLORD-RESTART"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_HISTORICAL-RESTART"</literal></expr>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_MIDDLEMANAGER-RESTART"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_OVERLORD-RESTART"</literal></expr>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_BROKER-RESTART"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_MIDDLEMANAGER-RESTART"</literal></expr>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_ROUTER-RESTART"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_BROKER-RESTART"</literal></expr>]</index></expr><operator>,</operator>
     <expr><literal type="string">"DRUID_COORDINATOR-RESTART"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_ROUTER-RESTART"</literal></expr>]</index></expr><operator>,</operator>
    <expr><literal type="string">"DRUID_SERVICE_CHECK-SERVICE_CHECK"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_HISTORICAL-START"</literal></expr><operator>,</operator> <literal type="string">"DRUID_COORDINATOR-START"</literal><operator>,</operator> <literal type="string">"DRUID_OVERLORD-START"</literal><operator>,</operator> <literal type="string">"DRUID_MIDDLEMANAGER-START"</literal><operator>,</operator> <literal type="string">"DRUID_BROKER-START"</literal><operator>,</operator> <literal type="string">"DRUID_ROUTER-START"</literal><operator>,</operator> <literal type="string">"DRUID_SUPERSET-START"</literal>]</index>
    <literal type="string">"DRUID_SERVICE_CHECK-SERVICE_CHECK"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_HISTORICAL-START"</literal></expr><operator>,</operator> <literal type="string">"DRUID_COORDINATOR-START"</literal><operator>,</operator> <literal type="string">"DRUID_OVERLORD-START"</literal><operator>,</operator> <literal type="string">"DRUID_MIDDLEMANAGER-START"</literal><operator>,</operator> <literal type="string">"DRUID_BROKER-START"</literal><operator>,</operator> <literal type="string">"DRUID_ROUTER-START"</literal>]</index></expr></expr_stmt>
   }
 }
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name>
<name>index</name> <literal type="number">151478baa5</literal><operator>..</operator><literal type="number">7033e19f19</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><literal type="number">0.9.2</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">10</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">10</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@
             <literal type="string">"name"</literal><operator>:</operator> <literal type="string">"metadata_storage"</literal></expr><operator>,</operator>
             <expr><literal type="string">"display-name"</literal><operator>:</operator> <literal type="string">"META DATA STORAGE CONFIG"</literal></expr><operator>,</operator>
             <expr><literal type="string">"layout"</literal><operator>:</operator> <block>{
              <expr><literal type="string">"tab-columns"</literal><operator>:</operator> <literal type="string">"2"</literal></expr>,
              <expr><literal type="string">"tab-columns"</literal><operator>:</operator> <literal type="string">""</literal></expr>,
               <expr><literal type="string">"tab-rows"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
               <expr><literal type="string">"sections"</literal><operator>:</operator> <index>[
                 <expr><block>{</block></expr></index>
@@ <operator>-</operator><literal type="number">19</literal></expr>,<expr><literal type="number">7</literal> <operator>+</operator><literal type="number">19</literal></expr>,<expr><literal type="number">7</literal> @@
                   <literal type="string">"row-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                   <expr><literal type="string">"column-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                   <expr><literal type="string">"row-span"</literal><operator>:</operator> <literal type="string">"2"</literal></expr>,
                  <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"2"</literal></expr>,
                  <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                   <expr><literal type="string">"section-columns"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                   <expr><literal type="string">"section-rows"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                   <expr><literal type="string">"subsections"</literal><operator>:</operator> <index>[</index>
@@ <operator>-</operator><literal type="number">30</literal></expr>,<expr><literal type="number">14</literal> <operator>+</operator><literal type="number">30</literal></expr>,<expr><literal type="number">6</literal> @@
                       <literal type="string">"column-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                       <expr><literal type="string">"row-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                       <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>
                    }</block></expr><operator>,</operator>
                    <expr><block>{
                      <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>,
                      <expr><literal type="string">"display-name"</literal><operator>:</operator> <literal type="string">"SUPERSET META DATA STORAGE"</literal></expr>,
                      <expr><literal type="string">"row-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                      <expr><literal type="string">"column-index"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                      <expr><literal type="string">"row-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                      <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>
                     }</block>
                   ]</expr></expr_stmt>
                 }
@<annotation>@</annotation> -<expr_stmt><expr><literal type="number">77</literal></expr><operator>,</operator><expr><literal type="number">34</literal> <operator>+</operator><literal type="number">69</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
         <block>{
           <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-common/druid.metadata.storage.connector.connectURI"</literal></expr>,
           <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_NAME"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_TYPE"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_USER"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_PASSWORD"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_HOSTNAME"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_PORT"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
        }</block></expr><operator>,</operator>
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SECRET_KEY"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col2"</literal></expr>
         }</block>
       ]</expr></expr_stmt>
     },
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">150</literal></expr><operator>,</operator><expr><literal type="number">48</literal> <operator>+</operator><literal type="number">114</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
         <literal type="string">"widget"</literal><operator>:</operator> <block>{
           <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
         }</block></expr></expr_stmt>
      },
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_NAME"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_TYPE"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"combo"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_USER"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_PASSWORD"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"password"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_HOSTNAME"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SUPERSET_DATABASE_PORT"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr></expr_stmt>
      </block_content>}</block><operator>,</operator>
      <block>{<block_content>
        <expr_stmt><expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"druid-superset/SECRET_KEY"</literal></expr><operator>,</operator>
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"password"</literal></expr>
        }</block></expr></expr_stmt>
       </block_content>}</block>
     ]
   }
diff <expr_stmt><expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..5c6ed117fd</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">88</literal> @@
<operator>&lt;</operator><operator>?</operator><name>xml</name> <name>version</name><operator>=</operator><literal type="string">"1.0"</literal><operator>?</operator><operator>&gt;</operator>
<operator>&lt;</operator><operator>!</operator><operator>--</operator>
   <name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <call><name>Foundation</name> <argument_list>(<argument><expr><name>ASF</name></expr></argument>)</argument_list></call> <name>under</name> <name>one</name> <name>or</name> <name>more</name>
   <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name> <name>distributed</name> <name>with</name>
   <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal>
   <operator>(</operator><name>the</name> <literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name> <name>with</name>
   <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

       <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

   <name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
   <name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
   <expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
   <name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
   limitations under the License.
--&gt;
&lt;metainfo&gt;
  &lt;schemaVersion&gt;2.0&lt;/schemaVersion&gt;
  &lt;services&gt;
    &lt;service&gt;
      &lt;name&gt;SUPERSET&lt;/name&gt;
      &lt;displayName&gt;Superset&lt;/displayName&gt;
      &lt;comment&gt;Superset is a data exploration platform designed to be visual<operator>,</operator> <expr_stmt><expr><name>intuitive</name> <name>and</name> <name><name>interactive</name><operator>.</operator></name>&lt;<operator>/</operator><name>comment</name><operator>&gt;</operator>
      <operator>&lt;</operator><name>version</name><operator>&gt;</operator><literal type="number">0.15.0</literal><operator>&lt;</operator><operator>/</operator><name>version</name><operator>&gt;</operator>
      <operator>&lt;</operator><name>components</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>component</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>name</name><operator>&gt;</operator><name><name>SUPERSET</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>name</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>displayName</name><operator>&gt;</operator><name><name>Superset</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>displayName</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>category</name><operator>&gt;</operator><name><name>MASTER</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>category</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>cardinality</name><operator>&gt;</operator><literal type="number">1</literal><operator>+</operator><operator>&lt;</operator><operator>/</operator><name>cardinality</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>versionAdvertised</name><operator>&gt;</operator><literal type="boolean">true</literal><operator>&lt;</operator><operator>/</operator><name>versionAdvertised</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>commandScript</name><operator>&gt;</operator>
            <operator>&lt;</operator><name>script</name><operator>&gt;</operator><name>scripts</name><operator>/</operator><name><name>superset</name><operator>.</operator><name><name>py</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>script</name></argument>&gt;</argument_list></name></name>
            <operator>&lt;</operator><name>scriptType</name><operator>&gt;</operator><name><name>PYTHON</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>scriptType</name></argument>&gt;</argument_list></name>
            <operator>&lt;</operator><name>timeout</name><operator>&gt;</operator><literal type="number">600</literal><operator>&lt;</operator><operator>/</operator><name>timeout</name><operator>&gt;</operator>
          <operator>&lt;</operator><operator>/</operator><name>commandScript</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>configuration</name><operator>-</operator><name>dependencies</name><operator>&gt;</operator>
            <operator>&lt;</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator><name>superset</name><operator>&lt;</operator><operator>/</operator><name>config</name><operator>-</operator><name>type</name><operator>&gt;</operator>
          <operator>&lt;</operator><operator>/</operator><name>configuration</name><operator>-</operator><name>dependencies</name><operator>&gt;</operator>
        <operator>&lt;</operator><operator>/</operator><name>component</name><operator>&gt;</operator>
      <operator>&lt;</operator><operator>/</operator><name>components</name><operator>&gt;</operator>

      <operator>&lt;</operator><name>themes</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>theme</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>fileName</name><operator>&gt;</operator><name><name>theme</name><operator>.</operator><name><name>json</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>fileName</name></argument>&gt;</argument_list></name></name>
          <operator>&lt;</operator>default<operator>&gt;</operator><literal type="boolean">true</literal><operator>&lt;</operator><operator>/</operator>default<operator>&gt;</operator>
        <operator>&lt;</operator><operator>/</operator><name>theme</name><operator>&gt;</operator>
      <operator>&lt;</operator><operator>/</operator><name>themes</name><operator>&gt;</operator>

      <operator>&lt;</operator><name>osSpecifics</name><operator>&gt;</operator>
        <operator>&lt;</operator><name>osSpecific</name><operator>&gt;</operator>
          <operator>&lt;</operator><name>osFamily</name><operator>&gt;</operator><name>redhat7</name></expr><operator>,</operator><expr><name>amazon2015</name></expr><operator>,</operator><expr><name>redhat6</name></expr><operator>,</operator><expr><name>suse11</name></expr><operator>,</operator><expr><name><name>suse12</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>osFamily</name></argument>&gt;</argument_list></name>
          <operator>&lt;</operator><name>packages</name><operator>&gt;</operator>
            <operator>&lt;</operator></expr></expr_stmt></for><package>package&gt;
              <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>superset_$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
            <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
          <argument_list type="generic">&lt;<argument><operator>/</operator><name>packages</name></argument>&gt;</argument_list>
        <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecific</name></argument>&gt;</argument_list>
        <argument_list type="generic">&lt;<argument><name>osSpecific</name></argument>&gt;</argument_list>
          <argument_list type="generic">&lt;<argument><name>osFamily</name></argument>&gt;</argument_list><name>debian7</name><operator>,</operator><name>ubuntu12</name><operator>,</operator><name>ubuntu14</name><operator>,</operator><name><name>ubuntu16</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>osFamily</name></argument>&gt;</argument_list></name>
          <argument_list type="generic">&lt;<argument><name>packages</name></argument>&gt;</argument_list>
            <name><argument_list type="generic">&lt;</argument_list></name>package&gt;
              <argument_list type="generic">&lt;<argument><name>name</name></argument>&gt;</argument_list><name>superset</name>-<name>$</name><block>{<block_content><expr><name>stack_version</name></expr></block_content>}</block></package><expr_stmt><expr><operator>&lt;</operator><operator>/</operator><name>name</name><operator>&gt;</operator>
            <operator>&lt;</operator><operator>/</operator></expr></expr_stmt><package>package&gt;
          <argument_list type="generic">&lt;<argument><operator>/</operator><name>packages</name></argument>&gt;</argument_list>
        <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecific</name></argument>&gt;</argument_list>
      <argument_list type="generic">&lt;<argument><operator>/</operator><name>osSpecifics</name></argument>&gt;</argument_list>
      <argument_list type="generic">&lt;<argument><name>commandScript</name></argument>&gt;</argument_list>
        <argument_list type="generic">&lt;<argument><name>script</name></argument>&gt;</argument_list><name>scripts</name>/<name><name>service_check</name><operator>.</operator><name><name>py</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>script</name></argument>&gt;</argument_list></name></name>
        <argument_list type="generic">&lt;<argument><name>scriptType</name></argument>&gt;</argument_list><name><name>PYTHON</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>scriptType</name></argument>&gt;</argument_list></name>
        <argument_list type="generic">&lt;<argument><name>timeout</name></argument>&gt;</argument_list>300<argument_list type="generic">&lt;<argument><operator>/</operator><name>timeout</name></argument>&gt;</argument_list>
      <argument_list type="generic">&lt;<argument><operator>/</operator><name>commandScript</name></argument>&gt;</argument_list>
      <name><argument_list type="generic">&lt;<argument><name>configuration</name></argument></argument_list></name>-<name>dependencies</name>&gt;
        <name><argument_list type="generic">&lt;<argument><name>config</name></argument></argument_list></name>-<name>type</name>&gt;<name>superset</name>-<name>env</name><name><argument_list type="generic">&lt;<argument><operator>/</operator><name>config</name></argument></argument_list></name>-<name>type</name>&gt;
        <name><argument_list type="generic">&lt;<argument><name>config</name></argument></argument_list></name>-<name>type</name>&gt;<name>superset</name><name><argument_list type="generic">&lt;<argument><operator>/</operator><name>config</name></argument></argument_list></name>-<name>type</name>&gt;
      <name><argument_list type="generic">&lt;<argument><operator>/</operator><name>configuration</name></argument></argument_list></name>-<name>dependencies</name>&gt;

      <argument_list type="generic">&lt;<argument><name>quickLinksConfigurations</name></argument>&gt;</argument_list>
        <argument_list type="generic">&lt;<argument><name>quickLinksConfiguration</name></argument>&gt;</argument_list>
          <argument_list type="generic">&lt;<argument><name>fileName</name></argument>&gt;</argument_list><name><name>quicklinks</name><operator>.</operator><name><name>json</name><argument_list type="generic">&lt;<argument><operator>/</operator><name>fileName</name></argument>&gt;</argument_list></name></name>
          <name><argument_list type="generic">&lt;</argument_list></name>default&gt;true<name><argument_list type="generic">&lt;<argument><operator>/</operator></argument></argument_list></name>default&gt;
        <argument_list type="generic">&lt;<argument><operator>/</operator><name>quickLinksConfiguration</name></argument>&gt;</argument_list>
      <argument_list type="generic">&lt;<argument><operator>/</operator><name>quickLinksConfigurations</name></argument>&gt;</argument_list>

    <argument_list type="generic">&lt;<argument><operator>/</operator><name>service</name></argument>&gt;</argument_list>
  <argument_list type="generic">&lt;<argument><operator>/</operator><name>services</name></argument>&gt;</argument_list>
<argument_list type="generic">&lt;<argument><operator>/</operator><name>metainfo</name></argument>&gt;</argument_list>
<name>diff</name> --<name>git</name> <name>a</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
new <name>file</name> <name>mode</name> 100644
<name>index</name> 0000000000..b38d6438aa
-- /<name>dev</name>/null
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>params</name><operator>.</operator><name>py</name></name>
@@ -0<operator>,</operator>0 +1<operator>,</operator>89 @@
#!/<name>usr</name>/<name>bin</name>/<name>env</name> <name>python</name>
"""
<name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <name>Foundation</name> (<name>ASF</name></package>) <expr_stmt><expr><name>under</name> <name>one</name>
<name>or</name> <name>more</name> <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name>
<name>distributed</name> <name>with</name> <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal> <operator>(</operator><name>the</name>
<literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name>
<name>with</name> <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

    <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

<name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
<name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
<expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
<name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
limitations under the License.

"""
from ambari_commons import OSCheck
from resource_management.libraries.functions import conf_select
from resource_management.libraries.functions import stack_select
from resource_management.libraries.resources.hdfs_resource import HdfsResource
from resource_management.libraries.functions import get_kinit_path
from resource_management.libraries.script.script import Script
from resource_management.libraries.functions import format
from resource_management.libraries.functions.get_not_managed_resources import get_not_managed_resources
from resource_management.libraries.functions.default import default

import status_params

# server configurations
config = Script.get_config<control>(<init><expr/></init>)</control><block type="pseudo"><block_content>
<expr_stmt><expr><name>stack_root</name> <operator>=</operator> <call><name><name>Script</name><operator>.</operator><name>get_stack_root</name></name><argument_list>()</argument_list></call>
<name>stack_name</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/hostLevelParams/stack_name"</literal><operator>,</operator> <name>None</name><operator>)</operator>
<name>user_group</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'cluster-env'</literal></expr>]</index><index>[<expr><literal type="char">'user_group'</literal></expr>]</index></name>

# <name>stack</name> <name>version</name>
<name>stack_version</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/commandParams/version"</literal><operator>,</operator> <name>None</name><operator>)</operator>

<name>hostname</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'hostname'</literal></expr>]</index></name>

# <name>status</name> <name>params</name>
<name>status_pid_dir</name> <operator>=</operator> <name><name>status_params</name><operator>.</operator><name>superset_pid_dir</name></name>

<name>superset_home_dir</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"{stack_root}/current/superset"</literal></expr></argument>)</argument_list></call>
<name>superset_bin_dir</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"{superset_home_dir}/bin"</literal></expr></argument>)</argument_list></call>
<name>superset_log_dir</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/configurations/superset-env/superset_log_dir"</literal><operator>,</operator> <literal type="char">'/var/log/superset'</literal><operator>)</operator>
<name>superset_pid_dir</name> <operator>=</operator> <name><name>status_params</name><operator>.</operator><name>superset_pid_dir</name></name>
<name>superset_config_dir</name> <operator>=</operator> <literal type="char">'/etc/superset/conf'</literal>
<name>superset_admin_user</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_user'</literal></expr>]</index></name>
<name>superset_admin_password</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_password'</literal></expr>]</index></name>
<name>superset_admin_firstname</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_firstname'</literal></expr>]</index></name>
<name>superset_admin_lastname</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_lastname'</literal></expr>]</index></name>
<name>superset_admin_email</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_admin_email'</literal></expr>]</index></name>
<name>superset_env_sh_template</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'content'</literal></expr>]</index></name>
<name>superset_user</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_user'</literal></expr>]</index></name>
<name>superset_protocol</name> <operator>=</operator> <literal type="string">"http"</literal>
<name>superset_webserver_address</name><operator>=</operator><name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WEBSERVER_ADDRESS'</literal></expr>]</index></name>
<name>superset_webserver_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WEBSERVER_PORT'</literal></expr>]</index></name>
<name>superset_timeout</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_TIMEOUT'</literal></expr>]</index></name>
<name>superset_workers</name> <operator>=</operator>  <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_WORKERS'</literal></expr>]</index></name>
<name>superset_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="char">'/clusterHostInfo/superset_hosts'</literal><operator>,</operator> <name>None</name><operator>)</operator>

# <name>superset</name> <name>database</name> <name>configs</name>
<name>superset_db_type</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_TYPE'</literal></expr>]</index></name>
<name>superset_db_name</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_NAME'</literal></expr>]</index></name>
<name>superset_db_password</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_PASSWORD'</literal></expr>]</index></name>
<name>superset_db_user</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_USER'</literal></expr>]</index></name>
<name>superset_db_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_PORT'</literal></expr>]</index></name>
<name>superset_db_host</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset'</literal></expr>]</index><index>[<expr><literal type="char">'SUPERSET_DATABASE_HOSTNAME'</literal></expr>]</index></name>

<name>superset_db_uri</name> <operator>=</operator> <name>None</name></expr></expr_stmt></block_content></block></for>
<if_stmt><if>if superset_db_type == "sqlite":
  superset_db_uri = format<condition>(<expr><literal type="string">"sqlite:///{superset_config_dir}/{superset_db_name}.db"</literal></expr>)</condition><block type="pseudo"><block_content>
<expr_stmt><expr><name>elif</name> <name>superset_db_type</name> <operator>==</operator> <literal type="string">"postgresql"</literal><operator>:</operator>
  <name>superset_db_uri</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"postgresql+pygresql://{superset_db_user}:{superset_db_password}@{superset_db_host}:{superset_db_port}/{superset_db_name}"</literal></expr></argument>)</argument_list></call>
<name>elif</name> <name>superset_db_type</name> <operator>==</operator> <literal type="string">"mysql"</literal><operator>:</operator>
  <name>superset_db_uri</name> <operator>=</operator> <call><name>format</name><argument_list>(<argument><expr><literal type="string">"mysql+pymysql://{superset_db_user}:{superset_db_password}@{superset_db_host}:{superset_db_port}/{superset_db_name}"</literal></expr></argument>)</argument_list></call>

<name>druid_coordinator_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/clusterHostInfo/druid_coordinator_hosts"</literal><operator>,</operator> <index>[]</index><operator>)</operator></expr></expr_stmt></block_content></block></if></if_stmt>

<if_stmt><if>if not len<condition>(<expr><name>druid_coordinator_hosts</name></expr>)</condition><block type="pseudo"><block_content> <expr_stmt><expr><operator>==</operator> <literal type="number">0</literal><operator>:</operator>
  <name>druid_coordinator_host</name> <operator>=</operator> <name><name>druid_coordinator_hosts</name><index>[<expr><literal type="number">0</literal></expr>]</index></name>
  <name>druid_coordinator_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-coordinator'</literal></expr>]</index><index>[<expr><literal type="char">'druid.port'</literal></expr>]</index></name>
<name>druid_router_hosts</name> <operator>=</operator> default<operator>(</operator><literal type="string">"/clusterHostInfo/druid_router_hosts"</literal><operator>,</operator> <index>[]</index><operator>)</operator></expr></expr_stmt></block_content></block></if></if_stmt>
<if_stmt><if>if not len<condition>(<expr><name>druid_router_hosts</name></expr>)</condition><block type="pseudo"><block_content> <expr_stmt><expr><operator>==</operator> <literal type="number">0</literal><operator>:</operator>
  <name>druid_router_host</name> <operator>=</operator> <name><name>druid_router_hosts</name><index>[<expr><literal type="number">0</literal></expr>]</index></name>
  <name>druid_router_port</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'druid-router'</literal></expr>]</index><index>[<expr><literal type="char">'druid.port'</literal></expr>]</index></name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator></expr></expr_stmt></block_content></block></if></if_stmt><package>package/<name>scripts</name>/<name><name>service_check</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>service_check</name><operator>.</operator><name>py</name></name>
new <name>file</name> <name>mode</name> 100644
<name>index</name> 0000000000..1204c0839a
-- /<name>dev</name>/null
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>service_check</name><operator>.</operator><name>py</name></name>
@@ -0<operator>,</operator>0 +1<operator>,</operator>37 @@
#!/<name>usr</name>/<name>bin</name>/<name>env</name> <name>python</name>
"""
<name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <name>Foundation</name> (<name>ASF</name></package>) <expr_stmt><expr><name>under</name> <name>one</name>
<name>or</name> <name>more</name> <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name>
<name>distributed</name> <name>with</name> <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal> <operator>(</operator><name>the</name>
<literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name>
<name>with</name> <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

    <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

<name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
<name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
<expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
<name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
limitations under the License.

"""
from resource_management.libraries.script.script import Script
from resource_management.libraries.functions.format import format
from resource_management.core.resources.system import Execute


class ServiceCheck<control>(<init><expr><name>Script</name></expr></init>)</control><block type="pseudo"><block_content>:
  <macro><name>def</name></macro> <expr_stmt><expr><call><name>service_check</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>env</name></expr></argument>)</argument_list></call><operator>:</operator></expr></expr_stmt></block_content></block></for>
    <import>import <name>params</name>
    <name><name>env</name><operator>.</operator><name>set_params</name></name>(<name>params</name></import>)
    <for>for superset_host in params.config['clusterHostInfo']['superset_hosts']:
      Execute<control>(<init><expr><call><name>format</name><argument_list>(
        <argument><expr><literal type="string">"curl -s -o /dev/null -w'%{{http_code}}' --negotiate -u: -k {superset_host}:{params.superset_webserver_port}/health | grep 200"</literal></expr></argument>)</argument_list></call></expr><operator>,</operator>
        <expr><name>tries</name><operator>=</operator><literal type="number">10</literal></expr><operator>,</operator>
        <expr><name>try_sleep</name><operator>=</operator><literal type="number">3</literal></expr><operator>,</operator>
        <expr><name>logoutput</name><operator>=</operator><name>True</name></expr></init>)</control><block type="pseudo"><block_content>

<if_stmt><if>if __name__ == "__main__":
  ServiceCheck<condition>()</condition><block type="pseudo"><block_content><expr_stmt><expr><operator>.</operator><call><name>execute</name><argument_list>()</argument_list></call>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator></expr></expr_stmt></block_content></block></if></if_stmt></block_content></block></for><package>package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name> <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
new <name>file</name> <name>mode</name> 100644
<name>index</name> 0000000000..c0009c3a84
-- /<name>dev</name>/null
++ <name>b</name>/<name>ambari</name>-<name>server</name>/<name>src</name>/<name>main</name>/<name>resources</name>/<name>common</name>-<name>services</name>/<name>SUPERSET</name>/0.15.0/package/<name>scripts</name>/<name><name>status_params</name><operator>.</operator><name>py</name></name>
@@ -0<operator>,</operator>0 +1<operator>,</operator>25 @@
#!/<name>usr</name>/<name>bin</name>/<name>env</name> <name>python</name>
"""
<name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <name>Foundation</name> (<name>ASF</name></package>) <expr_stmt><expr><name>under</name> <name>one</name>
<name>or</name> <name>more</name> <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name>
<name>distributed</name> <name>with</name> <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal> <operator>(</operator><name>the</name>
<literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name>
<name>with</name> <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

    <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

<name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
<name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
<expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
<name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
limitations under the License.

"""
from resource_management.libraries.script.script import Script

config = Script.get_config<control>(<init><expr/></init>)</control><block type="pseudo"><block_content>

<expr_stmt><expr><name>superset_pid_dir</name> <operator>=</operator> <name><name>config</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="char">'superset-env'</literal></expr>]</index><index>[<expr><literal type="char">'superset_pid_dir'</literal></expr>]</index></name>

<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>quicklinks</name><operator>/</operator><name><name>quicklinks</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>quicklinks</name><operator>/</operator><name><name>quicklinks</name><operator>.</operator><name>json</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..89e5c7004f</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>quicklinks</name><operator>/</operator><name><name>quicklinks</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">24</literal> @@
<block>{
  <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"default"</literal></expr>,
  <expr><literal type="string">"description"</literal><operator>:</operator> <literal type="string">"default quick links configuration"</literal></expr>,
  <expr><literal type="string">"configuration"</literal><operator>:</operator> <block>{
    <expr><literal type="string">"protocol"</literal><operator>:</operator> <block>{
      <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"HTTP_ONLY"</literal></expr>
    }</block></expr>,
    <expr><literal type="string">"links"</literal><operator>:</operator> <index>[
      <expr><block>{
        <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"superset"</literal></expr>,
        <expr><literal type="string">"label"</literal><operator>:</operator> <literal type="string">"Superset"</literal></expr>,
        <expr><literal type="string">"component_name"</literal><operator>:</operator> <literal type="string">"SUPERSET"</literal></expr>,
        <expr><literal type="string">"requires_user_name"</literal><operator>:</operator> <literal type="string">"false"</literal></expr>,
        <expr><literal type="string">"url"</literal><operator>:</operator> <literal type="string">"%@://%@:%@"</literal></expr>,
        <expr><literal type="string">"port"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"http_property"</literal><operator>:</operator> <literal type="string">"SUPERSET_WEBSERVER_PORT"</literal></expr>,
          <expr><literal type="string">"http_default_port"</literal><operator>:</operator> <literal type="string">"9088"</literal></expr>,
          <expr><literal type="string">"regex"</literal><operator>:</operator> <literal type="string">"^(\\d+)$"</literal></expr>,
          <expr><literal type="string">"site"</literal><operator>:</operator> <literal type="string">"superset"</literal></expr>
        }</block></expr>
      }</block></expr>
    ]</index></expr>
  }</block></expr>
}</block>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..905af5b0ac</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name><name>role_command_order</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@
<block>{
  <expr><literal type="string">"general_deps"</literal> <operator>:</operator> <block>{
    <expr><literal type="string">"_comment"</literal> <operator>:</operator> <literal type="string">"dependencies for Superset"</literal></expr>,
    <expr><literal type="string">"SUPERSET-START"</literal> <operator>:</operator> <index>[<expr><literal type="string">"DRUID_COORDINATOR-START"</literal></expr><operator>,</operator> <literal type="string">"DRUID_BROKER-START"</literal>]</index></expr>,
    <expr><literal type="string">"SUPERSET_SERVICE_CHECK-SERVICE_CHECK"</literal> <operator>:</operator> <index>[<expr><literal type="string">"SUPERSET-START"</literal></expr>]</index></expr>
  }</block></expr>
}</block>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..a2c6001a07</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>common</name><operator>-</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><literal type="number">0.15.0</literal><operator>/</operator><name>themes</name><operator>/</operator><name><name>theme</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">120</literal> @@
<block>{
  <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"default"</literal></expr>,
  <expr><literal type="string">"description"</literal><operator>:</operator> <literal type="string">"Default theme for Superset service"</literal></expr>,
  <expr><literal type="string">"configuration"</literal><operator>:</operator> <block>{
    <expr><literal type="string">"layouts"</literal><operator>:</operator> <index>[
      <expr><block>{
        <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"default"</literal></expr>,
        <expr><literal type="string">"tabs"</literal><operator>:</operator> <index>[
          <expr><block>{
            <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"metadata_storage"</literal></expr>,
            <expr><literal type="string">"display-name"</literal><operator>:</operator> <literal type="string">"META DATA STORAGE CONFIG"</literal></expr>,
            <expr><literal type="string">"layout"</literal><operator>:</operator> <block>{
              <expr><literal type="string">"tab-columns"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
              <expr><literal type="string">"tab-rows"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
              <expr><literal type="string">"sections"</literal><operator>:</operator> <index>[
                <expr><block>{
                  <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"section-metadata-storage"</literal></expr>,
                  <expr><literal type="string">"display-name"</literal><operator>:</operator> <literal type="string">""</literal></expr>,
                  <expr><literal type="string">"row-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                  <expr><literal type="string">"column-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                  <expr><literal type="string">"row-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                  <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                  <expr><literal type="string">"section-columns"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                  <expr><literal type="string">"section-rows"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                  <expr><literal type="string">"subsections"</literal><operator>:</operator> <index>[
                    <expr><block>{
                      <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>,
                      <expr><literal type="string">"display-name"</literal><operator>:</operator> <literal type="string">"SUPERSET META DATA STORAGE"</literal></expr>,
                      <expr><literal type="string">"row-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                      <expr><literal type="string">"column-index"</literal><operator>:</operator> <literal type="string">"0"</literal></expr>,
                      <expr><literal type="string">"row-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>,
                      <expr><literal type="string">"column-span"</literal><operator>:</operator> <literal type="string">"1"</literal></expr>
                    }</block></expr>
                  ]</index></expr>
                }</block></expr>
              ]</index></expr>
            }</block></expr>
          }</block></expr>
        ]</index></expr>
      }</block></expr>
    ]</index></expr>,
    <expr><literal type="string">"placement"</literal><operator>:</operator> <block>{
      <expr><literal type="string">"configuration-layout"</literal><operator>:</operator> <literal type="string">"default"</literal></expr>,
      <expr><literal type="string">"configs"</literal><operator>:</operator> <index>[
        <expr><block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_NAME"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block></expr><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_TYPE"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_USER"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_PASSWORD"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_HOSTNAME"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_PORT"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block><operator>,</operator>
        <block>{
          <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SECRET_KEY"</literal></expr>,
          <expr><literal type="string">"subsection-name"</literal><operator>:</operator> <literal type="string">"subsection-metadata-storage-row1-col1"</literal></expr>
        }</block>
      ]</index></expr>
    }</block></expr>,
    <expr><literal type="string">"widgets"</literal><operator>:</operator> <index>[
      <expr><block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_NAME"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr>
      }</block></expr><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_TYPE"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"combo"</literal></expr>
        }</block></expr>
      }</block><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_USER"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr>
      }</block><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_PASSWORD"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"password"</literal></expr>
        }</block></expr>
      }</block><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_HOSTNAME"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr>
      }</block><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SUPERSET_DATABASE_PORT"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"text-field"</literal></expr>
        }</block></expr>
      }</block><operator>,</operator>
      <block>{
        <expr><literal type="string">"config"</literal><operator>:</operator> <literal type="string">"superset/SECRET_KEY"</literal></expr>,
        <expr><literal type="string">"widget"</literal><operator>:</operator> <block>{
          <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"password"</literal></expr>
        }</block></expr>
      }</block>
    ]</index></expr>
  }</block></expr>
}</block>
<operator>\</operator> <name>No</name> <name>newline</name> <name>at</name> <name>end</name> <name>of</name> <name>file</name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name>
<name>index</name> <literal type="number">6aefc630f5</literal><operator>..</operator><literal type="number">5b6b5737a7</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>DRUID</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name>
@@ <operator>-</operator><literal type="number">114</literal></expr><operator>,</operator><expr><literal type="number">12</literal> <operator>+</operator><literal type="number">114</literal></expr><operator>,</operator><expr><literal type="number">6</literal> @@
             <literal type="string">"druid.hadoop.security.spnego.excludedPaths"</literal><operator>:</operator> <literal type="string">"[\"/status\"]"</literal></expr><operator>,</operator>
             <expr><literal type="string">"druid.security.extensions.loadList"</literal><operator>:</operator> <literal type="string">"[\"druid-kerberos\"]"</literal></expr></expr_stmt></block_content></block></for>
           }
        }<operator>,</operator>
        <block>{<block_content>
          <expr_stmt><expr><literal type="string">"druid-superset"</literal><operator>:</operator> <block>{
            <expr><literal type="string">"ENABLE_KERBEROS_AUTHENTICATION"</literal><operator>:</operator> <literal type="string">"True"</literal></expr>,
            <expr><literal type="string">"KERBEROS_REINIT_TIME_SEC"</literal><operator>:</operator> <literal type="string">"3600"</literal></expr>
          }</block></expr></expr_stmt>
         </block_content>}</block>
       ]<operator>,</operator>
       <expr_stmt><expr><literal type="string">"auth_to_local_properties"</literal><operator>:</operator> <index>[
<expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..b79bac9805</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>kerberos</name><operator>.</operator><name>json</name></name></expr></index>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">51</literal> @@
<block>{
  <expr><literal type="string">"services"</literal><operator>:</operator> <index>[
    <expr><block>{
      <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"SUPERSET"</literal></expr>,
      <expr><literal type="string">"identities"</literal><operator>:</operator> <index>[
        <expr><block>{
          <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"superset"</literal></expr>,
          <expr><literal type="string">"principal"</literal><operator>:</operator> <block>{
            <expr><literal type="string">"value"</literal><operator>:</operator> <literal type="string">"${superset-env/superset_user}@${realm}"</literal></expr>,
            <expr><literal type="string">"type"</literal><operator>:</operator> <literal type="string">"user"</literal></expr>,
            <expr><literal type="string">"configuration"</literal><operator>:</operator> <literal type="string">"superset/KERBEROS_PRINCIPAL"</literal></expr>,
            <expr><literal type="string">"local_username"</literal><operator>:</operator> <literal type="string">"${superset-env/superset_user}"</literal></expr>
          }</block></expr>,
          <expr><literal type="string">"keytab"</literal><operator>:</operator> <block>{
            <expr><literal type="string">"file"</literal><operator>:</operator> <literal type="string">"${keytab_dir}/superset.headless.keytab"</literal></expr>,
            <expr><literal type="string">"owner"</literal><operator>:</operator> <block>{
              <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"${superset-env/superset_user}"</literal></expr>,
              <expr><literal type="string">"access"</literal><operator>:</operator> <literal type="string">"r"</literal></expr>
            }</block></expr>,
            <expr><literal type="string">"group"</literal><operator>:</operator> <block>{
              <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"${cluster-env/user_group}"</literal></expr>,
              <expr><literal type="string">"access"</literal><operator>:</operator> <literal type="string">"r"</literal></expr>
            }</block></expr>,
            <expr><literal type="string">"configuration"</literal><operator>:</operator> <literal type="string">"superset/KERBEROS_KEYTAB"</literal></expr>
          }</block></expr>
        }</block></expr><operator>,</operator>
        <block>{
          <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"/smokeuser"</literal></expr>
        }</block>
      ]</index></expr>,
      <expr><literal type="string">"components"</literal><operator>:</operator> <index>[
        <expr><block>{
          <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"SUPERSET"</literal></expr>,
          <expr><literal type="string">"identities"</literal><operator>:</operator> <index>[
            <expr><block>{
              <expr><literal type="string">"name"</literal><operator>:</operator> <literal type="string">"/superset"</literal></expr>
            }</block></expr>
          ]</index></expr>
        }</block></expr>
      ]</index></expr>,
      <expr><literal type="string">"configurations"</literal><operator>:</operator> <index>[
        <expr><block>{
          <expr><literal type="string">"superset"</literal><operator>:</operator> <block>{
            <expr><literal type="string">"ENABLE_KERBEROS_AUTHENTICATION"</literal><operator>:</operator> <literal type="string">"True"</literal></expr>,
            <expr><literal type="string">"KERBEROS_REINIT_TIME_SEC"</literal><operator>:</operator> <literal type="string">"3600"</literal></expr>
          }</block></expr>
        }</block></expr>
      ]</index></expr>
    }</block></expr>
  ]</index></expr>
}</block>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
<operator>new</operator> <name>file</name> <name>mode</name> <literal type="number">100644</literal>
<name>index</name> <literal type="number">0000000000..2fd15726ef</literal>
<operator>--</operator> <operator>/</operator><name>dev</name><operator>/</operator><literal type="null">null</literal>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>resources</name><operator>/</operator><name>stacks</name><operator>/</operator><name>HDP</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>services</name><operator>/</operator><name>SUPERSET</name><operator>/</operator><name><name>metainfo</name><operator>.</operator><name>xml</name></name>
@@ <operator>-</operator><literal type="number">0</literal></expr><operator>,</operator><expr><literal type="number">0</literal> <operator>+</operator><literal type="number">1</literal></expr><operator>,</operator><expr><literal type="number">28</literal> @@
<operator>&lt;</operator><operator>?</operator><name>xml</name> <name>version</name><operator>=</operator><literal type="string">"1.0"</literal><operator>?</operator><operator>&gt;</operator>
<operator>&lt;</operator><operator>!</operator><operator>--</operator>
   <name>Licensed</name> <name>to</name> <name>the</name> <name>Apache</name> <name>Software</name> <call><name>Foundation</name> <argument_list>(<argument><expr><name>ASF</name></expr></argument>)</argument_list></call> <name>under</name> <name>one</name> <name>or</name> <name>more</name>
   <name>contributor</name> <name>license</name> <name><name>agreements</name><operator>.</operator>  <name>See</name></name> <name>the</name> <name>NOTICE</name> <name>file</name> <name>distributed</name> <name>with</name>
   <name>this</name> <name>work</name></expr></expr_stmt> <for>for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License<operator>,</operator> <expr_stmt><expr><name>Version</name> <literal type="number">2.0</literal>
   <operator>(</operator><name>the</name> <literal type="string">"License"</literal><operator>)</operator></expr>;</expr_stmt></for> <expr_stmt><expr><name>you</name> <name>may</name> <name>not</name> <name>use</name> <name>this</name> <name>file</name> <name>except</name> <name>in</name> <name>compliance</name> <name>with</name>
   <name>the</name> <name><name>License</name><operator>.</operator>  <name>You</name></name> <name>may</name> <name>obtain</name> <name>a</name> <name>copy</name> <name>of</name> <name>the</name> <name>License</name> <name>at</name>

       <name>http</name><operator>:</operator><comment type="line">//www.apache.org/licenses/LICENSE-2.0</comment>

   <name>Unless</name> <name>required</name> <name>by</name> <name>applicable</name> <name>law</name> <name>or</name> <name>agreed</name> <name>to</name> <name>in</name> <name>writing</name></expr><operator>,</operator> <expr><name>software</name>
   <name>distributed</name> <name>under</name> <name>the</name> <name>License</name> <name>is</name> <name>distributed</name> <name>on</name> <name>an</name> <literal type="string">"AS IS"</literal> <name>BASIS</name></expr><operator>,</operator>
   <expr><name>WITHOUT</name> <name>WARRANTIES</name> <name>OR</name> <name>CONDITIONS</name> <name>OF</name> <name>ANY</name> <name>KIND</name></expr><operator>,</operator> <expr><name>either</name> <name>express</name> <name>or</name> <name><name>implied</name><operator>.</operator>
   <name>See</name></name> <name>the</name> <name>License</name></expr></expr_stmt> <for>for the specific language governing permissions and
   limitations under the License.
--&gt;
&lt;metainfo&gt;
  &lt;schemaVersion&gt;2.0&lt;/schemaVersion&gt;
  &lt;services&gt;
    &lt;service&gt;
      &lt;name&gt;SUPERSET&lt;/name&gt;
      &lt;version&gt;0.15.0&lt;/version&gt;
      &lt;extends&gt;common-services/SUPERSET/0.15.0&lt;/extends&gt;
      &lt;selection&gt;TECH_PREVIEW&lt;/selection&gt;
    &lt;/service&gt;
  &lt;/services&gt;
&lt;/metainfo&gt;
diff --git a/ambari-server/src/main/resources/stacks/HDP/2.6/services/stack_advisor.py b/ambari-server/src/main/resources/stacks/HDP/2.6/services/stack_advisor.py
index 6108351b31..723ff4e3b1 100644
-- a/ambari-server/src/main/resources/stacks/HDP/2.6/services/stack_advisor.py
++ b/ambari-server/src/main/resources/stacks/HDP/2.6/services/stack_advisor.py
@@ -32<operator>,</operator><expr_stmt><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">32</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <name>class</name> <call><name>HDP26StackAdvisor</name><argument_list>(<argument><expr><name>HDP25StackAdvisor</name></expr></argument>)</argument_list></call><operator>:</operator>
       <name>parentRecommendConfDict</name> <operator>=</operator> <call><name>super</name><argument_list>(<argument><expr><name>HDP26StackAdvisor</name></expr></argument>, <argument><expr><name>self</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getServiceConfigurationRecommenderDict</name><argument_list>()</argument_list></call>
       <name>childRecommendConfDict</name> <operator>=</operator> <block>{
         <expr><literal type="string">"DRUID"</literal><operator>:</operator> <name><name>self</name><operator>.</operator><name>recommendDruidConfigurations</name></name></expr>,
        <expr><literal type="string">"SUPERSET"</literal><operator>:</operator> <name><name>self</name><operator>.</operator><name>recommendSupersetConfigurations</name></name></expr>,
         <expr><literal type="string">"ATLAS"</literal><operator>:</operator> <name><name>self</name><operator>.</operator><name>recommendAtlasConfigurations</name></name></expr>,
         <expr><literal type="string">"TEZ"</literal><operator>:</operator> <name><name>self</name><operator>.</operator><name>recommendTezConfigurations</name></name></expr>,
         <expr><literal type="string">"RANGER"</literal><operator>:</operator> <name><name>self</name><operator>.</operator><name>recommendRangerConfigurations</name></name></expr>,
@@ <expr><operator>-</operator><literal type="number">156</literal></expr>,<expr><literal type="number">11</literal> <operator>+</operator><literal type="number">157</literal></expr>,<expr><literal type="number">12</literal> @@ <name>class</name> <call><name>HDP26StackAdvisor</name><argument_list>(<argument><expr><name>HDP25StackAdvisor</name></expr></argument>)</argument_list></call><operator>:</operator>
               <call><name>putComponentProperty</name><argument_list>(<argument><expr><literal type="char">'druid.processing.numThreads'</literal></expr></argument>, <argument><expr><name>processingThreads</name></expr></argument>)</argument_list></call>
               <call><name>putComponentProperty</name><argument_list>(<argument><expr><literal type="char">'druid.server.http.numThreads'</literal></expr></argument>, <argument><expr><call><name>max</name><argument_list>(<argument><expr><literal type="number">10</literal></expr></argument>, <argument><expr><operator>(</operator><name>totalAvailableCpu</name> <operator>*</operator> <literal type="number">17</literal><operator>)</operator> <operator>/</operator> <literal type="number">16</literal> <operator>+</operator> <literal type="number">2</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="number">30</literal></expr></argument>)</argument_list></call>
 
  <name>def</name> <call><name>recommendSupersetConfigurations</name><argument_list>(<argument><expr><name>self</name></expr></argument>, <argument><expr><name>configurations</name></expr></argument>, <argument><expr><name>clusterData</name></expr></argument>, <argument><expr><name>services</name></expr></argument>, <argument><expr><name>hosts</name></expr></argument>)</argument_list></call><operator>:</operator>
       # <name>superset</name> <name>is</name> <name>in</name> <name>list</name> <name>of</name> <name>services</name> <name>to</name> <name>be</name> <name>installed</name></expr>
      <if_stmt><if>if 'druid-superset' in services['configurations']:
      if 'superset' in services['configurations']:
         # Recommendations for Superset
        superset_database_type = services['configurations']["druid-superset"]["properties"]["SUPERSET_DATABASE_TYPE"]
        putSupersetProperty = self.putProperty<condition>(<expr><name>configurations</name></expr><operator>,</operator> <expr><literal type="string">"druid-superset"</literal></expr><operator>,</operator> <expr><name>services</name></expr>)</condition><block type="pseudo"><block_content>
        <expr_stmt><expr><name>superset_database_type</name> <operator>=</operator> <name><name>services</name><index>[<expr><literal type="char">'configurations'</literal></expr>]</index><index>[<expr><literal type="string">"superset"</literal></expr>]</index><index>[<expr><literal type="string">"properties"</literal></expr>]</index><index>[<expr><literal type="string">"SUPERSET_DATABASE_TYPE"</literal></expr>]</index></name>
        <name>putSupersetProperty</name> <operator>=</operator> <call><name><name>self</name><operator>.</operator><name>putProperty</name></name><argument_list>(<argument><expr><name>configurations</name></expr></argument>, <argument><expr><literal type="string">"superset"</literal></expr></argument>, <argument><expr><name>services</name></expr></argument>)</argument_list></call></expr></expr_stmt></block_content></block></if></if_stmt>
 
         <if_stmt><if>if superset_database_type == "mysql":
             putSupersetProperty<condition>(<expr><literal type="string">"SUPERSET_DATABASE_PORT"</literal></expr><operator>,</operator> <expr><literal type="string">"3306"</literal></expr>)</condition><block type="pseudo"><block_content>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>ambari</name><operator>/</operator><name>server</name><operator>/</operator><name>upgrade</name><operator>/</operator><name><name>UpgradeCatalog260Test</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>ambari</name><operator>/</operator><name>server</name><operator>/</operator><name>upgrade</name><operator>/</operator><name><name>UpgradeCatalog260Test</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">44b5d914fd</literal><operator>..</operator><name>df15657152</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>ambari</name><operator>/</operator><name>server</name><operator>/</operator><name>upgrade</name><operator>/</operator><name><name>UpgradeCatalog260Test</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>ambari</name><operator>/</operator><name>server</name><operator>/</operator><name>upgrade</name><operator>/</operator><name><name>UpgradeCatalog260Test</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">464</literal></expr><operator>,</operator><expr><literal type="number">5</literal> <operator>+</operator><literal type="number">464</literal></expr><operator>,</operator><expr><literal type="number">48</literal> @@ <specifier>public</specifier> <name>class</name> <name>UpgradeCatalog260Test</name> <block>{
         <expr><call><name>capture</name><argument_list>(<argument><expr><name>scdcaptureKey</name></expr></argument>)</argument_list></call></expr>, <expr><call><name>capture</name><argument_list>(<argument><expr><name>scdcaptureValue</name></expr></argument>)</argument_list></call></expr>, <expr><call><name>eq</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>))</block><operator>.</operator><call><name>andReturn</name><argument_list>(<argument><expr><name>current</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
   }</block></expr></expr_stmt></for>
 
  <function><annotation>@<name>Test</name></annotation>
  <type><specifier>public</specifier> <name>void</name></type> <name>testRemoveDruidSuperset</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>

    <decl_stmt><decl><type><name><name>List</name><argument_list type="generic">&lt;<argument><name>Integer</name></argument>&gt;</argument_list></name></type> <name>current</name> <init>= <expr><operator>new</operator> <call><name><name>ArrayList</name><argument_list type="generic">&lt;<argument><name>Integer</name></argument>&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
    <expr_stmt><expr><call><name><name>current</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt><expr><call><name>expect</name><argument_list>(<argument><expr><call><name><name>dbAccessor</name><operator>.</operator><name>getConnection</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>andReturn</name><argument_list>(<argument><expr><name>connection</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>anyTimes</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expect</name><argument_list>(<argument><expr><call><name><name>connection</name><operator>.</operator><name>createStatement</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>andReturn</name><argument_list>(<argument><expr><name>statement</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>anyTimes</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expect</name><argument_list>(<argument><expr><call><name><name>statement</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><call><name>anyObject</name><argument_list>(<argument><expr><name><name>String</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>andReturn</name><argument_list>(<argument><expr><name>resultSet</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>anyTimes</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expect</name><argument_list>(<argument><expr><call><name><name>configuration</name><operator>.</operator><name>getDatabaseType</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>andReturn</name><argument_list>(<argument><expr><name><name>Configuration</name><operator>.</operator><name>DatabaseType</name><operator>.</operator><name>POSTGRES</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>anyTimes</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM clusterconfigmapping WHERE type_name like 'druid-superset%'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM serviceconfigmapping WHERE config_id IN (SELECT config_id from clusterconfig where type_name like 'druid-superset%')"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM clusterconfig WHERE type_name like 'druid-superset%'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM hostcomponentdesiredstate WHERE component_name = 'DRUID_SUPERSET'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM hostcomponentstate WHERE component_name = 'DRUID_SUPERSET'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>dbAccessor</name><operator>.</operator><name>executeQuery</name></name><argument_list>(<argument><expr><literal type="string">"DELETE FROM servicecomponentdesiredstate WHERE component_name = 'DRUID_SUPERSET'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>expectLastCall</name><argument_list>()</argument_list></call><operator>.</operator><call><name>once</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name>replay</name><argument_list>(<argument><expr><name>dbAccessor</name></expr></argument>, <argument><expr><name>configuration</name></expr></argument>, <argument><expr><name>connection</name></expr></argument>, <argument><expr><name>statement</name></expr></argument>, <argument><expr><name>resultSet</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <decl_stmt><decl><type><name>Module</name></type> <name>module</name> <init>= <expr><operator>new</operator> <class><super><name>Module</name></super><argument_list>()</argument_list> <block>{
      <function><annotation>@<name>Override</name></annotation>
      <type><specifier>public</specifier> <name>void</name></type> <name>configure</name><parameter_list>(<parameter><decl><type><name>Binder</name></type> <name>binder</name></decl></parameter>)</parameter_list> <block>{<block_content>
        <expr_stmt><expr><call><name><name>binder</name><operator>.</operator><name>bind</name></name><argument_list>(<argument><expr><name><name>DBAccessor</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toInstance</name><argument_list>(<argument><expr><name>dbAccessor</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>binder</name><operator>.</operator><name>bind</name></name><argument_list>(<argument><expr><name><name>OsFamily</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toInstance</name><argument_list>(<argument><expr><name>osFamily</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>binder</name><operator>.</operator><name>bind</name></name><argument_list>(<argument><expr><name><name>EntityManager</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toInstance</name><argument_list>(<argument><expr><name>entityManager</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name><name>binder</name><operator>.</operator><name>bind</name></name><argument_list>(<argument><expr><name><name>Configuration</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toInstance</name><argument_list>(<argument><expr><name>configuration</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      </block_content>}</block></function>
    }</block></class></expr></init></decl>;</decl_stmt>

    <decl_stmt><decl><type><name>Injector</name></type> <name>injector</name> <init>= <expr><call><name><name>Guice</name><operator>.</operator><name>createInjector</name></name><argument_list>(<argument><expr><name>module</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>UpgradeCatalog260</name></type> <name>upgradeCatalog260</name> <init>= <expr><call><name><name>injector</name><operator>.</operator><name>getInstance</name></name><argument_list>(<argument><expr><name><name>UpgradeCatalog260</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <expr_stmt><expr><call><name><name>upgradeCatalog260</name><operator>.</operator><name>removeSupersetFromDruid</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt><expr><call><name>verify</name><argument_list>(<argument><expr><name>dbAccessor</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

  </block_content>}</block></function>

 
 }
diff <expr><operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>python</name><operator>/</operator><name>stacks</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>configs</name><operator>/</operator>default<operator>.</operator><name>json</name> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>python</name><operator>/</operator><name>stacks</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>configs</name><operator>/</operator>default<operator>.</operator><name>json</name>
<name>index</name> <name>add31d04a8</name><operator>..</operator><literal type="number">31f3dbde71</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>python</name><operator>/</operator><name>stacks</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>configs</name><operator>/</operator>default<operator>.</operator><name>json</name>
<operator>++</operator> <name>b</name><operator>/</operator><name>ambari</name><operator>-</operator><name>server</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>python</name><operator>/</operator><name>stacks</name><operator>/</operator><literal type="number">2.6</literal><operator>/</operator><name>configs</name><operator>/</operator>default<operator>.</operator><name>json</name>
@@ <operator>-</operator><literal type="number">463</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">463</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@
     <literal type="string">"druid-logrotate"</literal> <operator>:</operator> <block>{
       <expr><literal type="string">"content"</literal> <operator>:</operator> <literal type="string">"&lt;![CDATA[\n    {{druid_log_dir}}/*.log {\n        copytruncate\n        rotate 7\n        daily\n        nocompress\n        missingok\n        notifempty\n        create 660 druid users\n        dateext\n        dateformat -%Y-%m-%d-%s\n        }\n      ]]&gt;\n"</literal></expr>
     }</block></expr><operator>,</operator>
    <expr><literal type="string">"druid-superset"</literal> <operator>:</operator> <block>{
    <expr><literal type="string">"superset"</literal> <operator>:</operator> <block>{
       <expr><literal type="string">"SUPERSET_DATABASE_TYPE"</literal> <operator>:</operator> <literal type="string">"sqllite"</literal></expr>
     }</block></expr>
   }</block></expr><operator>,</operator>
<expr><operator>-</operator> 
<literal type="number">2.19.1.windows</literal><literal type="number">.1</literal></expr>

</unit>
