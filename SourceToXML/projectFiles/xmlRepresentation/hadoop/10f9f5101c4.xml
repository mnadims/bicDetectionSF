<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" revision="1.0.0" language="Java" filename="E:/01Courses@USASK/CMPT898-HumanDrivenSoftwareEngineeringForScientificResearch/ProjectProgress/data_files/final_dataset/gen_patch_codes/filtered/hadoop/10f9f5101c4.java"><expr_stmt><expr><name>From</name> <literal type="number">10f9f5101c44be7c675a44ded4aad212627ecdee</literal> <name>Mon</name> <name>Sep</name> <literal type="number">17</literal> <literal type="number">00</literal><operator>:</operator><literal type="number">00</literal><operator>:</operator><literal type="number">00</literal> <literal type="number">2001</literal>
<name>From</name><operator>:</operator> <name>Jason</name> <name><name>Lowe</name> <argument_list type="generic">&lt;<argument><name>jlowe</name><annotation>@<name><name>apache</name><operator>.</operator><name>org</name></name></annotation></argument>&gt;</argument_list></name>
<name>Date</name><operator>:</operator> <name>Thu</name></expr><operator>,</operator> <expr><literal type="number">6</literal> <name>Nov</name> <literal type="number">2014</literal> <literal type="number">15</literal><operator>:</operator><literal type="number">10</literal><operator>:</operator><literal type="number">40</literal> <operator>+</operator><literal type="number">0000</literal>
<name>Subject</name><operator>:</operator> <index>[<expr><name>PATCH</name></expr>]</index> <name>MAPREDUCE</name><operator>-</operator><literal type="number">5960.</literal> <name>JobSubmitter</name><literal type="char">'s check whether job.jar is local
 is incorrect with no authority in job jar path. Contributed by Gera Shegalov

--
 .../org/apache/hadoop/fs/FileContext.java     |  3 ++
 hadoop-mapreduce-project/CHANGES.txt          |  3 ++
 .../v2/app/job/impl/TaskAttemptImpl.java      |  8 ++--
 .../apache/hadoop/mapreduce/JobSubmitter.java |  9 ++--
 .../org/apache/hadoop/mapred/YARNRunner.java  |  5 ++-
 .../hadoop/mapreduce/v2/TestMRJobs.java       | 41 +++++++++++++++----
 .../hadoop/mapreduce/v2/TestUberAM.java       | 40 +++---------------
 7 files changed, 56 insertions(+), 53 deletions(-)

diff --git a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java
index 2323650febe..85f8136c0ac 100644
-- a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java
++ b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java
@@ -430,6 +430,9 @@ public static FileContext getFileContext(final URI defaultFsUri,
       final Configuration aConf) throws UnsupportedFileSystemException {
     UserGroupInformation currentUser = null;
     AbstractFileSystem defaultAfs = null;
    if (defaultFsUri.getScheme() == null) {
      return getFileContext(aConf);
    }
     try {
       currentUser = UserGroupInformation.getCurrentUser();
       defaultAfs = getAbstractFileSystem(currentUser, defaultFsUri, aConf);
diff --git a/hadoop-mapreduce-project/CHANGES.txt b/hadoop-mapreduce-project/CHANGES.txt
index bbe96c2a8e7..fd42f82c9a8 100644
-- a/hadoop-mapreduce-project/CHANGES.txt
++ b/hadoop-mapreduce-project/CHANGES.txt
@@ -459,6 +459,9 @@ Release 2.6.0 - UNRELEASED
     MAPREDUCE-6048. Fixed TestJavaSerialization failure. (Varun Vasudev via
     jianhe)
 
    MAPREDUCE-5960. JobSubmitter'</literal><name>s</name> <name>check</name> <name>whether</name> <name><name>job</name><operator>.</operator><name>jar</name></name> <name>is</name> <name>local</name> <name>is</name> <name>incorrect</name>
    <name>with</name> <name>no</name> <name>authority</name> <name>in</name> <name>job</name> <name>jar</name> <name><name>path</name><operator>.</operator></name> (<name>Gera</name> <name>Shegalov</name> <name>via</name> <name>jlowe</name></expr></expr_stmt>)

 <expr_stmt><expr><name>Release</name> <literal type="number">2.5.2</literal> <operator>-</operator> <name>UNRELEASED</name>
 
   <name>INCOMPATIBLE</name> <name>CHANGES</name>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>app</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name>app</name><operator>/</operator><name>job</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>TaskAttemptImpl</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>app</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name>app</name><operator>/</operator><name>job</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>TaskAttemptImpl</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">288e18e6901</literal><operator>..</operator><name>dfc6a3f5a12</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>app</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name>app</name><operator>/</operator><name>job</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>TaskAttemptImpl</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>app</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name>app</name><operator>/</operator><name>job</name><operator>/</operator><name>impl</name><operator>/</operator><name><name>TaskAttemptImpl</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">657</literal></expr><operator>,</operator><expr><literal type="number">9</literal> <operator>+</operator><literal type="number">657</literal></expr><operator>,</operator><expr><literal type="number">11</literal> @@ <specifier>private</specifier> <specifier>static</specifier> <name>ContainerLaunchContext</name> <call><name>createCommonContainerLaunchContext</name><argument_list>(
       <comment type="line">// //////////// Set up JobJar to be localized properly on the remote NM.</comment>
       <argument><expr><name>String</name> <name>jobJar</name> <operator>=</operator> <call><name><name>conf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>MRJobConfig</name><operator>.</operator><name>JAR</name></name></expr></argument>)</argument_list></call></expr></argument>;
       if <argument><expr><operator>(</operator><name>jobJar</name> <operator>!=</operator> <literal type="null">null</literal><operator>)</operator> <block>{
        <expr><name>Path</name> <name>remoteJobJar</name> <operator>=</operator> <operator>(</operator><operator>new</operator> <call><name>Path</name><argument_list>(<argument><expr><name>jobJar</name></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>makeQualified</name><argument_list>(<argument><expr><call><name><name>remoteFS</name>
            <operator>.</operator><name>getUri</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>remoteFS</name><operator>.</operator><name>getWorkingDirectory</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;
        <expr><name>LocalResource</name> <name>rc</name> <operator>=</operator> <call><name>createLocalResource</name><argument_list>(<argument><expr><name>remoteFS</name></expr></argument>, <argument><expr><name>remoteJobJar</name></expr></argument>,
        <argument><expr><name>final</name> <name>Path</name> <name>jobJarPath</name> <operator>=</operator> <operator>new</operator> <call><name>Path</name><argument_list>(<argument><expr><name>jobJar</name></expr></argument>)</argument_list></call></expr></argument>;
        <argument><expr><name>final</name> <name>FileSystem</name> <name>jobJarFs</name> <operator>=</operator> <call><name><name>FileSystem</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><call><name><name>jobJarPath</name><operator>.</operator><name>toUri</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>conf</name></expr></argument>)</argument_list></call></expr></argument>;
        <argument><expr><name>Path</name> <name>remoteJobJar</name> <operator>=</operator> <call><name><name>jobJarPath</name><operator>.</operator><name>makeQualified</name></name><argument_list>(<argument><expr><call><name><name>jobJarFs</name><operator>.</operator><name>getUri</name></name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><call><name><name>jobJarFs</name><operator>.</operator><name>getWorkingDirectory</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
        <argument><expr><name>LocalResource</name> <name>rc</name> <operator>=</operator> <call><name>createLocalResource</name><argument_list>(<argument><expr><name>jobJarFs</name></expr></argument>, <argument><expr><name>remoteJobJar</name></expr></argument>,
             <argument><expr><name><name>LocalResourceType</name><operator>.</operator><name>PATTERN</name></name></expr></argument>, <argument><expr><name><name>LocalResourceVisibility</name><operator>.</operator><name>APPLICATION</name></name></expr></argument>)</argument_list></call></expr></argument>;
         <argument><expr><name>String</name> <name>pattern</name> <operator>=</operator> <call><name><name>conf</name><operator>.</operator><name>getPattern</name></name><argument_list>(<argument><expr><name><name>JobContext</name><operator>.</operator><name>JAR_UNPACK_PATTERN</name></name></expr></argument>, 
             <argument><expr><name><name>JobConf</name><operator>.</operator><name>UNPACK_JAR_PATTERN_DEFAULT</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>pattern</name><argument_list>()</argument_list></call></expr></argument>;
<argument><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name><name>JobSubmitter</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name><name>JobSubmitter</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>b76a734da61</name><operator>..</operator><name>ba496ee84f6</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name><name>JobSubmitter</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>core</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name><name>JobSubmitter</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">250</literal></expr></argument>,<argument><expr><literal type="number">11</literal> <operator>+</operator><literal type="number">250</literal></expr></argument>,<argument><expr><literal type="number">10</literal> @@ <specifier>private</specifier> <name>void</name> <call><name>copyAndConfigureFiles</name><argument_list>(<argument><expr><name>Job</name> <name>job</name></expr></argument>, <argument><expr><name>Path</name> <name>submitJobDir</name></expr></argument>,
       }</argument_list></call>
       <name>Path</name> <name>jobJarPath</name> <operator>=</operator> <operator>new</operator> <call><name>Path</name><argument_list>(<argument><expr><name>jobJar</name></expr></argument>)</argument_list></call></expr></argument>;
       <argument><expr><name>URI</name> <name>jobJarURI</name> <operator>=</operator> <call><name><name>jobJarPath</name><operator>.</operator><name>toUri</name></name><argument_list>()</argument_list></call></expr></argument>;
      <comment type="line">// If the job jar is already in fs, we don't need to copy it from local fs</comment>
      if <argument><expr><operator>(</operator><call><name><name>jobJarURI</name><operator>.</operator><name>getScheme</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal> <operator>||</operator> <call><name><name>jobJarURI</name><operator>.</operator><name>getAuthority</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal>
              <operator>||</operator> <operator>!</operator><operator>(</operator><call><name><name>jobJarURI</name><operator>.</operator><name>getScheme</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>jtFs</name><operator>.</operator><name>getUri</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getScheme</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call> 
                  <operator>&amp;&amp;</operator> <call><name><name>jobJarURI</name><operator>.</operator><name>getAuthority</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(
                                            <argument><expr><call><name><name>jtFs</name><operator>.</operator><name>getUri</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getAuthority</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>)</operator><operator>)</operator> <block>{
      <comment type="line">// If the job jar is already in a global fs,</comment>
      <comment type="line">// we don't need to copy it from local fs</comment>
      <if_stmt><if>if <condition>(     <expr><call><name><name>jobJarURI</name><operator>.</operator><name>getScheme</name></name><argument_list>()</argument_list></call> <operator>==</operator> <literal type="null">null</literal>
            <operator>||</operator> <call><name><name>jobJarURI</name><operator>.</operator><name>getScheme</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><literal type="string">"file"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block>{<block_content>
         <expr_stmt><expr><call><name>copyJar</name><argument_list>(<argument><expr><name>jobJarPath</name></expr></argument>, <argument><expr><call><name><name>JobSubmissionFiles</name><operator>.</operator><name>getJobJar</name></name><argument_list>(<argument><expr><name>submitJobDir</name></expr></argument>)</argument_list></call></expr></argument>, 
             <argument><expr><name>replication</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
         <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>setJar</name></name><argument_list>(<argument><expr><call><name><name>JobSubmissionFiles</name><operator>.</operator><name>getJobJar</name></name><argument_list>(<argument><expr><name>submitJobDir</name></expr></argument>)</argument_list></call><operator>.</operator><call><name>toString</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapred</name><operator>/</operator><name><name>YARNRunner</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapred</name><operator>/</operator><name><name>YARNRunner</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>a1c4c32f0ea</name><operator>..</operator><literal type="number">7b2cf53417a</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapred</name><operator>/</operator><name><name>YARNRunner</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>main</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapred</name><operator>/</operator><name><name>YARNRunner</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">357</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">357</literal></expr><operator>,</operator><expr><literal type="number">9</literal> @@ <specifier>public</specifier> <name>ApplicationSubmissionContext</name> <call><name>createApplicationSubmissionContext</name><argument_list>(
             <argument><expr><name>jobConfPath</name></expr></argument>, <argument><expr><name><name>LocalResourceType</name><operator>.</operator><name>FILE</name></name></expr></argument>)</argument_list></call></expr></expr_stmt></block_content></block></if></if_stmt></block></expr></argument>)</argument_list></call></expr>;
     <if_stmt><if>if <condition>(<expr><call><name><name>jobConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>MRJobConfig</name><operator>.</operator><name>JAR</name></name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
       <decl_stmt><decl><type><name>Path</name></type> <name>jobJarPath</name> <init>= <expr><operator>new</operator> <call><name>Path</name><argument_list>(<argument><expr><call><name><name>jobConf</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>MRJobConfig</name><operator>.</operator><name>JAR</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <decl_stmt><decl><type><name>LocalResource</name></type> <name>rc</name> <init>= <expr><call><name>createApplicationResource</name><argument_list>(<argument><expr><name>defaultFileContext</name></expr></argument>,
          <argument><expr><name>jobJarPath</name></expr></argument>, 
      <argument><expr><name>LocalResource</name> <name>rc</name> <operator>=</operator> <call><name>createApplicationResource</name><argument_list>(
          <argument><expr><call><name><name>FileContext</name><operator>.</operator><name>getFileContext</name></name><argument_list>(<argument><expr><call><name><name>jobJarPath</name><operator>.</operator><name>toUri</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>jobConf</name></expr></argument>)</argument_list></call></expr></argument>,
          <argument><expr><name>jobJarPath</name></expr></argument>,
           <argument><expr><name><name>LocalResourceType</name><operator>.</operator><name>PATTERN</name></name></expr></argument>)</argument_list></call></expr></argument>;</argument_list></call></expr></init></decl></decl_stmt>
       <decl_stmt><decl><type><name>String</name></type> <name>pattern</name> <init>= <expr><call><name><name>conf</name><operator>.</operator><name>getPattern</name></name><argument_list>(<argument><expr><name><name>JobContext</name><operator>.</operator><name>JAR_UNPACK_PATTERN</name></name></expr></argument>, 
           <argument><expr><name><name>JobConf</name><operator>.</operator><name>UNPACK_JAR_PATTERN_DEFAULT</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>pattern</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<expr_stmt><expr><name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestMRJobs</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestMRJobs</name><operator>.</operator><name>java</name></name>
<name>index</name> <literal type="number">00449252b7a</literal><operator>..</operator><literal type="number">2b45049e08c</literal> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestMRJobs</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestMRJobs</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">40</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">40</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>FailingMapper</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>RandomTextWriterJob</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>RandomTextWriterJob</name><operator>.</operator><name>RandomInputFormat</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>fs</name><operator>.</operator><name>viewfs</name><operator>.</operator><name>ConfigUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>mapreduce</name><operator>.</operator><name>SleepJob</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>mapreduce</name><operator>.</operator><name>SleepJob</name><operator>.</operator><name>SleepMapper</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>conf</name><operator>.</operator><name>Configuration</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">89</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">90</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>security</name><operator>.</operator><name>token</name><operator>.</operator><name>Token</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>security</name><operator>.</operator><name>token</name><operator>.</operator><name>TokenIdentifier</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>util</name><operator>.</operator><name>ApplicationClassLoader</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>util</name><operator>.</operator><name>ClassUtil</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>util</name><operator>.</operator><name>JarFinder</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>util</name><operator>.</operator><name>Shell</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>yarn</name><operator>.</operator><name>api</name><operator>.</operator><name>records</name><operator>.</operator><name>ApplicationId</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">97</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">99</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@</expr></expr_stmt>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>yarn</name><operator>.</operator><name>server</name><operator>.</operator><name>resourcemanager</name><operator>.</operator><name>rmapp</name><operator>.</operator><name>RMAppState</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>hadoop</name><operator>.</operator><name>yarn</name><operator>.</operator><name>util</name><operator>.</operator><name>ConverterUtils</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>log4j</name><operator>.</operator><name>Level</name></name>;</import>
<import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>After</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>AfterClass</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>Assert</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>junit</name><operator>.</operator><name>BeforeClass</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">111</literal></expr><operator>,</operator><expr><literal type="number">6</literal> <operator>+</operator><literal type="number">114</literal></expr><operator>,</operator><expr><literal type="number">9</literal> @@
   <specifier>private</specifier> <specifier>static</specifier> <name>final</name> <name>String</name> <name>TEST_IO_SORT_MB</name> <operator>=</operator> <literal type="string">"11"</literal></expr>;</expr_stmt>
   <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>String</name></type> <name>TEST_GROUP_MAX</name> <init>= <expr><literal type="string">"200"</literal></expr></init></decl>;</decl_stmt>
 
  <decl_stmt><decl><type><specifier>private</specifier> <specifier>static</specifier> <specifier>final</specifier> <name>int</name></type> <name>DEFAULT_REDUCES</name> <init>= <expr><literal type="number">2</literal></expr></init></decl>;</decl_stmt>
  <decl_stmt><decl><type><specifier>protected</specifier> <name>int</name></type> <name>numSleepReducers</name> <init>= <expr><name>DEFAULT_REDUCES</name></expr></init></decl>;</decl_stmt>

   <decl_stmt><decl><type><specifier>protected</specifier> <specifier>static</specifier> <name>MiniMRYarnCluster</name></type> <name>mrCluster</name></decl>;</decl_stmt>
   <decl_stmt><decl><type><specifier>protected</specifier> <specifier>static</specifier> <name>MiniDFSCluster</name></type> <name>dfsCluster</name></decl>;</decl_stmt>
 
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">175</literal></expr><operator>,</operator><expr><literal type="number">10</literal> <operator>+</operator><literal type="number">181</literal></expr><operator>,</operator><expr><literal type="number">23</literal> @@ <specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>tearDown</name><argument_list>()</argument_list></call> <block>{
     }</block></expr></expr_stmt>
   }</block_content>
 
  @After
  public void resetInit(</block></if></if_stmt>) <block>{
    <expr><name>numSleepReducers</name> <operator>=</operator> <name>DEFAULT_REDUCES</name></expr>;
  }</block></block>

  @<call><name>Test</name> <argument_list>(<argument><expr><name>timeout</name> <operator>=</operator> <literal type="number">300000</literal></expr></argument>)</argument_list></call>
  <specifier>public</specifier> <name>void</name> <call><name>testSleepJob</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>Exception</name> <block>{
    <expr><call><name>testSleepJobInternal</name><argument_list>(<argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr></argument>;</argument_list></call></expr></expr_stmt>
  }

   @<expr_stmt><expr><call><name>Test</name> <argument_list>(<argument><expr><name>timeout</name> <operator>=</operator> <literal type="number">300000</literal></expr></argument>)</argument_list></call>
  <specifier>public</specifier> <name>void</name> <call><name>testSleepJob</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>InterruptedException</name></expr></argument>,
      <argument><expr><name>ClassNotFoundException</name> <block>{ 
    <expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"\n\n\nStarting testSleepJob()."</literal></expr></argument>)</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>
  <function><type><specifier>public</specifier> <name>void</name></type> <name>testSleepJobWithRemoteJar</name><parameter_list>()</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
    <expr_stmt><expr><call><name>testSleepJobInternal</name><argument_list>(<argument><expr><literal type="boolean">true</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
  </block_content>}</block></function>

  <function><type><specifier>private</specifier> <name>void</name></type> <name>testSleepJobInternal</name><parameter_list>(<parameter><decl><type><name>boolean</name></type> <name>useRemoteJar</name></decl></parameter>)</parameter_list> <throws>throws <argument><expr><name>Exception</name></expr></argument></throws> <block>{<block_content>
    <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"\n\n\nStarting testSleepJob: useRemoteJar="</literal> <operator>+</operator> <name>useRemoteJar</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
 
     <if_stmt><if>if <condition>(<expr><operator>!</operator><operator>(</operator><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><name><name>MiniMRYarnCluster</name><operator>.</operator><name>APPJAR</name></name></expr></argument>)</argument_list></call><operator>)</operator><operator>.</operator><call><name>exists</name><argument_list>()</argument_list></call></expr>)</condition> <block>{<block_content>
       <expr_stmt><expr><call><name><name>LOG</name><operator>.</operator><name>info</name></name><argument_list>(<argument><expr><literal type="string">"MRAppJar "</literal> <operator>+</operator> <name><name>MiniMRYarnCluster</name><operator>.</operator><name>APPJAR</name></name>
@@ <operator>-</operator><literal type="number">192</literal></expr></argument>,<argument><expr><literal type="number">14</literal> <operator>+</operator><literal type="number">211</literal></expr></argument>,<argument><expr><literal type="number">20</literal> @@ <specifier>public</specifier> <name>void</name> <call><name>testSleepJob</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>InterruptedException</name></expr></argument>,
     
     <argument><expr><name>SleepJob</name> <name>sleepJob</name> <operator>=</operator> <operator>new</operator> <call><name>SleepJob</name><argument_list>()</argument_list></call></expr></argument></throws></expr></argument>;</argument_list></call></expr></expr_stmt>
     <expr_stmt><expr><call><name><name>sleepJob</name><operator>.</operator><name>setConf</name></name><argument_list>(<argument><expr><name>sleepConf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <decl_stmt><decl><type><name>int</name></type> <name>numReduces</name> <init>= <expr><call><name><name>sleepConf</name><operator>.</operator><name>getInt</name></name><argument_list>(<argument><expr><literal type="string">"TestMRJobs.testSleepJob.reduces"</literal></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line">// or sleepConf.getConfig().getInt(MRJobConfig.NUM_REDUCES, 2);</comment>
    
     <comment type="line">// job with 3 maps (10s) and numReduces reduces (5s), 1 "record" each:</comment>
    <decl_stmt><decl><type><name>Job</name></type> <name>job</name> <init>= <expr><call><name><name>sleepJob</name><operator>.</operator><name>createJob</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><name>numReduces</name></expr></argument>, <argument><expr><literal type="number">10000</literal></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="number">5000</literal></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt><decl><type><name>Job</name></type> <name>job</name> <init>= <expr><call><name><name>sleepJob</name><operator>.</operator><name>createJob</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><name>numSleepReducers</name></expr></argument>, <argument><expr><literal type="number">10000</literal></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="number">5000</literal></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
 
     <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>addFileToClassPath</name></name><argument_list>(<argument><expr><name>APP_JAR</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="line">// The AppMaster jar itself.</comment>
    <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>setJarByClass</name></name><argument_list>(<argument><expr><name><name>SleepJob</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt><if>if <condition>(<expr><name>useRemoteJar</name></expr>)</condition> <block>{<block_content>
      <decl_stmt><decl><type><specifier>final</specifier> <name>Path</name></type> <name>localJar</name> <init>= <expr><operator>new</operator> <call><name>Path</name><argument_list>(
          <argument><expr><call><name><name>ClassUtil</name><operator>.</operator><name>findContainingJar</name></name><argument_list>(<argument><expr><name><name>SleepJob</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
      <expr_stmt><expr><call><name><name>ConfigUtil</name><operator>.</operator><name>addLink</name></name><argument_list>(<argument><expr><call><name><name>job</name><operator>.</operator><name>getConfiguration</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"/jobjars"</literal></expr></argument>,
          <argument><expr><call><name><name>localFs</name><operator>.</operator><name>makeQualified</name></name><argument_list>(<argument><expr><call><name><name>localJar</name><operator>.</operator><name>getParent</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><operator>.</operator><call><name>toUri</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
      <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>setJar</name></name><argument_list>(<argument><expr><literal type="string">"viewfs:///jobjars/"</literal> <operator>+</operator> <call><name><name>localJar</name><operator>.</operator><name>getName</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if> <else>else <block>{<block_content>
      <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>setJarByClass</name></name><argument_list>(<argument><expr><name><name>SleepJob</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></else></if_stmt>
     <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>setMaxMapAttempts</name></name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="line">// speed up failures</comment>
     <expr_stmt><expr><call><name><name>job</name><operator>.</operator><name>submit</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
     <decl_stmt><decl><type><name>String</name></type> <name>trackingUrl</name> <init>= <expr><call><name><name>job</name><operator>.</operator><name>getTrackingURL</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">381</literal></expr><operator>,</operator><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">406</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>protected</specifier> <name>void</name> <call><name>verifySleepJobCounters</name><argument_list>(<argument><expr><name>Job</name> <name>job</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>InterruptedException</name></expr></argument>,
         <argument><expr><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument></throws></expr></expr_stmt>)</block_content></block><empty_stmt>;</empty_stmt></if></if_stmt>
     <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_MAPS</name></name></expr></argument>)</argument_list></call>
         <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>,
    <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><name>numSleepReducers</name></expr></argument>,
         <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_REDUCES</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
     <argument><expr><call><name><name>Assert</name>
         <operator>.</operator><name>assertTrue</name></name><argument_list>(<argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal>
<name>diff</name> <operator>--</operator><name>git</name> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestUberAM</name><operator>.</operator><name>java</name></name> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestUberAM</name><operator>.</operator><name>java</name></name>
<name>index</name> <name>e89a919e050</name><operator>..</operator><name>e198f994a3e</name> <literal type="number">100644</literal>
<operator>--</operator> <name>a</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestUberAM</name><operator>.</operator><name>java</name></name>
<operator>++</operator> <name>b</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>project</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>/</operator><name>hadoop</name><operator>-</operator><name>mapreduce</name><operator>-</operator><name>client</name><operator>-</operator><name>jobclient</name><operator>/</operator><name>src</name><operator>/</operator><name>test</name><operator>/</operator><name>java</name><operator>/</operator><name>org</name><operator>/</operator><name>apache</name><operator>/</operator><name>hadoop</name><operator>/</operator><name>mapreduce</name><operator>/</operator><name>v2</name><operator>/</operator><name><name>TestUberAM</name><operator>.</operator><name>java</name></name>
@@ <operator>-</operator><literal type="number">20</literal></expr></argument>,<argument><expr><literal type="number">7</literal> <operator>+</operator><literal type="number">20</literal></expr></argument>,<argument><expr><literal type="number">6</literal> @@</expr></argument>
 
 <import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>File</name></name>;</import></argument_list></call></expr></argument></argument_list></call></expr></expr_stmt>
 <import>import <name><name>java</name><operator>.</operator><name>io</name><operator>.</operator><name>IOException</name></name>;</import>
<import>import <name><name>java</name><operator>.</operator><name>util</name><operator>.</operator><name>Arrays</name></name>;</import>
 
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>logging</name><operator>.</operator><name>Log</name></name>;</import>
 <import>import <name><name>org</name><operator>.</operator><name>apache</name><operator>.</operator><name>commons</name><operator>.</operator><name>logging</name><operator>.</operator><name>LogFactory</name></name>;</import>
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">40</literal></expr><operator>,</operator><expr><literal type="number">8</literal> <operator>+</operator><literal type="number">39</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@
 <specifier>public</specifier> <name>class</name> <name>TestUberAM</name> extends <name>TestMRJobs</name> <block>{
 
   <expr><specifier>private</specifier> <specifier>static</specifier> <name>final</name> <name>Log</name> <name>LOG</name> <operator>=</operator> <call><name><name>LogFactory</name><operator>.</operator><name>getLog</name></name><argument_list>(<argument><expr><name><name>TestUberAM</name><operator>.</operator><name>class</name></name></expr></argument>)</argument_list></call></expr>;
  <expr><specifier>private</specifier> <name>int</name> <name>numSleepReducers</name></expr>;
  

   @<expr><name>BeforeClass</name>
   <specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>setup</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>IOException</name> <block>{
     <expr><call><name><name>TestMRJobs</name><operator>.</operator><name>setup</name></name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr>;
@@ <expr><operator>-</operator><literal type="number">54</literal></expr>,<expr><literal type="number">21</literal> <operator>+</operator><literal type="number">52</literal></expr>,<expr><literal type="number">15</literal> @@ <specifier>public</specifier> <specifier>static</specifier> <name>void</name> <call><name>setup</name><argument_list>()</argument_list></call> <throws>throws <argument><expr><name>IOException</name> <block>{
   <expr><annotation>@<name>Override</name></annotation>
   <annotation>@<name>Test</name></annotation>
   <specifier>public</specifier> <name>void</name> <call><name>testSleepJob</name><argument_list>()</argument_list></call></expr></block></expr></argument></throws>
  <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>InterruptedException</name></expr></argument>, <argument><expr><name>ClassNotFoundException</name> <block>{</block></expr></argument></throws>
  <throws>throws <argument><expr><name>Exception</name> <block>{
     <expr><name>numSleepReducers</name> <operator>=</operator> <literal type="number">1</literal></expr></block></expr></argument></throws></expr>;
    <if_stmt><if>if <condition>(<expr><name>mrCluster</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
    	<expr_stmt><expr><call><name><name>mrCluster</name><operator>.</operator><name>getConfig</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>setInt</name><argument_list>(<argument><expr><literal type="string">"TestMRJobs.testSleepJob.reduces"</literal></expr></argument>, <argument><expr><name>numSleepReducers</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt/></block_content></block></if></if_stmt>}</block>
     <call><name><name>super</name><operator>.</operator><name>testSleepJob</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></function>
   
   <function><annotation>@<name>Test</name></annotation>
   <type><specifier>public</specifier> <name>void</name></type> <name>testSleepJobWithMultipleReducers</name><parameter_list>()</parameter_list>
  <throws>throws <argument><expr><name>IOException</name></expr></argument>, <argument><expr><name>InterruptedException</name></expr></argument>, <argument><expr><name>ClassNotFoundException</name></expr></argument></throws> <block>{<block_content>
  <throws>throws <argument><expr><name>Exception</name> <block>{
     <expr><name>numSleepReducers</name> <operator>=</operator> <literal type="number">3</literal></expr></block></expr></argument></throws><empty_stmt>;</empty_stmt>
    <if_stmt><if>if <condition>(<expr><name>mrCluster</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition> <block>{<block_content>
      <expr_stmt><expr><call><name><name>mrCluster</name><operator>.</operator><name>getConfig</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>setInt</name><argument_list>(<argument><expr><literal type="string">"TestMRJobs.testSleepJob.reduces"</literal></expr></argument>, <argument><expr><name>numSleepReducers</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
     <expr_stmt><expr><call><name><name>super</name><operator>.</operator><name>testSleepJob</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt>
   </block_content>}</block></function>
   
<annotation>@</annotation>@ <expr_stmt><expr><operator>-</operator><literal type="number">76</literal></expr><operator>,</operator><expr><literal type="number">20</literal> <operator>+</operator><literal type="number">68</literal></expr><operator>,</operator><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>void</name> <call><name>testSleepJobWithMultipleReducers</name><argument_list>()</argument_list></call>
   <specifier>protected</specifier> <name>void</name> <call><name>verifySleepJobCounters</name><argument_list>(<argument><expr><name>Job</name> <name>job</name></expr></argument>)</argument_list></call> <throws>throws <argument><expr><name>InterruptedException</name></expr></argument>,
       <argument><expr><name>IOException</name> <block>{
     <expr><name>Counters</name> <name>counters</name> <operator>=</operator> <call><name><name>job</name><operator>.</operator><name>getCounters</name></name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr>;</expr_stmt>

    <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>OTHER_LOCAL_MAPS</name></name></expr></argument>)</argument_list></call>
        <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_MAPS</name></name></expr></argument>)</argument_list></call>
        <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><name>numSleepReducers</name></expr></argument>,
        <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_REDUCES</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>Assert</name>
        <operator>.</operator><name>assertTrue</name></name><argument_list>(<argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal>
            <operator>&amp;&amp;</operator> <call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt><expr><call><name><name>Assert</name>
        <operator>.</operator><name>assertTrue</name></name><argument_list>(<argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal>
            <operator>&amp;&amp;</operator> <call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt><expr><call><name><name>super</name><operator>.</operator><name>verifySleepJobCounters</name></name><argument_list>(<argument><expr><name>job</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">3</literal></expr></argument>,
         <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>NUM_UBER_SUBMAPS</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
     <expr_stmt><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><name>numSleepReducers</name></expr></argument>,
<argument>@@ <expr><operator>-</operator><literal type="number">168</literal></expr></argument>,<argument><expr><literal type="number">16</literal> <operator>+</operator><literal type="number">147</literal></expr></argument>,<argument><expr><literal type="number">7</literal> @@ <specifier>public</specifier> <name>void</name> <call><name>testFailingMapper</name><argument_list>()</argument_list></call>
   <specifier>protected</specifier> <name>void</name> <call><name>verifyFailingMapperCounters</name><argument_list>(<argument><expr><name>Job</name> <name>job</name></expr></argument>)</argument_list></call>
       <throws>throws <argument><expr><name>InterruptedException</name></expr></argument>, <argument><expr><name>IOException</name> <block>{
     <expr><name>Counters</name> <name>counters</name> <operator>=</operator> <call><name><name>job</name><operator>.</operator><name>getCounters</name></name><argument_list>()</argument_list></call></expr></block></expr></argument></throws></expr></argument>;
    <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>OTHER_LOCAL_MAPS</name></name></expr></argument>)</argument_list></call>
        <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
    <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_MAPS</name></name></expr></argument>)</argument_list></call>
        <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
    <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>NUM_FAILED_MAPS</name></name></expr></argument>)</argument_list></call>
        <operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
    <argument><expr><call><name><name>Assert</name>
        <operator>.</operator><name>assertTrue</name></name><argument_list>(<argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call> <operator>!=</operator> <literal type="null">null</literal>
            <operator>&amp;&amp;</operator> <call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>SLOTS_MILLIS_MAPS</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call> <operator>!=</operator> <literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>;

    <argument><expr><call><name><name>super</name><operator>.</operator><name>verifyFailingMapperCounters</name></name><argument_list>(<argument><expr><name>job</name></expr></argument>)</argument_list></call></expr></argument>;
     <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>,
         <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>TOTAL_LAUNCHED_UBERTASKS</name></name></expr></argument>)</argument_list></call><operator>.</operator><call><name>getValue</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>;
     <argument><expr><call><name><name>Assert</name><operator>.</operator><name>assertEquals</name></name><argument_list>(<argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><call><name><name>counters</name><operator>.</operator><name>findCounter</name></name><argument_list>(<argument><expr><name><name>JobCounter</name><operator>.</operator><name>NUM_UBER_SUBMAPS</name></name></expr></argument>)</argument_list></call>
<operator>-</operator> 
<literal type="number">2.19.1.windows</literal><literal type="number">.1</literal></expr></argument></argument_list></call></expr></argument></argument_list></call></expr></expr_stmt>

</unit>
